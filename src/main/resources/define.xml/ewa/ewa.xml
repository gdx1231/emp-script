<?xml version="1.0" encoding="UTF-8"?><EasyWebTemplates><EasyWebTemplate CreateDate="2011-05-05 13:12:55" Name="frames_fields_list" UpdateDate="2011-05-06 14:59:59">
    <Page>
      <FrameTag>
        <Set FrameTag="ListFrame"/>
      </FrameTag>
      <Name>
        <Set Name="frames_fields_list"/>
      </Name>
      <SkinName>
        <Set IsXhtml="" SkinName="Test1"/>
      </SkinName>
      <DataSource>
        <Set DataSource=""/>
      </DataSource>
      <Cached/>
      <Acl>
        <Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/>
      </Acl>
      <Log>
        <Set Log=""/>
      </Log>
      <DescriptionSet>
        <Set Info="配置项列表" Lang="zhcn" Memo=""/>
        <Set Info="Items list" Lang="enus" Memo=""/>
      </DescriptionSet>
      <PageAttributeSet/>
      <GroupSet/>
      <Size>
        <Set HAlign="center" Height="" HiddenCaption="" VAlign="" Width="700"/>
      </Size>
      <AddHtml>
        <Set>
          <Top>
            <![CDATA[<div style='width:710px; height:260px; overflow:auto'>
 
		]]>
          </Top>
          <Bottom>
            <![CDATA[</div>
<hr>
<div align=right>
<button type='button' onclick='ok()'>确定</button>
&nbsp;
<button type='button'>取消</button>
&nbsp;
</div> ]]>
          </Bottom>
        </Set>
      </AddHtml>
      <AddScript>
        <Set>
          <Top>
            <![CDATA[var xml;
var d_xml_name='@D_XML_NAME';
var d_item_name='@D_ITEM_NAME'
var names ={};
function init(){
	var hs = '@h'.split(',');
	for(var i=0;i<hs.length;i++){
		 var key=hs[i].trimEx().toUpperCase();
		 names[key]=1;
	}
	xml=new EWA.C.Xml();
	var url=EWA.CP + "/EWA_DEFINE/cgi-bin/xml/?XMLNAME="+ d_xml_name +"&ITEMNAME=" + d_item_name;
	xml.LoadXmlFile(url);
	 	
	var nl=xml.GetElements('XItems/XItem');
	for(var i=0;i<nl.length;i++){
		init_row(nl[i], i);
	}
} 
function init_row(node,index){
	var name=node.getAttribute('Name');
	var des = node.getElementsByTagName('DescriptionSet')[0];
	var tp = node.getElementsByTagName('Tag')[0].getElementsByTagName('Set')[0].getAttribute('Tag');
	var tr= $X("EWA_LF_@SYS_FRAME_UNID").insertRow(-1);
	for(var i=0;i<tr.parentNode.rows[0].cells.length;i++){
		tr.insertCell(-1); 
		tr.cells[i].className='EWA_TD_M';
	}
	tr.cells[0].innerHTML=index+1;
	tr.cells[1].innerHTML='<input type=checkbox value="' + name + '" />'; 
	if(names[name.toUpperCase()]==1){
		tr.cells[1].childNodes[0].checked = true; 
	}
	tr.cells[2].innerHTML=name;
	tr.cells[3].innerHTML=des.getElementsByTagName('Set')[0].getAttribute('Info');
	tr.cells[4].innerHTML=tp;
}
function ok(){
	var ids= EWA.F.FOS["@SYS_FRAME_UNID"].SelectChecked();
	var obj=_EWA_DialogWnd._OpenerWindow.$X('@F_ID').parentNode.parentNode.getElementsByTagName('input')[0];
	obj.value=ids;
	if(obj.onblur) obj.onblur(); 
	_EWA_DialogWnd.CloseWindow();
}]]>
          </Top>
          <Bottom><![CDATA[AddEvent(window,'load',init);]]></Bottom>
        </Set>
      </AddScript>
      <AddCss>
        <Set>
          <AddCss><![CDATA[ ]]></AddCss>
        </Set>
      </AddCss>
      <ChartsShow/>
      <FrameHtml/>
      <PageSize/>
      <ListUI/>
      <MenuShow/>
      <Menu/>
      <Tree/>
      <HtmlFrame>
        <Set FrameBorder="" FrameSize="" FrameType=""/>
      </HtmlFrame>
      <TreeIconSet/>
      <MGAxisX/>
      <MGAxisY/>
      <MGCell/>
    </Page>
    <Action>
      <ActionSet/>
      <SqlSet/>
      <ClassSet/>
      <XmlSet/>
      <XmlSetData/>
      <ScriptSet/>
      <UrlSet/>
      <CSSet/>
      <CallSet>
        <Set CallName="LoadFields" CallType="ClassSet" Test=""/>
      </CallSet>
    </Action>
    <XItems>
      <XItem Name="inc">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="inc"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue="SEQID"/>
        </InitValue>
        <DescriptionSet>
          <Set Info="序号" Lang="zhcn" Memo=""/>
          <Set Info="No" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle="width:27px"/>
        </ParentStyle>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="name">
        <Tag>
          <Set IsLFEdit="" Tag="checkbox"/>
        </Tag>
        <Name>
          <Set Name="name"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue="SEQID"/>
        </InitValue>
        <DescriptionSet>
          <Set Info="选择" Lang="zhcn" Memo=""/>
          <Set Info="Select" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle="width:27px"/>
        </ParentStyle>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="name1">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="name1"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="名称" Lang="zhcn" Memo=""/>
          <Set Info="Name" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="zhcn" User="&lt;a href='javascript:openFrame(&quot;@getName&quot;)'&gt;@getName&lt;/a&gt;"/>
        </UserSet>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="des">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="des"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="描述" Lang="zhcn" Memo="字段的描述"/>
          <Set Info="Description" Lang="enus" Memo="Field Description"/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="type">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="type"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="类型" Lang="zhcn" Memo=""/>
          <Set Info="Type" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
    </XItems>
    <Menus/>
    <Charts/>
    <PageInfos/>
  </EasyWebTemplate><EasyWebTemplate CreateDate="2012-01-10 10:16:35" Name="commmon_sqls" UpdateDate="2012-01-10 15:30:45">
    <Page>
      <FrameTag>
        <Set FrameTag="ListFrame"/>
      </FrameTag>
      <Name>
        <Set Name="commmon_sqls"/>
      </Name>
      <SkinName>
        <Set IsXhtml="" SkinName="Test1"/>
      </SkinName>
      <DataSource>
        <Set DataSource=""/>
      </DataSource>
      <Cached/>
      <Acl>
        <Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/>
      </Acl>
      <Log>
        <Set Log=""/>
      </Log>
      <DescriptionSet>
        <Set Info="配置项列表" Lang="zhcn" Memo=""/>
        <Set Info="Items list" Lang="enus" Memo=""/>
      </DescriptionSet>
      <PageAttributeSet/>
      <GroupSet/>
      <Size>
        <Set HAlign="" Height="" HiddenCaption="" VAlign="" Width="100%"/>
      </Size>
      <AddHtml>
        <Set>
          <Top>
            <![CDATA[<div id='divButton'  >
<input type='button' onclick="addNew();" value='添加新数据' />
<hr />  
</div>
					]]>
          </Top>
          <Bottom>
            <![CDATA[<form action="./?XMLNAME=|ewa|group.xml&ITEMNAME=main" method=post target=_blank>
	<input type=hidden name=i> 
</form>]]>
          </Bottom>
        </Set>
      </AddHtml>
      <AddScript>
        <Set>
          <Top>
            <![CDATA[function addNew(){
	EWA.UI.Dialog.OpenReloadClose('@sys_frame_unid',
		'|ewa|ewa.xml',
		'commmon_sqls_newmodify', false,
		'EWA_MTYPE=N')
}
 
 ]]>
          </Top>
          <Bottom>
            <![CDATA[var xmlName="@VIEW_XMLNAME";     
function openFrame(itemName){  
	var url= './?XMLNAME=ewa|ewa.xml&ITEMNAME=define_right&D_XMLNAME=' 
     + encodeURIComponent(xmlName) + '&D_ITEMNAME=' 
     + encodeURIComponent(itemName); 
	window.parent.AddTab( url,itemName);
}
if('@linktype'=='group'){
	$X('divButton').style.display='none';
	var tb=$X('EWA_LF_@SYS_FRAME_UNID');
	for(var i=0;i<tb.rows.length;i++){
		tb.rows[i].cells[tb.rows[i].cells.length-1].style.display='none';
		tb.rows[i].cells[tb.rows[i].cells.length-2].style.display='none';
		tb.rows[i].cells[tb.rows[i].cells.length-3].style.display='none';
		
	}
}
VIEW_XMLNAME ='@VIEW_XMLNAME';]]>
          </Bottom>
        </Set>
      </AddScript>
      <AddCss>
        <Set>
          <AddCss>
            <![CDATA[
#col_true{
						 width:16px;
						  background-image : url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/key_p.gif') }
#col_false{ 
							width:16px;
							background-image : url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/column.gif')
}
#fk_false{
							display:none;
}
					]]>
          </AddCss>
        </Set>
      </AddCss>
      <ChartsShow/>
      <FrameHtml/>
      <PageSize>
        <Set AllowExport="" ColSize="" IsSplitPage="" KeyField="getname" PageSize=""/>
      </PageSize>
      <ListUI>
        <Set luButtons="1" luSearch="" luSelect="S"/>
      </ListUI>
      <MenuShow/>
      <Menu/>
      <Tree/>
      <HtmlFrame>
        <Set FrameBorder="" FrameSize="" FrameType=""/>
      </HtmlFrame>
      <TreeIconSet/>
      <MGAxisX/>
      <MGAxisY/>
      <MGCell/>
      <Workflow/>
      <LogicShow/>
    </Page>
    <Action>
      <ActionSet>
        <Set LogMsg="" Type="OnPageLoad">
          <CallSet>
            <Set CallName="load" CallType="XmlSet" Test=""/>
          </CallSet>
        </Set>
        <Set LogMsg="" Type="OnListFrameUpdateCell">
          <CallSet>
            <Set CallName="update des" CallType="ClassSet" Test=""/>
          </CallSet>
        </Set>
      </ActionSet>
      <SqlSet/>
      <ClassSet>
        <Set ClassName="com.gdxsoft.easyweb.define.UserXmls" ConData="" MethodData="@view_xmlname" MethodName="getXmls" Name="LoadFields" XmlTag=""/>
        <Set ClassName="com.gdxsoft.easyweb.define.UpdateXml" ConData="@VIEW_XMLNAME" MethodData="@EWA_ACTION_KEY,@getdescription" MethodName="updateDescription" Name="update des" XmlTag=""/>
      </ClassSet>
      <XmlSet>
        <Set Name="load" XmlAction="load" XmlData="" XmlFields="" XmlSetData="数据源" XmlWhere=""/>
      </XmlSet>
      <XmlSetData>
        <Set Name="数据源" XmlFields="" XmlLoadType="attribute" XmlName="@EWA.SCRIPT.PATH/__ewa_common.sqls" XmlTagPath="Sqls/Sql"/>
      </XmlSetData>
      <ScriptSet/>
      <UrlSet/>
      <CSSet/>
      <CallSet>
        <Set CallName="LoadFields" CallType="ClassSet" Test=""/>
      </CallSet>
    </Action>
    <XItems>
      <XItem Name="inc">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="inc"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue="SEQID"/>
        </InitValue>
        <DescriptionSet>
          <Set Info="序号" Lang="zhcn" Memo=""/>
          <Set Info="No" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="Name">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="Name"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="选择" Lang="zhcn" Memo="a"/>
          <Set Info="Select" Lang="enus" Memo="a"/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="Name" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="Des">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="Des"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="描述" Lang="zhcn" Memo=""/>
          <Set Info="Name" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="Des" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="zhcn" User="&lt;a href='javascript:openFrame(&quot;@getName&quot;)'&gt;@getName&lt;/a&gt;"/>
        </UserSet>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="FieldValue">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="FieldValue"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="值字段" Lang="zhcn" Memo=""/>
          <Set Info="Frame Type" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="FieldValue" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="FieldDisplay">
        <Tag>
          <Set IsLFEdit="1" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="FieldDisplay"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="显示字段" Lang="zhcn" Memo=""/>
          <Set Info="Description" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="FieldDisplay" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="Ref">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="Ref"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="引用" Lang="zhcn" Memo=""/>
          <Set Info="References" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="Ref" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="Paras">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="Paras"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="参数" Lang="zhcn" Memo=""/>
          <Set Info="Parameters" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="Paras" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="INNERTEXT">
        <Tag>
          <Set IsLFEdit="" Tag="span"/>
        </Tag>
        <Name>
          <Set Name="INNERTEXT"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="SQL" Lang="zhcn" Memo=""/>
          <Set Info="SQL" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="INNERTEXT" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="buta">
        <Tag>
          <Set IsLFEdit="" Tag="button"/>
        </Tag>
        <Name>
          <Set Name="buta"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="修改" Lang="zhcn" Memo=""/>
          <Set Info="Test" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle="width:30px;"/>
        </ParentStyle>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame>
          <Set CallItemName="commmon_sqls_newmodify" CallMethod="OpenReloadClose" CallParas="EWA_MTYPE=M&amp;NAME=@NAME" CallXmlName="|ewa|ewa.xml"/>
        </OpenFrame>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
    </XItems>
    <Menus/>
    <Charts/>
    <PageInfos/>
    <Workflows/>
  </EasyWebTemplate><EasyWebTemplate CreateDate="2012-01-10 10:55:21" Name="commmon_sqls_newmodify" UpdateDate="2012-01-11 10:04:05">
    <Page>
      <FrameTag>
        <Set FrameTag="Frame"/>
      </FrameTag>
      <Name>
        <Set Name="commmon_sqls_newmodify"/>
      </Name>
      <SkinName>
        <Set IsXhtml="" SkinName="Test1"/>
      </SkinName>
      <DataSource>
        <Set DataSource=""/>
      </DataSource>
      <Cached/>
      <Acl>
        <Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/>
      </Acl>
      <Log/>
      <DescriptionSet>
        <Set Info="公共数据" Lang="zhcn" Memo=""/>
        <Set Info="Public data" Lang="enus" Memo=""/>
      </DescriptionSet>
      <PageAttributeSet/>
      <GroupSet/>
      <Size>
        <Set HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="700px"/>
      </Size>
      <AddHtml>
        <Set>
          <Top><![CDATA[<script language="javascript" src="../js/EWA_COLOR_MARK.js"></script> ]]></Top>
          <Bottom/>
        </Set>
      </AddHtml>
      <AddScript>
        <Set>
          <Top>
            <![CDATA[function ok(){
	var sql = window.frames[0].getText().trimEx();
	$X('INNERTEXT').value=sql;
	return true; 
}]]>
          </Top>
          <Bottom>
            <![CDATA[var __TYPE__	 = "SQL";
addEvent(window,'load',function(){
		$X('INNERTEXT').style.display='none';
		
		var div = document.createElement('div');
		$X('INNERTEXT').parentNode.appendChild(div);
		var s='<iframe src="./?xmlname=|ewa|ewa.xml&itemname=define_edit_color&ewa_debug_no=1" width=100% height=100% frameborder=0></iframe>';
		__VAL__	= $X('INNERTEXT').value;
		div.innerHTML = s;
	}
);
 function aa(){
}]]>
          </Bottom>
        </Set>
      </AddScript>
      <AddCss>
        <Set>
          <AddCss/>
        </Set>
      </AddCss>
      <ChartsShow/>
      <FrameHtml>
        <Set>
          <FrameHtml/>
        </Set>
      </FrameHtml>
      <PageSize/>
      <ListUI/>
      <MenuShow/>
      <Menu/>
      <Tree/>
      <HtmlFrame/>
      <TreeIconSet/>
      <MGAxisX/>
      <MGAxisY/>
      <MGCell/>
      <Workflow/>
      <LogicShow/>
    </Page>
    <Action>
      <ActionSet>
        <Set LogMsg="" Type="loadAll">
          <CallSet>
            <Set CallName="load" CallType="XmlSet" Test=""/>
          </CallSet>
        </Set>
        <Set LogMsg="" Type="OnPageLoad">
          <CallSet>
            <Set CallName="onpageload xml" CallType="XmlSet" Test="'@EWA_MTYPE' = 'M'"/>
          </CallSet>
        </Set>
        <Set LogMsg="" Type="OnPagePost">
          <CallSet>
            <Set CallName="update" CallType="XmlSet" Test=""/>
          </CallSet>
        </Set>
      </ActionSet>
      <SqlSet/>
      <ClassSet/>
      <XmlSet>
        <Set Name="load" XmlAction="load" XmlData="" XmlFields="" XmlSetData="数据源" XmlWhere=""/>
        <Set Name="onpageload xml" XmlAction="load" XmlData="" XmlFields="" XmlSetData="数据源" XmlWhere="Name=@Name"/>
        <Set Name="update" XmlAction="inertOrUpdate" XmlData="" XmlFields="" XmlSetData="数据源" XmlWhere="Name=@Name"/>
      </XmlSet>
      <XmlSetData>
        <Set Name="数据源" XmlFields="" XmlLoadType="attribute" XmlName="@EWA.SCRIPT.PATH/__ewa_common.sqls" XmlTagPath="Sqls/Sql"/>
      </XmlSetData>
      <ScriptSet/>
      <UrlSet/>
      <CSSet/>
      <CallSet>
        <Set CallName="load" CallType="XmlSet" Test=""/>
      </CallSet>
    </Action>
    <XItems>
      <XItem Name="Name">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="Name"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="名称" Lang="zhcn" Memo="名称要唯一"/>
          <Set Info="The name" Lang="enus" Memo="Name only"/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttLogic="" AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet/>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="1"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="Name" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="name" DisplayList="" ListAddBlank="1" ListShowType="" Sql="{action:datasource}" TitleField="" TitleList="" ValueField="key" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </DefineFrame>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx>
          <Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/>
        </VaildEx>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="Des">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="Des"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="描述" Lang="zhcn" Memo=""/>
          <Set Info="Description" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch/>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput>
          <Set IsMustInput="1"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="Des" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="FieldValue">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="FieldValue"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="值字段" Lang="zhcn" Memo=""/>
          <Set Info="Value field" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttLogic="" AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet/>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="0"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="FieldValue" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </DefineFrame>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx>
          <Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/>
        </VaildEx>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="FieldDisplay">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="FieldDisplay"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="显示字段" Lang="zhcn" Memo=""/>
          <Set Info="Display field" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttLogic="" AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet/>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="200" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="0"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="FieldDisplay" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </DefineFrame>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx>
          <Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/>
        </VaildEx>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="Ref">
        <Tag>
          <Set IsLFEdit="" Tag="select"/>
        </Tag>
        <Name>
          <Set Name="Ref"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="参考来源" Lang="zhcn" Memo="子项的调用父项"/>
          <Set Info="Reference sources" Lang="enus" Memo="Call the parent of the children that"/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet>
          <Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="aa()"/>
        </EventSet>
        <IsHtml/>
        <OrderSearch/>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="Ref" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="Des" DisplayList="" ListAddBlank="1" ListShowType="Key-Text" Sql="{action:loadAll}" TitleField="" TitleList="" ValueField="Name" ValueList=""/>
        </List>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="Paras">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="Paras"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="参考参数" Lang="zhcn" Memo="和来源的参数数量一致"/>
          <Set Info="Reference parameters" Lang="enus" Memo="Number of arguments and sources"/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttLogic="" AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet/>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="500" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="0"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="Paras" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </DefineFrame>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx>
          <Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/>
        </VaildEx>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="INNERTEXT">
        <Tag>
          <Set IsLFEdit="" Tag="textarea"/>
        </Tag>
        <Name>
          <Set Name="INNERTEXT"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="SQL" Lang="zhcn" Memo=""/>
          <Set Info="SQL" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttLogic="" AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet>
          <Set EventLogic="" EventName="" EventType="" EventValue=""/>
        </EventSet>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="0"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="INNERTEXT" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="DENY_DES" DisplayList="" ListAddBlank="" ListShowType="" Sql="SELECT * FROM EWA_DENY WHERE 1=1" TitleField="" TitleList="" ValueField="DENY" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="zhcn" User="&lt;div style='height:100px;font-size:13px;' id='sql1'&gt; &lt;/div&gt;"/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </DefineFrame>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx>
          <Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/>
        </VaildEx>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="butOk">
        <Tag>
          <Set IsLFEdit="" Tag="submit"/>
        </Tag>
        <Name>
          <Set Name="butOk"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="确定" Lang="zhcn" Memo=""/>
          <Set Info="Ok" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle="width:40px; text-align: center"/>
        </ParentStyle>
        <AttributeSet>
          <Set AttLogic="" AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet>
          <Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="ok()"/>
        </EventSet>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput=""/>
        </IsMustInput>
        <DataItem>
          <Set DataField="butOk" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </DefineFrame>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx>
          <Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/>
        </VaildEx>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
      <XItem Name="butClose">
        <Tag>
          <Set IsLFEdit="" Tag="button"/>
        </Tag>
        <Name>
          <Set Name="butClose"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="关闭" Lang="zhcn" Memo=""/>
          <Set Info="Cancel" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle="width:40px; text-align: center"/>
        </ParentStyle>
        <AttributeSet>
          <Set AttLogic="" AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet>
          <Set EventLogic="" EventName="" EventType="" EventValue=""/>
        </EventSet>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput=""/>
        </IsMustInput>
        <DataItem>
          <Set DataField="butClose" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </DefineFrame>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx>
          <Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/>
        </VaildEx>
        <MGAddField/>
        <AnchorParas/>
        <DopListShow/>
        <ReportCfg/>
      </XItem>
    </XItems>
    <Menus/>
    <Charts/>
    <PageInfos/>
    <Workflows/>
  </EasyWebTemplate><EasyWebTemplate CreateDate="2013-05-10 14:09:52" Name="file_diffs" UpdateDate="2013-05-10 16:50:18"><Page><FrameTag><Set FrameTag="ListFrame"/></FrameTag><Name><Set Name="file_diffs"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="配置项列表" Lang="zhcn" Memo=""/><Set Info="Items list" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="" Height="" HiddenCaption="" VAlign="" Width="100%"/></Size><AddHtml><Set><Top/><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[function syncFiels(){
  var ids=EWA.F.FOS["@SYS_FRAME_UNID"].SelectChecked();
  var paras=[];
  paras[0]={Name:'ids', Value:ids};
  
  EWA.F.FOS['@SYS_FRAME_UNID'].DoAction(this, 
                                        'OnListFrameUpdateCell',
                                        '你确定要更新么', '完成同步' , paras);
}]]></Top><Bottom><![CDATA[function loadCfg(){
  var objs=document.getElementsByClassName('ewa_lf_func_caption');
  if(objs.length==0){
    setTimeout(loadCfg,100);
    return;
  }
  var u= window.location+'&ewa_action=getcfgs&ewa_ajax=json';
  $J(u,loadCfg1);

}
function loadCfg1(datas){
  var o=document.getElementsByClassName('ewa_lf_func_caption')[0];
  var o1=document.createElement('select');
  o1.options[o1.options.length]=new Option('','');
  for(var i=0;i<datas.length;i++){
    var data=datas[i];
    var txt=data.getName;
    var opt = new Option(txt,data.getId);
    opt.title='(' + data.getSource + ',' + data.getTarget+')';
    o1.options[o1.options.length]=opt;
    if('@id'==data.getId){
      opt.selected=true;
    }
  }
  
  o1.onchange=function(){
    window.location.href='./?XMLNAME=@xmlname&ITEMNAME=file_diffs&id='
      +this.value;
  }
  
  var o2=document.createElement('span');
  o2.innerHTML='&nbsp;选择同步项目:';
  o.appendChild(o2);
  o.appendChild(o1);  
}
addEvent(window,'load',loadCfg);
]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[
            
#col_true{
						 width:16px;
						  background-image : url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/key_p.gif') }
#col_false{ 
							width:16px;
							background-image : url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/column.gif')
}
#fk_false{
							display:none;
}
					
          ]]></AddCss></Set></AddCss><ChartsShow/><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="" KeyField="getname" PageSize=""/></PageSize><ListUI><Set luButtons="1" luSearch="" luSelect="M"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="no" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="OnListFrameUpdateCell"><CallSet><Set CallIsChk="" CallName="update des" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="getCfgs"><CallSet><Set CallIsChk="" CallName="getCfgs" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.Sync" ConData="" MethodData="@id" MethodName="getDiffsById" Name="LoadFields" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.define.Sync" ConData="" MethodData="@id,@ids" MethodName="syncFiles" Name="update des" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.define.Sync" ConData="" MethodData="" MethodName="getCfgs" Name="getCfgs" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="chk"><Tag><Set IsLFEdit="" Tag="checkboxgrid"/></Tag><Name><Set Name="chk"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="选择" Lang="zhcn" Memo="a"/><Set Info="Select" Lang="enus" Memo="a"/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:27px"/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getPath" DataType="String" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="getName"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="getName"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="文件" Lang="zhcn" Memo=""/><Set Info="File" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getName" DataType="" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="getPath"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="getPath"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="路径" Lang="zhcn" Memo=""/><Set Info="Path" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getPath" DataType="" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="length"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="length"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="长度" Lang="zhcn" Memo=""/><Set Info="Length" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getlength" DataType="String" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List><Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet><Set Lang="zhcn" User="&lt;a href='javascript:openFrame(&quot;@getName&quot;)'&gt;@getName&lt;/a&gt;"/></UserSet><CallAction/><OpenFrame/><Frame/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="getdate"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="getdate"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="修改日期" Lang="zhcn" Memo=""/><Set Info="Modify Time" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getdate" DataType="" Format="DateTime" IsEncrypt="" Valid=""/></DataItem><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="butSync"><Tag><Set IsLFEdit="" Tag="button"/></Tag><Name><Set Name="butSync"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="同步文件" Lang="zhcn" Memo=""/><Set Info="Synchronize files" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="syncFiels()"/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2009-09-24 15:20:56" Name="frame_update" UpdateDate="2013-09-05 14:53:14"><Page><FrameTag><Set FrameTag="Frame"/></FrameTag><Name><Set Name="frame_update"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="修改参数" Lang="zhcn" Memo=""/><Set Info="Modifying parameters" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="600px;"/></Size><AddHtml><Set><Top/><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom/></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPagePost"><CallSet><Set CallIsChk="" CallName="update" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.UpdateXml" ConData="@VIEW_XMLNAME" MethodData="@itemNames, @paraName, @paraValue" MethodName="batchUpdate" Name="update" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="update" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="paraName"><Tag><Set IsLFEdit="" Tag="select"/></Tag><Name><Set Name="paraName"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="目标" Lang="zhcn" Memo=""/><Set Info="Target" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength><Set MaxLength="100" MinLength=""/></MaxMinLength><MaxMinValue><Set MaxValue="" MinValue=""/></MaxMinValue><IsMustInput><Set IsMustInput="1"/></IsMustInput><DataItem><Set DataField="paraName" DataType="String" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List><Set DisplayField="" DisplayList=",数据源,皮肤,权限,日志" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=",DataSource,SkinName,Acl,Log"/></List><UserSet><Set Lang="" User=""/></UserSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame><Frame><Set CallItemName="" CallPara="" CallXmlName=""/></Frame><DefineFrame><Set CallItemName="" CallPara="" CallXmlName=""/></DefineFrame><PopFrame/><Upload><Set Up2Swf="" UpDelete="" UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/></Upload><VaildEx><Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/></VaildEx><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="paraValue"><Tag><Set IsLFEdit="" Tag="text"/></Tag><Name><Set Name="paraValue"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="修改内容" Lang="zhcn" Memo=""/><Set Info="Modify content" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength><Set MaxLength="100" MinLength=""/></MaxMinLength><MaxMinValue><Set MaxValue="" MinValue=""/></MaxMinValue><IsMustInput><Set IsMustInput="1"/></IsMustInput><DataItem><Set DataField="paraValue" DataType="String" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List><Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet><Set Lang="" User=""/></UserSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame><Frame><Set CallItemName="" CallPara="" CallXmlName=""/></Frame><DefineFrame><Set CallItemName="" CallPara="" CallXmlName=""/></DefineFrame><PopFrame/><Upload><Set Up2Swf="" UpDelete="" UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/></Upload><VaildEx><Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/></VaildEx><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="butOk"><Tag><Set IsLFEdit="" Tag="submit"/></Tag><Name><Set Name="butOk"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="确定" Lang="zhcn" Memo=""/><Set Info="Ok" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength><Set MaxLength="" MinLength=""/></MaxMinLength><MaxMinValue><Set MaxValue="" MinValue=""/></MaxMinValue><IsMustInput><Set IsMustInput=""/></IsMustInput><DataItem><Set DataField="butOk" DataType="" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List><Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet><Set Lang="" User=""/></UserSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame><Frame><Set CallItemName="" CallPara="" CallXmlName=""/></Frame><DefineFrame><Set CallItemName="" CallPara="" CallXmlName=""/></DefineFrame><PopFrame/><Upload><Set Up2Swf="" UpDelete="" UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/></Upload><VaildEx><Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/></VaildEx><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem><XItem Name="butClose"><Tag><Set IsLFEdit="" Tag="button"/></Tag><Name><Set Name="butClose"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="取消" Lang="zhcn" Memo=""/><Set Info="Cancel" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength><Set MaxLength="" MinLength=""/></MaxMinLength><MaxMinValue><Set MaxValue="" MinValue=""/></MaxMinValue><IsMustInput><Set IsMustInput=""/></IsMustInput><DataItem><Set DataField="butClose" DataType="" Format="" IsEncrypt="" Valid=""/></DataItem><DataRef/><List><Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet><Set Lang="" User=""/></UserSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame><Frame><Set CallItemName="" CallPara="" CallXmlName=""/></Frame><DefineFrame><Set CallItemName="" CallPara="" CallXmlName=""/></DefineFrame><PopFrame/><Upload><Set Up2Swf="" UpDelete="" UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/></Upload><VaildEx><Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/></VaildEx><MGAddField/><AnchorParas/><DopListShow/><ReportCfg/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2012-01-12 16:53:34" Name="wf_design" UpdateDate="2013-09-05 14:55:12"><Page><FrameTag><Set FrameTag="Frame"/></FrameTag><Name><Set Name="wf_design"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="流程设计" Lang="zhcn" Memo=""/><Set Info="Process design" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="onmouseup" PageAttValue="EWAC_WfUtil.MouseUp(event)"/><Set PageAttName="onmousemove" PageAttValue="EWAC_WfUtil.MouseMove(event)"/><Set PageAttName="onselectstart" PageAttValue="return false;"/><Set PageAttName="onmousedown" PageAttValue="EWAC_WfUtil.MouseDown(event)"/><Set PageAttName="ondragstart" PageAttValue="return false;"/></PageAttributeSet><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script type='text/javascript' src='../../EWA_DEFINE/js/EWAC_WF.js'></script>  ]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[
            function Inita(){
	document.body.style.overflow='hidden';
	Init();	
}
addEvent(window,'load', Inita); 
          ]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[ ]]></AddCss></Set></AddCss><ChartsShow/><FrameHtml><Set><FrameHtml><![CDATA[
            <table id="T1" border="1" align="center" cellpadding="1" cellspacing="1" 
		style="BORDER-COLLAPSE: collapse;background-color:#fff">
    <tr>
     <td width="45" height="45">
      <img title="鼠标按下并拖拽我，放到屏幕合适的位置" id="TEMP" class='ewa_wf_unit_img'
       src='../images/transparent.png' />
     </td>
	<td width="50" align="right">名称：</td>
	<td width="100">
      <input type="text" name="AtomName" style="FONT-SIZE: 12px; WIDTH: 100%"  onblur="SetAtomName(this.value)" />
	</td>
	<td width="50" align="right">类型：</td>
     <td width="100">
      <select id="AtomType" name="AtomType" style="FONT-SIZE: 12px; WIDTH: 100%" onchange="SetAtomType(this.value)">
       <option value="0" selected>IO</option>
       <option value="1">ICO</option>
      </select>
     </td>
     <td>
      <input id="Eisobuttongray1" type='button' 
       onclick="EWAC_WfUtil.WF.CreateCnn()"
       value="连接" />
     </td>
     <td>
      <input id="Eisobuttongray2" type='button' onclick="EWAC_WfUtil.Delete()" value="删除" />
     </td>
     <td>
      <input id="butOk" type='button' onclick="CreateExp();" value="确定" />
     </td>
     <td>
      <input id="Eisobuttongray3" type='button' onclick="PropSetting();" value="属性定义" />
     </td>
    </tr>
   </table>
  
          ]]></FrameHtml></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2009-01-07 17:01:20" Name="define_edit_color" UpdateDate="2014-03-22 21:18:07"><Page><FrameTag><Set FrameTag="Frame"/></FrameTag><Name><Set Name="define_edit_color"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="tabls" Lang="zhcn" Memo=""/><Set Info="tabls" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="../js/EWA_COLOR_MARK.js">
</script>
<div id='edit' style="margin:0px; border:1px solid #ccc;background-color:#FFF; width:1000px; height:650px; overflow:auto;"
contenteditable="true" onkeyup="cm.KeyUp(event);" onkeydown="cm.KeyDown(event);">
</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[document.body.style.overflow = 'hidden';
document.body.margin = '0px';]]></Top><Bottom><![CDATA[var cm;
var markType;
function loadContent() {
	var val = window.parent.__VAL__;
	markType = window.parent.__TYPE__;
	cm = new EWA_ColorMark(markType, document.getElementById('edit'));
	setText(val);
	var o = $X('edit');
	var o1 = o.parentNode;
	o.style.width = document.body.clientWidth + 'px';
	o.style.height = document.body.clientHeight + 'px';
}
function getText() {
	var mm = /\u3000\u3000/gi;
	var s1 = cm._GetEditText();
	return s1.replace(mm, "\t").replace(/\u3000/ig, "\t");
}
function setText(val) {
	val = val.replace(/\t/ig, '\u3000\u3000');
	document.getElementById('edit').innerHTML = cm.MarkColor(val);
	document.getElementById('edit').focus();
}
addEvent(window, 'load',
function() {
	if (typeof window.parent.__VAL__ != undefined) {
		loadContent();
	}
});]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[
            
p{margin:0px;}
div, p, font, div { font-size:13px; font-family:"Courier New";}
					
          ]]></AddCss></Set></AddCss><ChartsShow/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2011-05-06 14:02:33" Name="sn_new_modi" UpdateDate="2015-03-30 18:16:51">
    <Page>
      <FrameTag>
        <Set FrameTag="Frame"/>
      </FrameTag>
      <Name>
        <Set Name="sn_new_modi"/>
      </Name>
      <SkinName>
        <Set IsXhtml="" SkinName="Test1"/>
      </SkinName>
      <DataSource>
        <Set DataSource=""/>
      </DataSource>
      <Cached>
        <Set CachedSeconds="" CachedType="none"/>
      </Cached>
      <Acl>
        <Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/>
      </Acl>
      <Log/>
      <DescriptionSet>
        <Set Info="新建/修改短名称" Lang="zhcn" Memo=""/>
        <Set Info="New/Modify Short Name" Lang="enus" Memo=""/>
      </DescriptionSet>
      <PageAttributeSet/>
      <GroupSet/>
      <Size>
        <Set HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="700px"/>
      </Size>
      <AddHtml>
        <Set>
          <Top/>
          <Bottom>
            <![CDATA[<div align=center id="EWA.F.FOS['@SYS_FRAME_UNID'].Resources.Tit.GetInfo()">
</div>]]>
          </Bottom>
        </Set>
      </AddHtml>
      <AddScript>
        <Set>
          <Top>
            <![CDATA[function op(){
	var u = './?XMLNAME=|ewa|ewa.xml&amp;ITEMNAME=define_select_xitem&amp;TYPE=ShortName';
	EWA.UI.Dialog.OpenWindow(u,'selectxitem',624,400)
}
function op1(){
	$X('h').onblur=function(){
	}
	var x= $X('x').value;
	var i= $X('i').value;
	var h= $X('h').value;
	var u='./?XMLNAME=|ewa|ewa.xml&amp;ITEMNAME=frames_fields_list&amp;D_XML_NAME='
	 + x + '&amp;D_ITEM_NAME=' + i + '&amp;H=' + h+'&amp;F_ID=h';
	EWA.UI.Dialog.OpenWindow(u,'lgPara',704,310);
	
}  ]]>
          </Top>
          <Bottom><![CDATA[ ]]></Bottom>
        </Set>
      </AddScript>
      <AddCss>
        <Set>
          <AddCss>
            <![CDATA[.EWA_TD_M{
 width: 400px;
}
.EWA_INPUT{
width: 398px;
}]]>
          </AddCss>
        </Set>
      </AddCss>
      <ChartsShow/>
      <FrameHtml>
        <Set>
          <FrameHtml/>
        </Set>
      </FrameHtml>
      <PageSize/>
      <ListUI/>
      <MenuShow/>
      <Menu/>
      <Tree/>
      <HtmlFrame/>
      <TreeIconSet/>
      <MGAxisX/>
      <MGAxisY/>
      <MGCell/>
    </Page>
    <Action>
      <ActionSet>
        <Set LogMsg="" Type="OnPageLoad">
          <CallSet>
            <Set CallName="check" CallType="XmlSet" Test="'@EWA_MTYPE'='M'"/>
          </CallSet>
        </Set>
        <Set LogMsg="" Type="OnPagePost">
          <CallSet>
            <Set CallName="newOrUpdate" CallType="XmlSet" Test=""/>
          </CallSet>
        </Set>
      </ActionSet>
      <SqlSet/>
      <ClassSet>
        <Set ClassName="com.gdxsoft.easyweb.define.EwaMainInfo" ConData="" MethodData="" MethodName="getInstance" Name="aa" XmlTag=""/>
      </ClassSet>
      <XmlSet>
        <Set Name="check" XmlAction="load" XmlData="" XmlFields="" XmlSetData="config" XmlWhere="n=@n"/>
        <Set Name="newOrUpdate" XmlAction="inertOrUpdate" XmlData="" XmlFields="" XmlSetData="config" XmlWhere="n"/>
      </XmlSet>
      <XmlSetData>
        <Set Name="config" XmlFields="" XmlLoadType="attribute" XmlName="@EWA.SCRIPT.PATH/__ewa_short_names.cfg" XmlTagPath="ss/s"/>
      </XmlSetData>
      <ScriptSet>
        <Set Name="a" ScriptType="javascript">
          <Script><![CDATA[alert(EWA.F.FOS['@SYS_FRAME_UNID'].Resources['LoginFail'].GetInfo());]]></Script>
          <CSSet/>
        </Set>
      </ScriptSet>
      <UrlSet>
        <Set Name="godefine" Url="./?XMLNAME=ewa|ewa.xml&amp;ITEMNAME=index">
          <CSSet>
            <Set CSType="all" Domain="." Life="1000" Name="EWA_ADMIN_ID" Option="C" ParaName="loginid"/>
            <Set CSType="all" Domain="." Life="1000" Name="EWA_ADMIN_NAME" Option="C" ParaName="username"/>
          </CSSet>
        </Set>
      </UrlSet>
      <CSSet/>
      <CallSet>
        <Set CallName="check" CallType="XmlSet" Test="'@EWA_MTYPE'='M'"/>
      </CallSet>
    </Action>
    <XItems>
      <XItem Name="n">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="n"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="名称" Lang="zhcn" Memo="唯一名称"/>
          <Set Info="Name" Lang="enus" Memo="A unique name"/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet>
          <Set EventName="" EventType="" EventValue=""/>
        </EventSet>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="20" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="1"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="n" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame/>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="x">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="x"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="配置文件" Lang="zhcn" Memo="&lt;input type=button  value='助手' onclick='op()'&gt;"/>
          <Set Info="Xml Name" Lang="enus" Memo="&lt;Input type=button value=' assistant 'onclick='op () '&gt;"/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet>
          <Set EventName="" EventType="" EventValue=""/>
        </EventSet>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="1"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="x" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame/>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="i">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="i"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="配置项" Lang="zhcn" Memo=""/>
          <Set Info="ItemName" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle=""/>
        </ParentStyle>
        <AttributeSet>
          <Set AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet>
          <Set EventName="" EventType="" EventValue=""/>
        </EventSet>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="200" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput="1"/>
        </IsMustInput>
        <DataItem>
          <Set DataField="i" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame/>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="p">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="p"/>
        </Name>
        <GroupIndex/>
        <InitValue>
          <Set InitValue=""/>
        </InitValue>
        <DescriptionSet>
          <Set Info="附加参数" Lang="zhcn" Memo="例如：id=1&amp;name=sun"/>
          <Set Info="Added Parameters" Lang="enus" Memo="Example: Id=1&amp;Name=sun"/>
        </DescriptionSet>
        <Style>
          <Set Style=""/>
        </Style>
        <ParentStyle>
          <Set ParentStyle="width:40px; text-align: center"/>
        </ParentStyle>
        <AttributeSet>
          <Set AttName="" AttValue=""/>
        </AttributeSet>
        <EventSet>
          <Set EventName="" EventType="" EventValue=""/>
        </EventSet>
        <IsHtml>
          <Set IsHtml=""/>
        </IsHtml>
        <OrderSearch>
          <Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/>
        </OrderSearch>
        <MaxMinLength>
          <Set MaxLength="" MinLength=""/>
        </MaxMinLength>
        <MaxMinValue>
          <Set MaxValue="" MinValue=""/>
        </MaxMinValue>
        <IsMustInput>
          <Set IsMustInput=""/>
        </IsMustInput>
        <DataItem>
          <Set DataField="p" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List>
          <Set DisplayField="" DisplayList="" ListAddBlank="" ListShowType="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/>
        </List>
        <UserSet>
          <Set Lang="" User=""/>
        </UserSet>
        <CallAction>
          <Set Action="" AfterTip="" ConfirmInfo=""/>
        </CallAction>
        <OpenFrame>
          <Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/>
        </OpenFrame>
        <Frame>
          <Set CallItemName="" CallPara="" CallXmlName=""/>
        </Frame>
        <DefineFrame/>
        <PopFrame/>
        <Upload>
          <Set UpExts="" UpNewSizes="" UpPath="" UpSQL="" UpSaveMethod="" UpType=""/>
        </Upload>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="h">
        <Tag>
          <Set IsLFEdit="" Tag="text"/>
        </Tag>
        <Name>
          <Set Name="h"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="隐含列" Lang="zhcn" Memo="&lt;input id='a_a' type=button  value='助手' onclick='op1()'&gt; 用“,”分割的列名"/>
          <Set Info="Hidden Columns" Lang="enus" Memo="&lt;Input id='a_a'type=button value=' assistant 'onclick='op1 () '&gt; \&quot;,\&quot; split-listing"/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch/>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="h" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="d">
        <Tag>
          <Set IsLFEdit="" Tag="textarea"/>
        </Tag>
        <Name>
          <Set Name="d"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="描述" Lang="zhcn" Memo=""/>
          <Set Info="Description" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch/>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="d" DataType="String" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="butok">
        <Tag>
          <Set IsLFEdit="" Tag="submit"/>
        </Tag>
        <Name>
          <Set Name="butok"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="确定" Lang="zhcn" Memo=""/>
          <Set Info="Ok" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch/>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
      <XItem Name="butcancel">
        <Tag>
          <Set IsLFEdit="" Tag="button"/>
        </Tag>
        <Name>
          <Set Name="butcancel"/>
        </Name>
        <GroupIndex/>
        <InitValue/>
        <DescriptionSet>
          <Set Info="取消" Lang="zhcn" Memo=""/>
          <Set Info="Cancel" Lang="enus" Memo=""/>
        </DescriptionSet>
        <Style/>
        <ParentStyle/>
        <AttributeSet/>
        <EventSet/>
        <IsHtml/>
        <OrderSearch/>
        <MaxMinLength/>
        <MaxMinValue/>
        <IsMustInput/>
        <DataItem>
          <Set DataField="" DataType="" Format="" IsEncrypt="" Valid=""/>
        </DataItem>
        <DataRef/>
        <List/>
        <UserSet/>
        <CallAction/>
        <OpenFrame/>
        <Frame/>
        <DefineFrame/>
        <PopFrame/>
        <Upload/>
        <VaildEx/>
        <MGAddField/>
        <LogicParas/>
      </XItem>
    </XItems>
    <Menus/>
    <Charts/>
    <PageInfos>
      <PageInfo Name="Tit">
        <Name>
          <Set Name="Tit"/>
        </Name>
        <DescriptionSet>
          <Set Info="初始化用户名密码为admin/admin" Lang="zhcn" Memo=""/>
          <Set Info="Init user/password is admin/admin" Lang="enus" Memo=""/>
        </DescriptionSet>
      </PageInfo>
      <PageInfo Name="LoginFail">
        <Name>
          <Set Name="LoginFail"/>
        </Name>
        <DescriptionSet>
          <Set Info="错误的用户名/密码" Lang="zhcn" Memo=""/>
          <Set Info="Error username/password" Lang="enus" Memo=""/>
        </DescriptionSet>
      </PageInfo>
    </PageInfos>
  </EasyWebTemplate><EasyWebTemplate CreateDate="2011-05-06 14:10:26" Name="sn_list" UpdateDate="2015-03-30 18:17:19"><Page><FrameTag><Set FrameTag="ListFrame"/></FrameTag><Name><Set Name="sn_list"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="短名称列表" Lang="zhcn" Memo=""/><Set Info="List of short names" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top/><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[
            function addNew(){
	 	EWA.UI.Dialog.OpenReloadClose("@SYS_FRAME_UNID", "|ewa|ewa.xml", "sn_new_modi", true, 'EWA_MTYPE=N')
}
          ]]></Top><Bottom/></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="0" KeyField="n" PageSize="1000"/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="1" luDblClick="" luDblClickIdx="" luSearch="" luSelect="S"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="xx" CallType="XmlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnFrameDelete"><CallSet><Set CallIsChk="" CallName="del" CallType="XmlSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><ClassSet/><XmlSet><Set Name="xx" XmlAction="load" XmlData="" XmlFields="" XmlSetData="config" XmlWhere=""/><Set Name="del" XmlAction="deletes" XmlData="" XmlFields="" XmlSetData="config" XmlWhere="n=@n"/></XmlSet><XmlSetData><Set Name="config" XmlFields="" XmlLoadType="attribute" XmlName="@EWA.SCRIPT.PATH/__ewa_short_names.cfg" XmlTagPath="ss/s"/></XmlSetData><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="xx" CallType="XmlSet" Test=""/></CallSet></Action><XItems><XItem Name="idx"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="idx"/></Name><GroupIndex/><InitValue><Set InitValue="SEQID"/></InitValue><DescriptionSet><Set Info="序号" Lang="zhcn" Memo=""/><Set Info="Serial number" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40;text-align:center"/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="n"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="n"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="名称" Lang="zhcn" Memo=""/><Set Info="Name" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="n" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="x"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="x"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="配置文件" Lang="zhcn" Memo=""/><Set Info="Xml Name" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="x" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="i"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="i"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="配置项" Lang="zhcn" Memo=""/><Set Info="ItemName" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="i" DataType="Date" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="p"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="p"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="附加参数" Lang="zhcn" Memo=""/><Set Info="Added Parameters" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="p" DataType="" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="h"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="h"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="隐含字段" Lang="zhcn" Memo=""/><Set Info="Hidden Columns" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="h" DataType="" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="d"><Tag><Set IsLFEdit="" Tag="span"/></Tag><Name><Set Name="d"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="描述" Lang="zhcn" Memo=""/><Set Info="Description" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="d" DataType="" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="butNew"><Tag><Set IsLFEdit="" Tag="button"/></Tag><Name><Set Name="butNew"/></Name><GroupIndex/><DescriptionSet><Set Info="新建" Lang="zhcn" Memo=""/><Set Info="New" Lang="enus" Memo=""/></DescriptionSet><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="addNew();"/></EventSet><CallAction/><OpenFrame/></XItem><XItem Name="butModi"><Tag><Set IsLFEdit="" Tag="button"/></Tag><Name><Set Name="butModi"/></Name><GroupIndex/><DescriptionSet><Set Info="修改" Lang="zhcn" Memo=""/><Set Info="Modify" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40;text-align:center"/></ParentStyle><AttributeSet/><EventSet/><CallAction/><OpenFrame><Set CallItemName="sn_new_modi" CallMethod="OpenReloadClose" CallParas="EWA_MTYPE=M&amp;N=@N" CallXmlName="|ewa|ewa.xml"/></OpenFrame></XItem><XItem Name="bukDel"><Tag><Set IsLFEdit="" Tag="button"/></Tag><Name><Set Name="bukDel"/></Name><GroupIndex/><DescriptionSet><Set Info="删除" Lang="zhcn" Memo=""/><Set Info="Delete" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40;text-align:center"/></ParentStyle><AttributeSet/><EventSet/><CallAction><Set Action="OnFrameDelete" AfterTip="" ConfirmInfo="DeleteBefore"/></CallAction><OpenFrame/></XItem><XItem Name="link"><Tag><Set IsLFEdit="" Tag="anchor"/></Tag><Name><Set Name="link"/></Name><GroupIndex/><DescriptionSet><Set Info="测试" Lang="zhcn" Memo=""/><Set Info="Test" Lang="enus" Memo=""/></DescriptionSet><Style/><ParentStyle/><AttributeSet/><EventSet/><AnchorParas><Set aHref="./?$S=@N" aTarget="_blank"/></AnchorParas></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2009-01-07 17:01:20" Name="define" UpdateDate="2016-05-06 17:49:08"><Page><FrameTag><Set FrameTag="Frame"/></FrameTag><Name><Set Name="define"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="blank" Lang="zhcn" Memo=""/><Set Info="blank" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[$('body').css('background','transparent').css('margin',1);]]></Top><Bottom/></Set></AddScript><AddCss><Set><AddCss><![CDATA[.dark {
	color: #e1e1e1;
	background: #303130;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2010-06-13 20:31:36" Name="cache_list" UpdateDate="2016-05-11 16:45:16"><Page><FrameTag><Set FrameTag="ListFrame"/></FrameTag><Name><Set Name="cache_list"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="缓存管理" Lang="zhcn" Memo=""/><Set Info="Cache management" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="" VAlign="" Width="80%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom/></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="0" KeyField="getXmlName, getItemName" PageSize=""/></PageSize><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="310,*" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="clear"><CallSet><Set CallIsChk="" CallName="clear" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.cache.ConfigCache" ConData="" MethodData="" MethodName="getUserConfigs" Name="LoadFields" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.cache.ConfigCache" ConData="" MethodData="@getXmlName, @getItemName" MethodName="removeUserConfig" Name="clear" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="getxmlname"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getxmlname"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="配置文件" Lang="zhcn" Memo=""/><Set Info="Profile" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40%;"/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="1" IsGroupDefault="1" IsOrder="1" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getxmlname" DataType="Date" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="getItemName"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getItemName"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="配置项" Lang="zhcn" Memo=""/><Set Info="Configuration item" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet/><EventSet/><IsHtml><Set IsHtml="0"/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getItemName" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="butdel"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butdel"/></Name><GroupIndex/><DescriptionSet><Set Info="清除" Lang="zhcn" Memo=""/><Set Info="Clear" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align:center"/></ParentStyle><AttributeSet/><EventSet/><CallAction><Set Action="clear" AfterTip="" ConfirmInfo="CommonTitle"/></CallAction><OpenFrame/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2010-04-08 11:37:56" Name="trace" UpdateDate="2016-05-11 16:52:00"><Page><FrameTag><Set FrameTag="ListFrame"/></FrameTag><Name><Set Name="trace"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="跟踪" Lang="zhcn" Memo=""/><Set Info="Trace" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="" Height="" HiddenCaption="" VAlign="" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<div>
    <input type=button value='手动刷新' onclick='r(true);'> 
    <input type=button value='清除记录' onclick='c();'>
</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[function a(obj) {
    window.parent.frames[1].document.body.innerHTML = obj.getAttribute('o').replace("style='display:none'", "");

}]]></Top><Bottom><![CDATA[var time = 8000; //8s 
function c() {
    var t = $X('EWA_LF_@SYS_FRAME_UNID');
    while (t.rows.length > 1) {
        t.deleteRow(1);
    }
    EWA.F.FOS['@SYS_FRAME_UNID'].DoAction(this, 'clear', '', '');
}

function r(isRefresh) {

    if ($X('auto_refresh').checked || isRefresh) {
        EWA.F.FOS["@SYS_FRAME_UNID"].Goto(1);
    }

    if (!isRefresh) {
        window.setTimeout(r, time);
    }
}
document.body.onload = function() {
    EWA.CP = "@SYS_CONTEXTPATH";
    EWA.LANG = "@EWA_LANG";
    window.setTimeout(r, time);
}]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[
            
#col_true{
						 width:16px;
						  background-image : url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/key_p.gif') }
#col_false{ 
							width:16px;
							background-image : url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/column.gif')
}
#fk_false{
							display:none;
}
					
          ]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="0" KeyField="" PageSize=""/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="1" luDblClick="" luDblClickIdx="" luSearch="1" luSelect="S"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="310,*" FrameSubUrl="" FrameType="V"/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="clear"><CallSet><Set CallIsChk="" CallName="clear" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.debug.DebugRecords" ConData="" MethodData="" MethodName="getRecords" Name="LoadFields" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.debug.DebugRecords" ConData="" MethodData="" MethodName="clear" Name="clear" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="getName"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="radio"/></Tag><Name><Set Name="getName"/></Name><GroupIndex/><DescriptionSet><Set Info="选择" Lang="zhcn" Memo="a"/><Set Info="Select" Lang="enus" Memo="a"/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:27px"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="o" AttValue="@getAll"/></AttributeSet><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="a(this)"/></EventSet><IsMustInput/><DataItem><Set DataField="getName" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><List/></XItem><XItem Name="getDate"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getDate"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="时间" Lang="zhcn" Memo=""/><Set Info="Time" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:120px;"/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getDate" DataType="Date" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="getRunTime"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getRunTime"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="执行时间(ms)" Lang="zhcn" Memo=""/><Set Info="Run Time (ms)" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getRunTime" DataType="" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="getXmlName"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getXmlName"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="配置文件" Lang="zhcn" Memo=""/><Set Info="XmlName" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getXmlName" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="getItemName"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getItemName"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="配置项" Lang="zhcn" Memo=""/><Set Info="ItemName" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getItemName" DataType="" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="isError"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="isError"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="状态" Lang="zhcn" Memo=""/><Set Info="Error" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="isError" DataType="" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="getParameters"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="user"/></Tag><Name><Set Name="getParameters"/></Name><GroupIndex/><DescriptionSet><Set Info="参数" Lang="zhcn" Memo=""/><Set Info="Parameters" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:400px"/></ParentStyle><AttributeSet/><EventSet/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getParameters" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><UserSet><Set Lang="zhcn" User="&lt;div style='width:400px;overflow:hidden' title=&quot;@getParameters&quot;&gt;&lt;nobr&gt;@getParameters&lt;/nobr&gt;&lt;/div&gt;"/></UserSet></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2016-05-24 12:08:15" Name="CACHED.F.NM" UpdateDate="2016-05-24 12:16:58"><Page><FrameTag><Set FrameTag="Frame"/></FrameTag><Name><Set Name="CACHED.F.NM"/></Name><SkinName><Set IsXhtml="0" SkinName="Test1"/></SkinName><DataSource><Set DataSource="____ewa_cached_hsqldb__"/></DataSource><Cached><Set CachedSeconds="" CachedType=""/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="系统缓存" Lang="zhcn" Memo=""/><Set Info="System cache" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="" PageAttValue=""/></PageAttributeSet><GroupSet><Set GroupInfo="" GroupShow="" Lang=""/></GroupSet><Size><Set FrameCols="C3" HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="700"/></Size><AddHtml><Set><Top/><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[
//提交后台数据时执行的检查或附加数据处理
function do_pos_before_CACHED(){
	/*附加数据处理
	 EWA.F.FOS["@SYS_FRAME_UNID"].PostAddData={};
     EWA.F.FOS["@SYS_FRAME_UNID"].PostAddData.addP0='1';
     EWA.F.FOS["@SYS_FRAME_UNID"].PostAddData.addP1='xxxx';
    */
    // 附加检查合法性
    /*
    	if($('#aaa').val()==''){
    		return false; //检查不通过
    	}else{
    		return true; //检查通过
    	}
    */
    return true;
}
function init_CACHED_modify(){
	//提交后台数据时执行的检查或附加数据处理
	EWA.F.FOS["@SYS_FRAME_UNID"].DoPostBefore=do_pos_before_CACHED;

	var X = "@xmlname";
	var I = "@itemname";
	var P = $U();
	var u_root = EWA.CP + "/EWA_STYLE/cgi-bin/?xmlname=" + X + "&itemname=" + I;
	if(P!=null){
		u_root=u_root+"&"+P;
	}
	var u_root_ajax=u_root+"&EWA_AJAX=json&EWA_ACTION=xxxx";
	// 执行初始化后事件
}
addEvent(window,'load', init_CACHED_modify);
				]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[.EWA_TD_M{width:400px;}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson><Set><RedrawJson/></Set></RedrawJson><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow><Set HiddenFields="" Name="" ParaExp=""/></LogicShow></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M' or '@EWA_MTYPE'='C'"/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnPagePost"><CallSet><Set CallIsChk="" CallName="OnNew SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='N' or '@EWA_MTYPE'='C'"/><Set CallIsChk="" CallName="OnModify SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M'"/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct0"><CallSet><Set CallIsChk="" CallName="UAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct1"><CallSet><Set CallIsChk="" CallName="UAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct0"><CallSet><Set CallIsChk="" CallName="SAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct1"><CallSet><Set CallIsChk="" CallName="SAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="CheckError"><CallSet><Set CallIsChk="" CallName="CheckError SQL" CallType="SqlSet" Test=""/></CallSet></Set></ActionSet><SqlSet><Set Name="OnPageLoad SQL" SqlType="query" TransType="no"><Sql><![CDATA[SELECT * FROM CACHED WHERE KEY1 = @KEY1
	AND VAL_TYPE = @VAL_TYPE]]></Sql><CSSet/></Set><Set Name="OnNew SQL" SqlType="update" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="OnModify SQL" SqlType="update" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="UAct0 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- write your sql]]></Sql><CSSet/></Set><Set Name="UAct1 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- write your sql]]></Sql><CSSet/></Set><Set Name="SAct0 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- SELECT ...]]></Sql><CSSet/></Set><Set Name="SAct1 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- SELECT ...]]></Sql><CSSet/></Set><Set Name="CheckError SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- select 不能执行 as EWA_ERR_OUT FROM xxx where 1=2]]></Sql><CSSet/></Set></SqlSet><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M' or '@EWA_MTYPE'='C'"/></CallSet></Action><XItems><XItem Name="KEY1"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="KEY1"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="主键" Lang="zhcn" Memo=""/><Set Info="Primary key" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="KEY1" DataType="Int" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="VAL_TYPE"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="VAL_TYPE"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="类型" Lang="zhcn" Memo=""/><Set Info="Type" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="VAL_TYPE" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="VAL_BIN"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="VAL_BIN"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="二进制" Lang="zhcn" Memo=""/><Set Info="Binary" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch/><DataItem><Set DataField="VAL_BIN" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="VAL_TXT"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="textarea"/></Tag><Name><Set Name="VAL_TXT"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="文字" Lang="zhcn" Memo=""/><Set Info="Text" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><MaxMinLength><Set MaxLength="16777216" MinLength=""/></MaxMinLength><IsMustInput><Set IsMustInput="0"/></IsMustInput><DataItem><Set DataField="VAL_TXT" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem></XItem><XItem Name="LAST_TIME"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="LAST_TIME"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="创建时间" Lang="zhcn" Memo=""/><Set Info="Creation time" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="LAST_TIME" DataType="Int" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="butClose"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butClose"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="关闭" Lang="zhcn" Memo=""/><Set Info="Cancel" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame></XItem></XItems><Menus/><Charts/><PageInfos><PageInfo Name="msg0"><Name><Set Name="msg0"/></Name><DescriptionSet><Set Info="消息0" Lang="zhcn" Memo=""/><Set Info="Msg0" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg1"><Name><Set Name="msg1"/></Name><DescriptionSet><Set Info="消息1" Lang="zhcn" Memo=""/><Set Info="Msg1" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg2"><Name><Set Name="msg2"/></Name><DescriptionSet><Set Info="消息2" Lang="zhcn" Memo=""/><Set Info="Msg2" Lang="enus" Memo=""/></DescriptionSet></PageInfo></PageInfos><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2016-05-24 12:08:10" Name="CACHED.LF.M" UpdateDate="2016-05-24 12:16:58"><Page><FrameTag><Set FrameTag="ListFrame"/></FrameTag><Name><Set Name="CACHED.LF.M"/></Name><SkinName><Set IsXhtml="0" SkinName="Test1"/></SkinName><DataSource><Set DataSource="____ewa_cached_hsqldb__"/></DataSource><Cached><Set CachedSeconds="" CachedType=""/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="系统缓存管理" Lang="zhcn" Memo=""/><Set Info="System cache management" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="" PageAttValue=""/></PageAttributeSet><GroupSet/><Size><Set FrameCols="C3" HAlign="center" Height="" HiddenCaption="0" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[
				]]></Top><Bottom><![CDATA[
				]]></Bottom></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[//CACHED.LF.M
function addNew_CACHED(){
	var refParas = UrlParas();
	var paras = 'EWA_MTYPE=N';
	if(refParas !=''){
		paras += '&' + refParas;
	}
	EWA.UI.Dialog.OpenReloadClose('@SYS_FRAME_UNID',
		'@xmlName', 'CACHED.F.NM', false, paras);
}

// 执行刷新后事件
function init_CACHED_modify(){
	var ewa = EWA.F.FOS['@sys_frame_unid'];
	ewa.ReloadAfter = function(){
		// 执行刷新后事件
	};
	// ewa.Merge('fromId','toId'); //合并单元格
	// var exp="@@aa <h1>@@bb</h1> <div>@@cc</div>";
	// ewa.MergeExp(exp,'toId'); //合并多个单元格
}
addEvent(window,'load', init_CACHED_modify);
]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow><Set ChartsShow=""/></ChartsShow><RedrawJson/><BoxJson><Set><BoxJson/></Set></BoxJson><LeftJson><Set><LeftJson/></Set></LeftJson><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="1" KeyField="KEY1,VAL_TYPE" PageSize="10"/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="1" luDblClick="1" luDblClickIdx="0" luSearch="1" luSelect="S"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow><Set HiddenFields="" Name="" ParaExp=""/></LogicShow></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnFrameDelete"><CallSet><Set CallIsChk="" CallName="OnFrameDelete SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct0"><CallSet><Set CallIsChk="" CallName="SAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct1"><CallSet><Set CallIsChk="" CallName="SAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct2"><CallSet><Set CallIsChk="" CallName="SAct2 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct0"><CallSet><Set CallIsChk="" CallName="UAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct1"><CallSet><Set CallIsChk="" CallName="UAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct2"><CallSet><Set CallIsChk="" CallName="UAct2 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="CheckError"><CallSet><Set CallIsChk="" CallName="CheckError SQL" CallType="SqlSet" Test=""/></CallSet></Set></ActionSet><SqlSet><Set Name="OnPageLoad SQL" SqlType="query" TransType="no"><Sql><![CDATA[SELECT * FROM CACHED WHERE 1=1]]></Sql><CSSet/></Set><Set Name="OnFrameDelete SQL" SqlType="update" TransType="no"><Sql><![CDATA[delete from CACHED  WHERE KEY1 = @KEY1
	AND VAL_TYPE = @VAL_TYPE]]></Sql><CSSet/></Set><Set Name="SAct0 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="SAct1 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="SAct2 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="UAct0 SQL" SqlType="update" TransType="no"><Sql><![CDATA[delete from CACHED]]></Sql><CSSet/></Set><Set Name="UAct1 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="UAct2 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="CheckError SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- select 不能执行/javascript_func() as EWA_ERR_OUT FROM xxx where 1=2]]></Sql><CSSet/></Set></SqlSet><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test=""/></CallSet></Action><XItems><XItem Name="KEY1"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="KEY1"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="主键" Lang="zhcn" Memo=""/><Set Info="Primary key" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="1" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="KEY1" DataType="Int" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="VAL_TYPE"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="VAL_TYPE"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="类型" Lang="zhcn" Memo=""/><Set Info="Type" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="1" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="VAL_TYPE" DataType="String" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="LAST_TIME"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="LAST_TIME"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="创建时间" Lang="zhcn" Memo=""/><Set Info="Creation time" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="1" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="LAST_TIME" DataType="Int" DisableOnModify="" Format="" IsEncrypt="" SumBottom="" Valid=""/></DataItem><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="butModify"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butModify"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="查看" Lang="zhcn" Memo=""/><Set Info="Modify" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="CACHED.F.NM" CallMethod="OpenReloadClose" CallParas="EWA_MTYPE=M&amp;KEY1=@KEY1&amp;VAL_TYPE=@VAL_TYPE" CallXmlName="@xmlname"/></OpenFrame></XItem><XItem Name="butDelete"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butDelete"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="删除" Lang="zhcn" Memo=""/><Set Info="Delete" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><CallAction><Set Action="OnFrameDelete" AfterTip="" ConfirmInfo="DeleteBefore"/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame></XItem><XItem Name="butClear"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butClear"/></Name><GroupIndex/><DescriptionSet><Set Info="清除" Lang="zhcn" Memo=""/><Set Info="Clear" Lang="enus" Memo=""/></DescriptionSet><Style/><ParentStyle/><AttributeSet/><EventSet/><CallAction><Set Action="UAct0" AfterTip="" ConfirmInfo="DeleteBefore"/></CallAction><OpenFrame/></XItem></XItems><Menus/><Charts/><PageInfos><PageInfo Name="msg0"><Name><Set Name="msg0"/></Name><DescriptionSet><Set Info="消息0" Lang="zhcn" Memo=""/><Set Info="Msg0" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg1"><Name><Set Name="msg1"/></Name><DescriptionSet><Set Info="消息1" Lang="zhcn" Memo=""/><Set Info="Msg1" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg2"><Name><Set Name="msg2"/></Name><DescriptionSet><Set Info="消息2" Lang="zhcn" Memo=""/><Set Info="Msg2" Lang="enus" Memo=""/></DescriptionSet></PageInfo></PageInfos><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2009-01-07 17:01:20" Name="define_select_xitem" UpdateDate="2016-11-28 16:38:54"><Page><FrameTag><Set FrameTag="Frame"/></FrameTag><Name><Set Name="define_select_xitem"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached><Set CachedSeconds="862024" CachedType=""/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="选择连接" Lang="zhcn" Memo=""/><Set Info="links" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="400" HiddenCaption="1" VAlign="top" Width="700"/></Size><AddHtml><Set><Top><![CDATA[<script type='text/javascript'>//for tomcat 7.60+ error 400
    document.write("<scr" + "ipt src='../../EWA_DEFINE/cgi-bin/xml/?XMLNAME=" +
        "@xmlname".toURL() + "&ITEMNAME=@itemname&MODE=JS&MODE_NAME=_CFG_ITEM&TYPE=ALL'></scr" + "ipt>");
</script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_CONFIG.js"></script>
<table border=0>
    <tr>
        <td>
            <div style="width: 300px; height: 330px; float: left">
                <script>//for tomcat 7.60+ error 400
                    document.write("<iframe frameborder=0 width=100% height=100% src='./?xmlname=" +
                        "@xmlname".toURL() + "&itemname=cfgtree&showtype=selectitem&EWA_FRAMESET_NO=1'></iframe>");
                </script>
            </div>
        </td>
        <td>
            <div style="width: 400px; height: 330px; border-left: 1px solid #ccc;">
                <table width=100% cellpadding=4 cellspacing=1 bgcolor=#cccccc border=0>
                    <tr>
                        <td bgcolor='#EFEFEF' width=60>
                            描述
                        </td>
                        <td id=des bgcolor=white></td>
                    </tr>
                    <tr>
                        <td bgcolor='#EFEFEF'>
                            配置文件
                        </td>
                        <td id=xmlName bgcolor=white></td>
                    </tr>
                    <tr>
                        <td bgcolor='#EFEFEF'>
                            配置项目
                        </td>
                        <td id=itemName bgcolor=white></td>
                    </tr>

                    <tr>
                        <td bgcolor='#EFEFEF'>
                            SQL调用
                        </td>
                        <td id=sql bgcolor=white></td>
                    </tr>
                    <tr>
                        <td bgcolor='#EFEFEF'>
                            参数
                        </td>
                        <td id=para bgcolor=white></td>
                    </tr>
                    <tr>
                        <td bgcolor='#EFEFEF'>
                            配置条目
                        </td>
                        <td id=items bgcolor=white></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>
<div style='border-top: 1px solid #ccc; padding-top: 4px; width:100%;' align=right>
    <input id=v1 type=hidden>
    <input type=button value='确定' onclick='ok()'>
    <input type=button value='取消'>
</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[document.body.style.overflow='hidden';
function okEditOpenDialog(){
	var paras = info.Parameters;
    var s2="";
    if (paras != null) {
        for (var k = 0; k < paras.length; k++) {
            if (k > 0) {
                s2 += "&";
            }
            s2 +=  paras[k].replace("@", "") + "=" + paras[k];
        }
    }
    var s1="EWA.UI.Dialog.OpenReloadClose(\"@" + "SYS_FRAME_UNID\",\r\n\t\""
        + info.XmlName +"\",\r\n\t\"" + info.ItemName + "\", true, \r\n\t'"
        + s2 +"');";
    var win = _EWA_DialogWnd.GetReturnBack().CmdArgus[0];
    win.setText(s1);
    _EWA_DialogWnd.CloseWindow();
}
function okEdit(){
    var win=_EWA_DialogWnd.GetReturnBack().CmdArgus[0];
    var s1=win.getText() + createJsCall();
    win.setText(s1);
    _EWA_DialogWnd.CloseWindow();
}
function createJsCall() {
    var s1="/* " + info.Description + " */\r\n";
    var s1 = "\r\nfunction link(id){\r\n";
    s1 += "\tvar url= './?XMLNAME=" + info.XmlName;
    s1 += "&ITEMNAME=" + info.ItemName + "';\r\n";
    var paras = info.Parameters;
    if (paras != null) {
        for (var k = 0; k < paras.length; k++) {
            if (k > 0) {
                s1 += "\turl += '&" + paras[k].replace("@", "") + "=" + paras[k] + "';\r\n";
            } else {
                s1 += "\turl += '&" + paras[k].replace("@", "") + "='+id;\r\n";
            }
        }
    }
    s1 += "\twindow.parent.frames[1].location=url;\r\n";
    s1 += "}\r\n";
    return s1;
}]]></Top><Bottom><![CDATA[var user;
var info;
function loadInfo(xmlName, itemName) {
  var url = "../../EWA_DEFINE//cgi-bin/xml/?XMLNAME=" + xmlName.toURL() + '&ITEMNAME=' + itemName.toURL();
  var ajax = new EWA_AjaxClass();
  ajax.Get(url,
  function() {
    if (ajax.IsRunEnd()) {
      loadInfo1(ajax.GetRst(), xmlName, itemName);
    }

  })
}
function loadInfo1(xml, xmlName, itemName) {
  info = new Object();
  user = new EWAC_UserClass();
  user.LoadXmlString(xml);
  var pts = user.PageTables;
  var des = pts.Tables.GetItem('DescriptionSet').SearchValue("Lang=zhcn", "Info");

  $X('des').innerHTML = des;
  info.Description = des;
  var acts = user.ActionTables.Tables.GetItem('ActionSet');
  var nameIndex = acts.Columns.GetIndex('Type');
  var callSetIndex = acts.Columns.GetIndex('CallSet');
  for (var i = 0; i < acts.Rows.length; i++) {
    var type = acts.Rows[i].Fields[nameIndex];
    if (type == 'OnPageLoad') {
      var callSetTable = acts.Rows[i].Fields[callSetIndex];
      loadCallSet(callSetTable);
      break;
    }
  }
  $X('xmlName').innerHTML = xmlName;
  $X('itemName').innerHTML = itemName;
  info.XmlName = xmlName;
  info.ItemName = itemName;

  if ('@TYPE' == 'UserControl') {
    var select = document.createElement('select');
    select.options[i + 1] = new Option('', name);
    for (var i = 0; i < user.ItemsTablesSet.Count(); i++) {
      var name = user.ItemsTablesSet.GetItem(i).Name;
      var opt = select.options[i + 1] = new Option(name, name);

    }
    $X('items').innerHTML = "";
    $X('items').appendChild(select);
  }
}
function loadCallSet(callSetTable) {
  var typeIndex = callSetTable.Columns.GetIndex('CallType');
  var nameIndex = callSetTable.Columns.GetIndex('CallName');
  for (var i = 0; i < callSetTable.Rows.length; i++) {
    var row = callSetTable.Rows[i];
    if (row.Fields[typeIndex] == 'SqlSet') {
      loadSqlInfo(row.Fields[nameIndex]);
      break;
    }
  }
}
function loadSqlInfo(sqlName) {
  var ats = user.ActionTables.Tables.GetItem('SqlSet');
  var sqlIndex = ats.Columns.GetIndex('Sql');
  var nameIndex = ats.Columns.GetIndex('Name');
  for (var i = 0; i < ats.Rows.length; i++) {
    var row = ats.Rows[i];
    var sql = row.Fields[sqlIndex];
    var name = row.Fields[nameIndex];
    if (name == sqlName) {
      document.getElementById('sql').innerHTML = sql;
      var pp = /@\w*\b/ig;
      var paras = sql.match(pp);
      var s1 = "";
      info.Parameters = paras;
      if (paras != null) {
        for (var k = 0; k < paras.length; k++) {
          s1 += paras[k] + '<br>';
        }
      }
      document.getElementById('para').innerHTML = s1;
      return;
    }
  }
  document.getElementById('sql').innerHTML = "";
  document.getElementById('sql0').innerHTML = "";
  document.getElementById('para').innerHTML = "";
}
function ok_blur(obj) {
  if (obj.onblur != null) obj.onblur();
}
function ok() {
  if (info == null) {
    alert('请选择一个配置项目');
    return;
  }
  var type = '@TYPE';
  var indexes;
  if (type == 'OpenFrame') {
    var indexes = [1, 2, 3];
  }
  if (type == 'Frame') {
    var indexes = [0, 1, 2];
  }
  if (type == 'ShortName') {
    var indexes = [ - 1, 0, 1];
  }
  if (type == 'UserControl') {
    var indexes = [ 0, 1, 2, 3];
  }
  if (type == 'edit') {
    okEdit();
    return;
  }
  if (type == 'edit|opendialog') {
    okEditOpenDialog();
    return;
  }
  if (indexes == null) {
    alert('undefined type (' + type + ')');
    return;
  }
  EWA.OW.Load();

  var obj = EWA.OW.PWin.$X('@fromId');;
  var tr = obj.parentNode;
  while (tr.tagName != 'TR') {
    tr = tr.parentNode;
  }
  var m = tr.rowIndex + 1;
  var tb = tr.parentNode;

  tb.rows[m + indexes[0]].getElementsByTagName('input')[0].value = info.XmlName;
  ok_blur(tb.rows[m + indexes[0]].getElementsByTagName('input')[0]);
  tb.rows[m + indexes[1]].getElementsByTagName('input')[0].value = info.ItemName;
  ok_blur(tb.rows[m + indexes[1]].getElementsByTagName('input')[0]);

  var s1 = "";
  var paras = info.Parameters;
  if (paras != null) {
    if (type == 'Frame') {
      s1 = paras[paras.length - 1].replace('@', '');
    } else {
      for (var k = 0; k < paras.length; k++) {
        if (k > 0) {
          s1 += "&";
        }
        s1 += paras[k].replace('@', '') + '=' + paras[k];
      }
    }
  }
  tb.rows[m + indexes[2] * 1].getElementsByTagName('input')[0].value = s1;
  ok_blur(tb.rows[m + indexes[2] * 1].getElementsByTagName('input')[0]);
  if(type == 'UserControl'){
    s1=$('#items select').val();
    if(s1==''){
      alert('选择配置项');
      return;
    }
    tb.rows[m + indexes[3] * 1].getElementsByTagName('input')[0].value = s1;
    ok_blur(tb.rows[m + indexes[3] * 1].getElementsByTagName('input')[0]);
  }
  EWA.OW.Close();
}]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2016-05-16 10:05:57" Name="remote_sync_cfg" UpdateDate="2016-12-28 17:28:21"><Page><FrameTag><Set FrameTag="ListFrame"/></FrameTag><Name><Set Name="remote_sync_cfg"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="配置项列表" Lang="zhcn" Memo=""/><Set Info="Items list" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="" VAlign="" Width="1000"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="/EmpScriptV2//EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
    <h1>.</h1>
    <hr>
    <select style="width:300px" id='cfg' onchange=cfgChange(this)>
                <option value="">--选择过滤条件--</option>
            </select> <input value="START" type=button id='start' onclick='doStart(this)' />
    <input value="sync" type=button id='sync' onclick='doSync(this);' />
    <input value="syncNext" type=button id='syncNext' onclick='doSyncNext(this);' />
    <input type='checkbox' id='show_selected' onclick='showSelected()'><label for="show_selected">Selected</label>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[var remote_sync = "@EWA.CP/EWA_DEFINE/cgi-bin/remoteSync/index.jsp?cfg_key=@cfg_key";

function getCfgs() {
    var u = remote_sync + "&method=getCfgs";
    $J(u, function(o) {
        var ss = [];
        for (var n in o) {
            var d = o[n];
            if (d.id) {
                var value = n;
                var text = d.name + " [" + d.source + " -- " + d.target + "]";
                var opt = new Option(text, value);
                $X('cfg').options[$X('cfg').options.length] = opt;
            }
        }
        sort_filter();
        document.title = o.REMOTE_DES;
        $('h1').text(o.REMOTE_DES);
    });
}

function sort_filter() { //更改下拉框显示顺序
    var opts = $X('cfg').options;
    var map = {};
    var arr = [];
    for (var i = 1; i < opts.length; i++) {
        var opt = opts[i];
        var key = opt.text + "##" + opt.value;
        map[key] = opt;
        arr.push(key);
    }
    var arr1 = arr.sort();
    for (var i = 0; i < arr1.length; i++) {
        $X('cfg').appendChild(map[arr1[i]]);
    }
}
addEvent(window, 'load', getCfgs);]]></Top><Bottom><![CDATA[var inc = 0;

function sortRst(rsts) {
    var arr = [];
    for (var n in rsts) {
        arr.push(n);
    }
    var arr1 = arr.sort();
    var newRst = {};
    for (var i = 0; i < arr1.length; i++) {
        newRst[arr1[i]] = rsts[arr1[i]];
    }
    return newRst;
}

function doStart(obj) {
    if ($X('cfg').value == '') {
        alert('pls');
        return;
    }
    var u = remote_sync + "&method=start&id=" + $X('cfg').value;
    $('#EWA_LF_@sys_frame_unid tr:gt(0)').remove();
    $J(u, function(rsts) {
        var idx = 0;
        if (rsts.ERR) {
            alert(rsts.ERR);
            return;
        }
        rsts = sortRst(rsts);
        for (var n in rsts) {
            var tr = $X('EWA_LF_@sys_frame_unid').insertRow(-1);
            $(tr).attr('onmouseover','EWA.F.FOS["@sys_frame_unid"].MOver(this,event);').attr('onmousedown',
            'EWA.F.FOS["@sys_frame_unid"].MDown(this,event);');
            var tdchk = tr.insertCell(-1);
            var td = tr.insertCell(-1);
            var td0 = tr.insertCell(-1);
            var tdLocalLen = tr.insertCell(-1);
            tdLocalLen.innerHTML = rsts[n].LEN0;
            var tdRemovteLen = tr.insertCell(-1);
            tdRemovteLen.innerHTML = rsts[n].LEN;
            var tdLocalDate = tr.insertCell(-1);
            tdLocalDate.innerHTML = "<div >" + (rsts[n].DATE0 == "0" ? "--" : show_date(new Date(rsts[n].DATE0 * 1))) + "</div>";
            var tdRemoteDate = tr.insertCell(-1);
            tdRemoteDate.innerHTML = "<div style='cursor:pointer' onclick='request_remove_file(this)'>" + (rsts[n].DATE == "0" ? "--" : show_date(new Date(rsts[n].DATE * 1))) + "</div>";
            var td1 = tr.insertCell(-1);
            td0.innerHTML = n;
            td1.innerHTML = 'waiting....';
            tr.id = n;
            idx++;
            td.innerHTML = idx;
            tdchk.innerHTML = "<input type=checkbox>";

            if (rsts[n].DATE0 < rsts[n].DATE) { //远程文件新
                $(tr).find('td').css('color', 'red');
            }
            
            $(tr).find('td').addClass('EWA_TD_M');

        }
        inc = 0;
    });
}

function show_date(d1) {
    return d1.getFullYear() + "-" + (d1.getMonth() + 1) + "-" + d1.getDate() + " " + d1.getHours() + ":" + d1.getMinutes() + ":" + d1.getSeconds();
}

function doSync() {
    var id = $('#cfg').val();
    $('#cfg')[0].disabled = true;
    inc++;
    if (inc >= $X('EWA_LF_@sys_frame_unid').rows.length) {
        $Tip('ok!');
        $('#cfg')[0].disabled = false;
        return;
    }
    var tr = $X('EWA_LF_@sys_frame_unid').rows[inc];
    if (!$(tr).find('input')[0].checked) {

        tr.cells[tr.cells.length - 1].innerHTML = "Skip";
        doSync();
        return;
    }
    $(tr).find('td').css('background-color', 'lightblue');
    var u = remote_sync+"&method=start_send&name=" + tr.id.toURL() + "&id=" + id;
    var ajax = new EWA_AjaxClass();
    ajax.Get(u, function() {
        if (!ajax.IsRunEnd()) {
            return;
        }
        var aaa = ajax.GetRst();
        var rst = {};
        try {
            eval('rst=' + aaa);
            if (rst.RST) {
                tr.cells[tr.cells.length - 1].innerHTML = "OK";
                $(tr).find('td').css('background-color', 'green');
            } else {
                tr.cells[tr.cells.length - 1].innerHTML = RST.ERR;
                $(tr).find('td').css('background-color', 'red');
                tr.focus();
            }
        } catch (e) {
            tr.cells[tr.cells.length - 1].innerHTML = e;
            $(tr).find('td').css('background-color', 'red');
        }

        doSync();
    });
}

function doSyncNext() {
    var id = $('#cfg').val();
    $('#cfg')[0].disabled = true;
    var trj;
    $("#EWA_LF_@sys_frame_unid input[type='checkbox']:checked")
        .each(function() {
            var tr0 = $(this).parent().parent();
            if ($(tr0).children().last().text().indexOf('wait') >= 0) {
                trj = tr0;
                return;
            }
        });
    if (!trj) {
        alert("没有了");
        return;
    }
    var tr = trj[0];
    $(tr).find('td').css('background-color', 'lightblue');
    $(tr).children().last().text("running");
    var u = "remote_sync.jsp&method=start_send&name=" + tr.id.toURL() + "&id=" + id;
    var ajax = new EWA_AjaxClass();
    ajax.Get(u, function() {
        if (!ajax.IsRunEnd()) {
            return;
        }
        var aaa = ajax.GetRst();
        var rst = {};
        try {
            eval('rst=' + aaa);
            if (rst.RST) {
                tr.cells[tr.cells.length - 1].innerHTML = "OK";
                $(tr).find('td').css('background-color', 'green');
            } else {
                tr.cells[tr.cells.length - 1].innerHTML = RST.ERR;
                $(tr).find('td').css('background-color', 'red');
                tr.focus();
            }
        } catch (e) {
            tr.cells[tr.cells.length - 1].innerHTML = e;
            $(tr).find('td').css('background-color', 'red');
        }

        $('#cfg')[0].disabled = false;
    });
}

function showSelected() {
    if ($X("show_selected").checked) {
        $("#EWA_LF_@sys_frame_unid input[type='checkbox']")
            .filter(":not(:checked)")
            .each(function() {
                $(this).parent().parent().hide();
            });
    } else {
        $("#EWA_LF_@sys_frame_unid tr").show();
    }
}
var chked = true;

function CheckAll() {
    chked = !chked;
    $('#EWA_LF_@sys_frame_unid input').each(function() {
        this.checked = chked;
    });
}

function cfgChange(obj) {

}

function request_remove_file(obj) {
    var tr = obj.parentNode.parentNode;
    var id = $('#cfg').val();
    var u = remote_sync+"&method=local_recv_remote_file&name=" + tr.id.toURL() + "&id=" + id;
    if (!window.confirm("你确认获取远程文件么?")) {
        return;
    }
    $J2(u, function(aaa) {
        var rst = {};
        try {
            eval('rst=' + aaa);
            if (rst.RST) {
                tr.cells[tr.cells.length - 1].innerHTML = "OK-获取";
                $(tr).find('td').css('background-color', 'green');
            } else {
                tr.cells[tr.cells.length - 1].innerHTML = RST.ERR;
                $(tr).find('td').css('background-color', 'red');
                tr.focus();
            }
        } catch (e) {
            tr.cells[tr.cells.length - 1].innerHTML = "!EEE!";
            $(tr).find('td').css('background-color', 'red');
        }
    });
}

]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#col_true {
    width: 16px;
    background-image: url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/key_p.gif')
}

#col_false {
    width: 16px;
    background-image: url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/column.gif')
}

#fk_false {
    display: none;
}

h1 {
    font-size: 16px;
    line-height: 34px;
    margin: 0;
    text-align: left
}

hr {
    border-top: 0;
    border-color: #555;
    border-left: 0;
    border-right: 0;
    border-bottom-width: 1px;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="" KeyField="getname" PageSize="" Recycle="" StatusField=""/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="0" luDblClick="" luDblClickIdx="" luSearch="" luSelect="M"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="no" LogMsg="" Type="getCfgs"><CallSet><Set CallIsChk="" CallName="loadCfgs" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.SyncRemote" ConData="" MethodData="" MethodName="loadCfgs" Name="loadCfgs" XmlTag=""/><Set ClassName="" ConData="" MethodData="" MethodName="" Name="" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="loadCfgs" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="chk"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="checkboxgrid"/></Tag><Name><Set Name="chk"/></Name><DescriptionSet><Set Info="选择" Lang="zhcn" Memo="a"/><Set Info="Select" Lang="enus" Memo="a"/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:27px"/></ParentStyle><AttributeSet/><EventSet/><DataItem><Set DataField="getPath" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem></XItem><XItem Name="IDX"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="IDX"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="IDX" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="IDX" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="getName"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getName"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="文件" Lang="zhcn" Memo=""/><Set Info="File" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getName" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="length"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="length"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="本地长度" Lang="zhcn" Memo=""/><Set Info="Length" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getlength" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="remote_length"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="remote_length"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="远程长度" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="remote_length" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="getdate"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getdate"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="本地日期" Lang="zhcn" Memo=""/><Set Info="Modify Time" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="getdate" DataType="" DisableOnModify="" Format="DateTime" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="remote_date"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="remote_date"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="远程日期" Lang="zhcn" Memo=""/><Set Info="Synchronize files" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="syncFiels()"/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="remote_date" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef/></XItem><XItem Name="status"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="status"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="状态" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="status" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate CreateDate="2016-12-28 16:03:10" Name="remote_sync" UpdateDate="2016-12-28 17:58:42"><Page><FrameTag><Set FrameTag="ListFrame"/></FrameTag><Name><Set Name="remote_sync"/></Name><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="选择同步项目" Lang="zhcn" Memo=""/><Set Info="Select synchronization item" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="" VAlign="middle" Width="700"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="/EmpScriptV2//EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[function listCfgs() {
    var u = "@EWA.CP/EWA_DEFINE/cgi-bin/remoteSync/index.jsp?method=listCfgs";
    $J1(u, function(rst) {
        for (var n in rst) {
            showCfg(rst[n]);
        }
    });
}

function showCfg(o) {
    var div = $('<div class="cfg-box"><a target=_blank><h1></h1><p></p></a></div>');
    div.find('h1').html(o.des);
    div.find('p').html(o.url);
    var href1 = "@EWA.CPF?xmlname=" + "@xmlname".toURL() + "&itemname=remote_sync_cfg&cfg_key=" + o.cfg_key.toURL();
    $('.EWA_TABLE tr').append(div);
    div.find('a')[0].href = href1;
}
addEvent(window, 'load', listCfgs);]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[.cfg-box {
    background: #fff;
    padding: 10px 20px;
    border: 1px solid #ccc;
     margin-top: 20px;
}

.cfg-box:first-child {
   
}
 .EWA_TABLE{
     background: transparent !important;
 }]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="" KeyField="getname" PageSize="" Recycle="" StatusField=""/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="0" luDblClick="" luDblClickIdx="" luSearch="" luSelect="M"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="no" LogMsg="" Type="getCfgs"><CallSet><Set CallIsChk="" CallName="loadCfgs" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.SyncRemote" ConData="" MethodData="" MethodName="loadCfgs" Name="loadCfgs" XmlTag=""/><Set ClassName="" ConData="" MethodData="" MethodName="" Name="" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="loadCfgs" CallType="ClassSet" Test=""/></CallSet></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2018-07-12 16:46:49" Name="FRAME_DEBUG.F.NM" UpdateDate="2018-07-12 18:32:46"><Page><Name><Set Name="FRAME_DEBUG.F.NM"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="0" SkinName="Test1"/></SkinName><DataSource><Set DataSource="____ewa_cached_hsqldb__"/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType=""/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="Debug" Lang="zhcn" Memo=""/><Set Info="Debug" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="" PageAttValue=""/></PageAttributeSet><GroupSet><Set GroupInfo="" GroupShow="" Lang=""/></GroupSet><Size><Set FrameCols="C1" HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="1200"/></Size><AddHtml><Set><Top/><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[ ]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[pre {
    margin:0;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson><Set><RedrawJson/></Set></RedrawJson><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow><Set HiddenFields="" Name="" ParaExp=""/></LogicShow></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M' or '@EWA_MTYPE'='C'"/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnPagePost"><CallSet><Set CallIsChk="" CallName="OnNew SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='N' or '@EWA_MTYPE'='C'"/><Set CallIsChk="" CallName="OnModify SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M'"/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct0"><CallSet><Set CallIsChk="" CallName="UAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct1"><CallSet><Set CallIsChk="" CallName="UAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct0"><CallSet><Set CallIsChk="" CallName="SAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct1"><CallSet><Set CallIsChk="" CallName="SAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="CheckError"><CallSet><Set CallIsChk="" CallName="CheckError SQL" CallType="SqlSet" Test=""/></CallSet></Set></ActionSet><SqlSet><Set Name="OnPageLoad SQL" SqlType="query" TransType="no"><Sql><![CDATA[SELECT * FROM FRAME_DEBUG WHERE D_ID = @D_ID]]></Sql><CSSet/></Set><Set Name="OnNew SQL" SqlType="update" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="OnModify SQL" SqlType="update" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="UAct0 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- write your sql]]></Sql><CSSet/></Set><Set Name="UAct1 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- write your sql]]></Sql><CSSet/></Set><Set Name="SAct0 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- SELECT ...]]></Sql><CSSet/></Set><Set Name="SAct1 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- SELECT ...]]></Sql><CSSet/></Set><Set Name="CheckError SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- select 不能执行 as EWA_ERR_OUT FROM xxx where 1=2]]></Sql><CSSet/></Set></SqlSet><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M' or '@EWA_MTYPE'='C'"/></CallSet></Action><XItems><XItem Name="D_XMLNAME"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_XMLNAME"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="XMLNAME" Lang="zhcn" Memo=""/><Set Info="XMLName" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="D_XMLNAME" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef/></XItem><XItem Name="D_ITEMNAME"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_ITEMNAME"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="ITEMNAME" Lang="zhcn" Memo=""/><Set Info="ItemName" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch/><DataItem><Set DataField="D_ITEMNAME" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef/></XItem><XItem Name="D_HTML"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_HTML"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="D_HTML" Lang="zhcn" Memo=""/><Set Info="D_html" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style="HEIGHT:300px;overflow:auto;display:block;width:1200px;"/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml="1"/></IsHtml><OrderSearch/><DataItem><Set DataField="D_HTML" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef/></XItem><XItem Name="butClose"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butClose"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="关闭" Lang="zhcn" Memo=""/><Set Info="Cancel" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame></XItem></XItems><Menus/><Charts/><PageInfos><PageInfo Name="msg0"><Name><Set Name="msg0"/></Name><DescriptionSet><Set Info="消息0" Lang="zhcn" Memo=""/><Set Info="Msg0" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg1"><Name><Set Name="msg1"/></Name><DescriptionSet><Set Info="消息1" Lang="zhcn" Memo=""/><Set Info="Msg1" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg2"><Name><Set Name="msg2"/></Name><DescriptionSet><Set Info="消息2" Lang="zhcn" Memo=""/><Set Info="Msg2" Lang="enus" Memo=""/></DescriptionSet></PageInfo></PageInfos><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2018-07-12 16:46:43" Name="FRAME_DEBUG.LF.M" UpdateDate="2018-07-12 18:32:58"><Page><Name><Set Name="FRAME_DEBUG.LF.M"/></Name><FrameTag><Set FrameTag="ListFrame"/></FrameTag><SkinName><Set IsXhtml="0" SkinName="Test1"/></SkinName><DataSource><Set DataSource="____ewa_cached_hsqldb__"/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType=""/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="Debug" Lang="zhcn" Memo=""/><Set Info="Debug" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="" PageAttValue=""/></PageAttributeSet><GroupSet/><Size><Set FrameCols="C2" HAlign="center" Height="" HiddenCaption="0" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[
				]]></Top><Bottom><![CDATA[
				]]></Bottom></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[// 执行刷新后事件
function init_FRAME_DEBUG_modify(){
	var ewa = EWA.F.FOS['@sys_frame_unid'];
	ewa.ReloadAfter = init_FRAME_DEBUG_modify;
	
	// ewa.Merge('fromId', 'toId'); //合并单元格
	// var exp="@@aa <h1>@@bb</h1> <div>@@cc</div>";
	// ewa.MergeExp('toId', exp); //合并多个单元格
}
addEvent(window,'load', init_FRAME_DEBUG_modify);
]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow><Set ChartsShow=""/></ChartsShow><RedrawJson/><BoxJson><Set><BoxJson/></Set></BoxJson><LeftJson><Set><LeftJson/></Set></LeftJson><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="1" KeyField="D_ID" PageSize="10" Recycle="1" StatusField="[object Object]"/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="1" luDblClick="1" luDblClickIdx="0" luSearch="1" luSelect="S"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow><Set HiddenFields="" Name="" ParaExp=""/></LogicShow></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnFrameDelete"><CallSet><Set CallIsChk="" CallName="OnFrameDelete SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnFrameRestore"><CallSet><Set CallIsChk="" CallName="OnFrameRestore SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct0"><CallSet><Set CallIsChk="" CallName="SAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct1"><CallSet><Set CallIsChk="" CallName="SAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct2"><CallSet><Set CallIsChk="" CallName="SAct2 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct0"><CallSet><Set CallIsChk="" CallName="UAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct1"><CallSet><Set CallIsChk="" CallName="UAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct2"><CallSet><Set CallIsChk="" CallName="UAct2 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="CheckError"><CallSet><Set CallIsChk="" CallName="CheckError SQL" CallType="SqlSet" Test=""/></CallSet></Set></ActionSet><SqlSet><Set Name="OnPageLoad SQL" SqlType="query" TransType="no"><Sql><![CDATA[SELECT D_ID, D_XMLNAME, D_ITEMNAME, D_DATE, D_IP
	, D_CGI, D_REFERER, D_USER_AGENT
FROM FRAME_DEBUG
WHERE 1 = 1
ORDER BY d_id DESC]]></Sql><CSSet/></Set><Set Name="OnFrameDelete SQL" SqlType="update" TransType="no"><Sql><![CDATA[delete from  FRAME_DEBUG  WHERE D_ID = @D_ID]]></Sql><CSSet/></Set><Set Name="OnFrameRestore SQL" SqlType="update" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="SAct0 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="SAct1 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="SAct2 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="UAct0 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="UAct1 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="UAct2 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- enter your sql]]></Sql><CSSet/></Set><Set Name="CheckError SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- select 不能执行/javascript_func() as EWA_ERR_OUT FROM xxx where 1=2]]></Sql><CSSet/></Set></SqlSet><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test=""/></CallSet></Action><XItems><XItem Name="D_ID"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_ID"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="D_ID" Lang="zhcn" Memo=""/><Set Info="d_id" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="1" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="D_ID" DataType="Int" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="D_XMLNAME"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="linkButton"/></Tag><Name><Set Name="D_XMLNAME"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="XMLNAME" Lang="zhcn" Memo=""/><Set Info="XMLName" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="1" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType="text"/></OrderSearch><DataItem><Set DataField="D_XMLNAME" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef><LinkButtonParas><Set lkbButtonId="butModify"/></LinkButtonParas></XItem><XItem Name="D_ITEMNAME"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_ITEMNAME"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="ITEMNAME" Lang="zhcn" Memo=""/><Set Info="" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="1" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType="text"/></OrderSearch><DataItem><Set DataField="D_ITEMNAME" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="D_DATE"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_DATE"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="Date" Lang="zhcn" Memo=""/><Set Info="D_date" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:120px; text-align:center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><DataItem><Set DataField="D_DATE" DataType="Date" DisableOnModify="" Format="DateShortTime" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="D_IP"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_IP"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="Ip" Lang="zhcn" Memo=""/><Set Info="D_ip" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="1" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType="text"/></OrderSearch><DataItem><Set DataField="D_IP" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="D_CGI"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_CGI"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="CGI" Lang="zhcn" Memo=""/><Set Info="d_cgi" Lang="enus" Memo=""/></DescriptionSet><XStyle><Set XStyleAlign="" XStyleBold="" XStyleColor="" XStyleCursor="" XStyleFixed="" XStyleNoWrap="" XStyleVAlign="" XStyleWidth=""/></XStyle><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml><Set IsHtml=""/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType="text"/></OrderSearch><DataItem><Set DataField="D_CGI" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc><Set EncShowUrl="" EncType=""/></DispEnc><DataRef><Set RefKey="" RefShow="" RefShowStyle="" RefShowType="" RefSql=""/></DataRef></XItem><XItem Name="D_REFERER"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_REFERER"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="Referer" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType="text"/></OrderSearch><DataItem><Set DataField="D_REFERER" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/></XItem><XItem Name="D_USER_AGENT"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="D_USER_AGENT"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="Agent" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType="text"/></OrderSearch><DataItem><Set DataField="D_USER_AGENT" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/></XItem><XItem Name="butModify"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butModify"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="查看" Lang="zhcn" Memo=""/><Set Info="View" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set CallItemName="FRAME_DEBUG.F.NM" CallMethod="OpenReloadClose" CallParas="EWA_MTYPE=M&amp;D_ID=@D_ID" CallXmlName="@xmlname"/></OpenFrame></XItem><XItem Name="butDelete"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butDelete"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><DescriptionSet><Set Info="删除" Lang="zhcn" Memo=""/><Set Info="Delete" Lang="enus" Memo=""/></DescriptionSet><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><CallAction><Set Action="OnFrameDelete" AfterTip="" ConfirmInfo="DeleteBefore"/></CallAction><OpenFrame><Set CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame></XItem></XItems><Menus/><Charts/><PageInfos><PageInfo Name="msg0"><Name><Set Name="msg0"/></Name><DescriptionSet><Set Info="消息0" Lang="zhcn" Memo=""/><Set Info="Msg0" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg1"><Name><Set Name="msg1"/></Name><DescriptionSet><Set Info="消息1" Lang="zhcn" Memo=""/><Set Info="Msg1" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg2"><Name><Set Name="msg2"/></Name><DescriptionSet><Set Info="消息2" Lang="zhcn" Memo=""/><Set Info="Msg2" Lang="enus" Memo=""/></DescriptionSet></PageInfo></PageInfos><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2014-12-03 21:08:13" Name="define_box" UpdateDate="2021-03-14 16:54:27"><Page><Name><Set Name="define_box"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="862024" CachedType="all"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="tabls" Lang="zhcn" Memo=""/><Set Info="tabls" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="@rv_ewa_style_path/third-party/cP_v0.91/colorPicker.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/third-party/js-beautify/v1.13.0/lib/beautify.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<div class='split-para'>
    <table id='paras' width=100% cellpadding=0 cellspacing=1>
        <tr>
            <td width=100>容器编号(ID)</td>
            <td><input type=text onblur='create_code()' id="PARENT_ID" class="EWA_INPUT"></td>
        </tr>
        <tr>
            <td>配置文件</td>
            <td><input type=text onclick="$X('set_x').click()" onblur='create_code()' readonly id="XMLNAME" class="EWA_INPUT">
            </td>
        </tr>
        <tr>
            <td>配置项</td>
            <td><input type=text onclick="$X('set_x').click()" onblur='create_code()' readonly id="ITEMNAME" class="EWA_INPUT">
            </td>
        </tr>
        <tr>
            <td>默认图标</td>
            <td><input type=text onblur='create_code()' id="ICON" class="EWA_INPUT two"><input type=text onblur='create_code()' id="ICON_COLOR" class="color" onclick='colorPicker1(event); '></td>
        </tr>
        <tr>
            <td>标题</td>
            <td><input type=text onblur='create_code()' id="TITLE" class="EWA_INPUT two"><input type=text onblur='create_code()' id="title_color" class="color" onclick='colorPicker1(event); '></td>
        </tr>
        <tr>
            <td>标题左图</td>
            <td><textarea readonly onclick='show_ide(this)' onblur='create_code()' id="img" class="EWA_INPUT"></textarea></td>
        </tr>
        <tr>
            <td>标题左图点击事件</td>
            <td><textarea readonly onclick='show_ide(this)' onblur='create_code()' id="img_click" class="EWA_INPUT"></textarea></td>
        </tr>
        <tr>
            <td>自动获取焦点</td>
            <td><select onchange='create_code()' id="AUTOFOCUS">
                    <option value='false'>false</option>
                    <option value='true'>true</option>
                </select></td>
        </tr>
        <tr>
            <td>首图HTML</td>
            <td><textarea readonly onclick='show_ide(this,"html")' onblur='create_code()' id="first" class="EWA_INPUT"></textarea></td>
        </tr>
        <tr>
            <td>图标检查脚本</td>
            <td><textarea readonly onclick='show_ide(this)' onblur='create_code()' id="chk" class="EWA_INPUT"></textarea></td>
        </tr>
        <tr>
            <td>明细列表</td>
            <td align=center>
                <table width=100% id='txt' cellspaing=1 cellpadding=1>
                    <tr>
                        <th width=80>标题</th>
                        <th>内容信息</th>
                        <th>删</th>
                        <th>上</th>
                        <th>下</th>
                    </tr>
                    <tr tag='hide' style='display: none'>
                        <td width=80><input type=text onblur='create_code(this)' class="EWA_INPUT fk1" aa=2></td>
                        <td><input type=text onblur='create_code(this)' class="EWA_INPUT fk1" aa=2></td>

                        <td><a href='javascript:void(0)' onclick='delete_txt_row(this)'>删</a></td>
                        <td><a href='javascript:void(0)' onclick='move_up_dow(this,-1);'>上</a></td>
                        <td><a href='javascript:void(0)' onclick='move_up_dow(this,1);'>下</a></td>
                    </tr>
                </table> <input type=button value='添加一行' onclick='add_txt_row()' style='margin-top: 4px' />
            </td>
        </tr>
        <tr>
            <td>图标列表</td>
            <td align=center>
                <table width=100% id='chk_icons' cellspaing=1 cellpadding=1>
                    <tr>
                        <th width=50>名称</th>
                        <th>图标</th>
                        <th>颜色</th>
                        <th>删</th>
                    </tr>
                    <tr style='display: none'>
                        <td><input type=text style='width: 46px' onblur='create_code()' class="EWA_INPUT fk"></td>
                        <td><input type=text onblur='create_code()' class="EWA_INPUT fk" aa=1 readonly onclick='show_icons(this)'>
                        </td>
                        <td><input type=text onblur='create_code()' class="color fk" aa=1 readonly onclick='colorPicker1(event);'></td>
                        <td><a href='javascript:void(0)' onclick='$(this).parent().parent().remove();create_code();'>删</a></td>
                    </tr>
                </table> <input type=button value='添加一行' onclick='add_icons_row()' style='margin-top: 4px' />
            </td>
        </tr>
        <tr>
            <td>最后执行</td>
            <td><textarea readonly onclick='show_ide(this)' onblur='create_code()' id="callback" class="EWA_INPUT"></textarea></td>
        </tr>
        <tr>
            <td>尺寸(宽x高)</td>
            <td><input type=text style='width: 40%' id="page_width" onblur='create_code()' class="EWA_INPUT">x<input type=text onblur='create_code()' id="page_height" class="EWA_INPUT" style='width: 40%'></td>
        </tr>
        <tr>
            <td>圆角-背景色</td>
            <td><input type=text id="page_radius" onblur='create_code()' class="EWA_INPUT two"> <input type=text onblur='create_code()' id="page_color" class="color" onclick='colorPicker1(event); '></td>
        </tr>
    </table>
</div>
<div class='split-box'>
    <table class="box" style='position:' cellspacing="0" cellpadding="0" onselectstart="return false;" id="box1">
        <tr>
            <td align=center>第一个框架</td>
        </tr>
    </table>

    <table class="box" style='position:' cellspacing="0" cellpadding="0" onselectstart="return false;" id="box">
        <tr>
            <td valign="top" json="">
                <div class="status" onclick="show_icons(this)">
                    <li id='box_icon' class="fa fa-bank"></li>
                    <div class="box_menus" onselectstart="return false;" style="display: none;">
                        <b onclick="box_design_class.enq_op_main_close_menu(event,this)" class="fa fa-power-off close"></b>
                    </div>
                </div>
                <div class="box_img">
                    <table cellpadding="0" cellspacing="0" class="imgtb">
                        <tr>
                            <td align="center"><img src="@rv_ewa_style_path/EWA_STYLE/images/plus50.png" border="0" style="cursor: pointer;"></td>
                        </tr>
                    </table>
                </div>
                <div class="box_title_img">
                    <select style='width: 90%' id='PARAMS' onchange='$("#TITLE").val("@"+this.value);create_code();'></select>
                </div>
                <table onselectstart="return true" id='box_txt' class="box_txt" cellspacing="0" cellpadding="0">
                    <tr>
                        <td class="box_subject">明细</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

    <div id='ide'>
        <b class='fa fa-power-off' onclick='close_ide()'></b>
        <iframe frameborder=0 id="ide_frame" src='@rv_ewa_style_path/EWA_DEFINE/js/CodeMirror/index.html'></iframe>
        <div align=right>
            <input type=button value='确定' onclick='close_ide()'>&nbsp; <input type=button value='首图默认' a='html' onclick='add_first()'> <input type=button value='检查图标' a='jscript' onclick='add_js_chk()'>
            <input type=button value='左图文件显示' a='jscript' onclick='add_js_chk(tmp_js.img)'> <input type=button value='左图点击事件' a='jscript' onclick='add_js_chk(tmp_js.img_click)'>
        </div>
    </div>
    <div id='ide_cover' style=''></div>
</div>
<div class='split-code'>
    <iframe src='@rv_ewa_style_path/EWA_DEFINE/js/CodeMirror/index.html' style='width: 100%; height: 100%;' id=code></iframe>
</div>

<div id=fas></div>
<div style='display: none'>
    <table>
        <tr>
            <td><input id='set_x' type=button value='设定JSON' onclick='open_frame(this)'></td>
        </tr>
        <tr style='display: none'>
            <td><input type=text id="X"></td>
        </tr>
        <tr style='display: none'>
            <td><input type=text id="I"></td>
        </tr>
        <tr style='display: none'>
            <td><input type=text id="P"></td>
        </tr>
    </table>

</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[var box_design_class;
window.__TYPE__ = 'jscript';
g_box_data = {};
function init() {
	$('body').css('margin', 0).css('overflow', 'hidden');
	box_design_class = new EWA_UI_BoxClass();
	box_design_class.add_box_style();
	var u = "@rv_ewa_style_path/third-party/font-awesome/font-awesome-4.7.0/css/font-awesome.min.css";
	$J2(u, init_fa);
	$('input[readonly],textarea[readonly]').css('background-color',
			'lightyellow').css('overflow', 'hidden');
	$('input,textarea').each(function() {
		$(this).attr('placeholder', this.id);
	});
	init_from_code();
}
function init_from_code() {
	var u1 = new EWA_UrlClass();
	u1.SetUrl(location.href);
	var d_x = u1.GetParameter("D_XMLNAME").unURL().unURL();
	var d_i = u1.GetParameter("D_ITEMNAME").unURL().unURL();
	g_d_x = d_x;
	g_d_i = d_i;
	var json = window.parent.$X('PAGE$BoxJson$BoxJson') ? window.parent
			.$X('PAGE$BoxJson$BoxJson').title : "";
// 	if (json == null || json.trim() == '') {
// 		json = window.localStorage['EWA_BOX_CODE/' + g_d_x + '/' + g_d_i];
// 	}
	if (json == null || json == '') {
		$('#XMLNAME').val(d_x.unURL());
		$('#ITEMNAME').val(d_i.unURL());
		load_params();
		return;
	}

	window.frames[1].editor.setValue(formatCodeHtml(json));
	eval('g_box_data=' + json);

	for ( var n in g_box_data) {
		var v = g_box_data[n];
		if (v instanceof Function) {
			v = formatCodeHtml(v.toString());
		}
		if (n == 'chk_icons') {
			var inc = 0;
			for ( var m in v) {
				var cr = add_icons_row();
				cr.getElementsByTagName('input')[0].value = m;
				cr.getElementsByTagName('input')[1].value = v[m].icon;
				cr.getElementsByTagName('input')[2].value = v[m].color;
				cr.getElementsByTagName('input')[2].style.backgroundColor=v[m].color;
				inc++;
			}
			continue;
		} else if (n == 'txt') {
			var inc = 0;
			for ( var m in v) {
				var cr = add_txt_row();
				cr.getElementsByTagName('input')[0].value = v[m].n;
				cr.id = 'TR_' + v[m].n;
				cr.getElementsByTagName('input')[1].value = v[m].t;
				inc++;
			}
			continue;
		}
		$('#' + n).val(v.toString());
		$('#' + n.toUpperCase()).val(v.toString());
		if(n.indexOf("_color")>0){
			$('#' + n).css("background-color",v);
			$('#' + n.toUpperCase()).css("background-color",v);
		}
		change_style(n, v);
	}
	load_params();
}
function init_fa(s) {
	var s1 = s.match(/\.fa\-[^{]+/ig);
	var ss = [];
	for ( var n in s1) {
		var fa = s1[n];
		if (fa.indexOf(':') < 0 || fa.indexOf('90') > 0) {
			continue;
		}
		var fa = fa.replace(":before", "").replace(".", "").split(',')[0];
		var s2 = "<i onclick='choose_fa(this)' class='fa " + fa + "' title='"
				+ fa + "'></i>";
		ss.push(s2);
	}
	$('#fas').html(ss.join(''));
}

function open_frame(obj) {
	if (obj.id == '') {
		obj.id = '_WWW_' + Math.random();
	}
	var id = obj.id;
	var u = EWA.CP
			+ '/EWA_STYLE/cgi-bin/?XMLNAME=|ewa|ewa.xml&ITEMNAME=define_select_xitem&TYPE=Frame&fromId='
			+ id;
	EWA.UI.Dialog.OpenWindow(u, 'selectxitem', 624, 400);
	check_frame_set();
}

function check_frame_set() {
	if ($X('X').value == '') {
		setTimeout(check_frame_set, 100);
		return;
	}

	var x = $X('X').value;
	var i = $X('I').value;

	$('#XMLNAME').val(x);
	$('#ITEMNAME').val(i);
	create_code();
	load_params();
}
function load_params() {
	var x = $X('XMLNAME').value;
	var i = $X('ITEMNAME').value;
	if (x != '' && i != '') {
		var u = EWA.CP + '/EWA_STYLE/cgi-bin/?XMLNAME=' + x + '&ITEMNAME=' + i
				+ '&EWA_AJAX=JSON_EXT&EWA_FRAMESET_NO=1';
		$J(u, show_params);
	}
}
function txt_item(obj) {
	var v = obj.value;
	var id = 'TR_' + v;
	var o = $X(id);
	if (!obj.checked) {
		if (o) {
			var v1 = o.getElementsByTagName('input')[1].value;
			if (v1 == '@' + v) {
				$(o).remove();
			} else {
				if (window.confirm('该行不是默认值,确认要删除么?')) {
					$(o).remove();
				} else {
					obj.checked = true;
				}
			}
		}
	} else {
		if (!$X(id)) {
			var cr = add_txt_row();
			cr.id = id;
			cr.getElementsByTagName('input')[0].value = v;
			cr.getElementsByTagName('input')[1].value = '@' + v;
		}

	}
	create_code();
}
function show_params(data) {
	var cfg = data.CFG;
	var ss = [];
	$X('PARAMS').options.length = 0;
	$X('PARAMS').options[0] = new Option('', '');
	var title = g_box_data["title"];

	for ( var n in cfg) {
		var d = cfg[n];
		if (d.TAG == 'button') {
			continue;
		}
		var v = d.NAME;
		var t = d.NAME + '(' + d.DES + ',' + d.DT + ')';
		var opt = $X('PARAMS').options[$X('PARAMS').options.length] = new Option(
				t, v);

		if ('@' + v == title) {
			opt.selected = true;
		}
		var id = 'pa_' + v;
		var s1 = "<div class='paras'><input onclick='txt_item(this)' id='" + id
				+ "' type='checkbox' value='" + v + "'><label for='" + id
				+ "'>" + t + "</label></div>";
		ss.push(s1);
	}
	s2 = ss.join('');
	$('.box_subject')[0].innerHTML = s2;

	var data0 = g_box_data["txt"];
	if (data0) {
		for ( var n in data0) {
			var d = data0[n];
			var name = d.n;
			var val = d.t;
			$('.box_subject input[value="' + name + '"]').attr('checked', 'true');
		}
	}
}

function add_first() {
	var txt = "<i class='fa fa-plus box_add_icon' onclick='你的脚本()'\n  ></i>";
	window.frames[0].editor.setValue(txt);
}
function add_js_chk(func) {
	var txt;
	if (func == null) {
		txt = "// 检查返回状态, 图标在下面定义, d为json的每一行数据\nfunction(d) {if(d.XXX='SL'){return \"A\"}else if(d.XXX='B'){return \"B\"}}";
	} else {
		txt = func.toString();
	}
	window.frames[0].editor.setValue(formatCodeHtml(txt));
}
function choose_fa(obj) {
	$('.choose').each(function() {
		this.className = this.className.replace('choose ', '');
	});

	$('#fas').hide();
	if ($(last_icon_obj).attr('aa') == null || $(last_icon_obj).attr('aa') != 1) {
		$('#box_icon').attr('class', obj.className);
		$('#ICON').val(obj.className);
		obj.className = "choose " + obj.className;
	} else {
		$(last_icon_obj).val(obj.className);
	}
	create_code();
}

function formatCodeHtml(s) {
	var txt1 = js_beautify(s, 1, '\t');
	return txt1;
}
function change_style(name, v) {
	if (name == 'page_radius') {
		$('.box').css('border-radius', v);
	} else if (name == 'page_width') {
		$('.box').css('width', v);
	} else if (name == 'page_height') {
		$('.box').css('height', v);
	} else if (name == 'page_color') {
		$('.box').css('background-color', v);
	} else if (name == 'first') {
		$('#box1 td').html(v);
	} else if (name == 'icon') {
		$('#box_icon').attr('class', v);
	} else if (name == 'icon_color') {
		$('#box_icon').css('color', v);
	}
}
function move_up_dow(obj, idx) {
	var tr = obj.parentNode.parentNode;
	if (idx == 1) {
		var next = $(tr).next();
		if (next.length == 1) {
			tr.swapNode(next[0]);
		}
	} else if (idx == -1) {
		var prev = $(tr).prev();
		if (prev.attr('tag') == 'hide') {
			return;
		}
		tr.swapNode(prev[0]);
	}
	create_code();
}
function create_code(fobj) {
	if (fobj) {
		if ($(obj).attr('aa') == '2'
				&& $(obj).parent().parent().find('input') == fobj) {
			$(obj).parent().parent().attr('id', 'TR_' + fobj.value);
		}
	}
	var objs = $('#paras input,#paras select,#paras textarea');
	var json = {};
	for ( var n in objs) {
		var obj = objs[n];
		if (obj.id == null || obj.id == '') {
			continue;
		}
		var name = obj.id.toLowerCase();

		json[name] = obj.value;

		change_style(name, obj.value)
	}
	// 显示细节部分
	var objs1 = $('#txt .fk1');
	json['txt'] = [];

	for (var i = 2; i < objs1.length; i += 2) {
		var o1 = objs1[i];
		var o2 = objs1[i + 1];

		json['txt'].push({
			n : o1.value,
			t : o2.value
		});
	}
	// 关联图标
	var objs2 = $('#chk_icons .fk');
	json['chk_icons'] = {};
	// 第一行是模板,跳过
	for (var i = 3; i < objs2.length - 1; i += 3) {
		var o1 = objs2[i];
		var o2 = objs2[i + 1];
		var o3 = objs2[i + 2];
		var key = o1.value || 'noname' + i;
		json['chk_icons'][key] = {
			icon : o2.value,
			color : o3.value
		};
	}
	var tmp = {};
	for ( var n in json) {
		var s = json[n];
		if (s.toString().indexOf('function') >= 0) {
			try {
				eval('tmp.' + n + '=' + s);
				json[n] = "[XXXX-" + n + "--XXXX]";
			} catch (e) {
				console.log(s);
			}
		}
	}
	var code = JSON.stringify(json);
	for ( var n in tmp) {
		code = code.replace('"[XXXX-' + n + '--XXXX]"', tmp[n].toString());
	}
	var fcode = formatCodeHtml(code);
	window.frames[1].editor.setValue("tmp = " + fcode);

	window.localStorage['EWA_BOX_CODE/' + g_d_x + '/' + g_d_i] = code;

	if (window.parent.$X('PAGE$BoxJson$BoxJson')) {
		window.parent.$X('EWAC_SELECT_TYPE').value = 'Page';
		window.parent._EWAC_UI.ChangeType('Page');

		var ipt = window.parent.$X('PAGE$BoxJson$BoxJson');
		// 避免回车符被删除
		ipt.title = fcode;
		ipt.value = fcode;
		ipt.setAttribute("EWA_OLD_VALUE", ipt.value);
		ipt.setAttribute("EWA_VALUE", fcode);
		ipt.onblur();
	}
}
function add_icons_row() {
	var row = $X('chk_icons').rows[1];
	var newrow = $X('chk_icons').insertRow(-1);
	for (var i = 0; i < row.cells.length; i++) {
		var td = row.cells[i];
		var newtd = newrow.insertCell(-1);
		newtd.innerHTML = td.innerHTML;
	}
	return newrow;
}
function add_txt_row() {
	var row = $X('txt').rows[1];
	var newrow = $X('txt').insertRow(-1);
	for (var i = 0; i < row.cells.length; i++) {
		var td = row.cells[i];

		var newtd = newrow.insertCell(-1);
		newtd.innerHTML = td.innerHTML;
		newtd.width = td.width;
	}
	return newrow;
}
function delete_txt_row(obj) {
	var tr = $(obj).parent().parent();
	var id = tr.attr('id');
	var rid = id.replace('TR_', 'pa_');
	$('#' + rid).attr('checked', false);
	tr.remove();
	create_code();
}
function show_icons(obj) {
	move_center($('#fas'));
	last_icon_obj = obj;
}

function show_ide(obj, type) {
	window.__TYPE__ = type || 'jscript';
	window.__VAL__ = obj.value;

	$('#ide input[a]').hide();
	$('#ide input[a=' + window.__TYPE__ + ']').show();

	move_center($('#ide'));
	last_icon_obj = obj;
	window.frames[0].aa();
	window.frames[0].document.body.focus();

	$('#ide_cover').show();
}
function move_center(obj) {
	var w0 = $('body').width();
	var h0 = $(document).height();
	var w1 = obj.width();
	var h2 = obj.height();
	var top = (h0 - h2) / 2 - 10;
	var left = (w0 - w1) / 2;
	obj.css({
		top : top,
		left : left,
		position : 'fixed'
	}).show();
}
function close_ide(nocode) {
	$('#ide_cover').hide();
	$('#ide').hide();
	if (!nocode) {
		var js = window.frames[0].getText();
		last_icon_obj.value = js;
		create_code();
	}
}
function colorPicker1(e) {
	colorPicker(e);
	var o = $('.cPSkin');
	if (!o.attr('ss')) {// 未绑定事件
		o.bind('click', function() {
			$(this).hide();
			create_code();
		});
		o.attr('ss', 'gdx');
	}
	$('body').append(o);

	move_center(o);
}
// ----------
if (!Node.prototype.swapNode) {
	Node.prototype.swapNode = function(node) {// 浜ゆ崲鑺傜偣
		var p = this.parentNode;
		if (this.nextSibling != node) {
			p.insertBefore(this, node);
		} else {
			p.insertBefore(node, this);
		}
	}
}
tmp_js = {
	img : function(d) {
		var ext = d.FILE_EXT.toLowerCase();
		var path = EWA.RV_STATIC_PATH + "/EWA_STYLE/images/file_png/";
		if (ext == "jpg" || ext == "jpeg" || ext == "png" || ext == "bmp"
				|| ext == "gif") {
			return EWA.CP + "/back_admin/scm/sys_att_download.jsp?file_id="
					+ d.FILE_ID + "&File_UnId=" + d.FILE_UNID;
		}
		var src = "gnote.png";
		if (ext == 'doc' || ext == 'docx') {
			src = "MSWD.png";
		} else if (ext == 'xls' || ext == 'xlsx') {
			src = "XCEL.png";
		} else if (ext == 'ppt' || ext == 'pptx') {
			src = "PPT3.png";
		} else if (ext == 'txt' || ext == 'cvs' || ext == 'pom') {
			src = "Edit.png";
		} else if (ext == 'zip' || ext == 'rar' || ext == '7z') {
			src = "zip.png";
		} else if (ext == 'pdf') {
			src = "ACR_App.png";
		} else if (ext == 'odt') {
			src = "openoffice.png";
		} else if (ext == 'html' || ext == "htm") {
			src = "html.png";
		}
		return path + src;
	},
	img_click : function() {
		downfile('@' + 'FILE_ID', '@' + 'FILE_UNID');
	}
}]]></Top><Bottom><![CDATA[function init_check(){
    if(parent.$X('PAGE$FrameTag$FrameTag')){
        init();
        return;
    }
    setTimeout(init_check,121);
}
addEvent(window, 'load', init_check);]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#fas i {
	width: 20px;
	height: 20px;
	margin: 5px;
	line-height: 20px;
	text-align: center;
	font-size: 15px;
	border: 1px solid #ccc;
}

#fas {
	color: #08c;
	width: 600px;
	height: 240px;
	overflow: auto;
	display: none;
	position: fixed;
	z-index: 1000000;
	background-color: #fff;
	padding: 4px;
	border: 1px solie #08c;
	border-radius: 5px;
}

#fas i:hover {
	color: red;
	border: 1px solid red;
	cursor: pointer;
}

.choose {
	color: #fff;
	cursor: pointer;
	background-color: #08c;
}

#box {
	
}

.cPSkin {
	z-index: 1231
}

#ide {
	width: 800px;
	height: 440px;
	display: none;
	position: fixed;
	background-color: #fff;
	border: 1px solid #ccc;
	padding: 4px;
	z-index: 100;
}

#ide .fa {
	width: 20px;
	height: 20px;
	line-height: 20px;
	text-align: center;
	position: absolute;
	left: -6px;
	top: -6px;
	color: #08c;
	background-color: #fff;
	border-radius: 10px;
	cursor: pointer;
}
#ide .fa:hover{
	color:red;
}
#ide iframe {
	width: 100%;
	height: 410px;
}

#ide_cover {
	position: fixed;
	left: 0px;
	top: 0px;
	bottom: 0px;
	right: 0px;
	background-color: rgba(0, 0, 0, 0.6);
	z-index: 99;
	display: none;
}

.color {
	height: 16px;
	width: 60px;
	border: 1px solid #ccc;
	float: right;
}

.two {
	width: 210px;
}

.paras:hover {
	color: red;
}

.split-para {
	position: absolute;
	top: 0px;
	left: 0px;
	width: 400px;
	bottom: 0px;
	overflow: auto;
	padding: 4px;
}

.split-box {
	position: absolute;
	top: 0px;
	left: 410px;
	width: 400px;
	bottom: 0px;
	overflow: auto;
}

.split-code {
	position: absolute;
	top: 0px;
	left: 820px;
	bottom: 0px;
	right: 0px;
}

#paras {
	background-color: #ccc;
}

#paras textarea {
	height: 15px;
}

#paras td {
	background-color: #fff;
	height: 22px;
	padding-left: 4px;
}

body {
	overflow: hidde;
	margin: 0px;
	background-color: #333
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2013-05-21 18:06:50" Name="sql_run" UpdateDate="2021-03-14 18:18:05"><Page><Name><Set Name="sql_run"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Blue"/></SkinName><DataSource><Set DataSource=""/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="SQL" Lang="zhcn" Memo=""/><Set Info="SQL" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<div style='width:100%;height:100%' id='tdContent'></div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[function run(){
  var sql= window.frames[0].editor.getValue();
  var u= window.location.href+'&ewa_action=run&ewa_ajax=json';
  var ajax=new EWA_AjaxClass();
  ajax.AddParameter("sql",sql);
  ajax.PostNew(u,function(){
    if(ajax.IsRunEnd()){
      var v;
      eval('v='+ajax.GetRst());
      run1(v);
    }
  
  });
  //$J(u,run1);
}
function run1(datas){
  var s=[];
  for(var i=0;i<datas.length;i++){
    s.push(datas[i].intern);
  }
  window.parent.frames[1].document.body.innerHTML=s.join("<br>");
}]]></Top><Bottom><![CDATA[function init() {
  document.body.style.margin='0px';
  document.body.style.overflow='hidden';
  var sql='';
  if('@tablename'.length>0){
    sql="SELECT * FROM @tablename";
  }
  __TYPE__='sql';
  __VAL__=sql; 
  
  var u='<iframe src="@rv_ewa_style_path/EWA_DEFINE/js/CodeMirror/index.html?a=1" width=100% height=100% scrolling=yes scroll=yes frameborder=1></iframe>';
      $X('tdContent').innerHTML=u;
  $X('tdContent').style.backgroundColor='#fff';
  $X('tdContent').style.border='1px solid #cdcdcd';
}
init();]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[p {
    margin: 0px;
    font-size: 14.8px;
}

#EWA_FRAME_MAIN {
    height: 100vh;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="1" FrameSize="200,*" FrameSubUrl="" FrameType="V"/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="no" LogMsg="" Type="Run"><CallSet><Set CallIsChk="" CallName="aa" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.database.RunSQL" ConData="" MethodData="@sql,@db" MethodName="runSQL" Name="aa" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="aa" CallType="ClassSet" Test=""/></CallSet></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="admin" CreateDate="2009-09-24 13:06:35" Name="frames" UpdateDate="2021-03-15 10:20:48"><Page><Name><Set Name="frames"/></Name><FrameTag><Set FrameTag="ListFrame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="配置项列表" Lang="zhcn" Memo=""/><Set Info="Items list" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="" Height="" HiddenCaption="" VAlign="" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>]]></Top><Bottom><![CDATA[
            <form action="./?XMLNAME=|ewa|group.xml&ITEMNAME=main" method=post target=_blank>
	<input type=hidden name=i> 
</form>
          ]]></Bottom></Set></AddHtml><AddScript><Set><Top><![CDATA[function modiParameter() {
    var ids = EWA.F.FOS["@SYS_FRAME_UNID"].SelectChecked();
    if (ids.length == 0) {
        alert('请选择内容！');
        return;
    }
    var p = "VIEW_XMLNAME=" + "@VIEW_XMLNAME".toURL() + "&itemNames=" + ids;
    EWA.UI.Dialog.OpenReloadClose("@SYS_FRAME_UNID", "@xmlname", "frame_update", true, p);
}

function test(name) {
    var url = './?XMLNAME=' + '@VIEW_XMLNAME'.toURL() + '&ITEMNAME=' + name.toURL();
    window.open(url);
}

function createGroup() {
    var ids = EWA.F.FOS["@SYS_FRAME_UNID"].SelectChecked();
    if (ids.length == 0) {
        alert('请选择内容！');
        return;
    }
    var s = ids.split(',');
    var s1 = [];
    for (var i = 0; i < s.length; i++) {
        s1.push('@view_xmlname*' + s[i]);
    }
    document.forms[0].i.value = s1.join(',');
    document.forms[0].submit();

}]]></Top><Bottom><![CDATA[var xmlName = "@VIEW_XMLNAME";
window.VIEW_XMLNAME = '@VIEW_XMLNAME';

function openFrame(itemName) {
    var url = './?XMLNAME=@xmlname&ITEMNAME=define_right&D_XMLNAME=' +
        encodeURIComponent(xmlName) + '&D_ITEMNAME=' +
        encodeURIComponent(itemName);
    window.parent.AddTab(url, itemName);
}
if ("@linktype" === 'group') {
    $('#divButton').hide();;
    $('.ewa-col-buta,.ewa-col-butModifyParameters,.ewa-col-getUpdateDate,.ewa-col-getAcl,.ewa-col-getLog,.ewa-col-getSkin').hide();
}
]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#col_true {
    width: 16px;
    background-image: url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/key_p.gif')
}

#col_false {
    width: 16px;
    background-image: url('@SYS_CONTEXTPATH/EWA_DEFINE/images/sql/column.gif')
}

#fk_false {
    display: none;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize><Set AllowExport="" ColSize="" IsSplitPage="" KeyField="getname" PageSize="" Recycle="" StatusField=""/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="1" luDblClick="" luDblClickIdx="" luSearch="" luSelect="M"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow><Set HiddenFields="getSkin,getAcl,getLog,getUpdateDate,buta,butModifyParameters" Name="linktype=group" ParaExp="'@linktype' = 'group'"/></LogicShow></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnListFrameUpdateCell"><CallSet><Set CallIsChk="" CallName="update des" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.UserXmls" ConData="" MethodData="@view_xmlname" MethodName="getXmls" Name="LoadFields" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.define.UpdateXml" ConData="@VIEW_XMLNAME" MethodData="@EWA_ACTION_KEY,@getdescription" MethodName="updateDescription" Name="update des" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="inc"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="inc"/></Name><GroupIndex/><InitValue><Set InitValue="SEQID"/></InitValue><DescriptionSet><Set Info="序号" Lang="zhcn" Memo=""/><Set Info="No" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="getName"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="checkbox"/></Tag><Name><Set Name="getName"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="选择" Lang="zhcn" Memo=""/><Set Info="Select" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:27px"/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getName" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="ssss"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="user"/></Tag><Name><Set Name="ssss"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="名称" Lang="zhcn" Memo=""/><Set Info="Name" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getname" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet><Set Lang="zhcn" User="&lt;a href='javascript:openFrame(&quot;@getName&quot;)'&gt;@getName&lt;/a&gt;"/></UserSet><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="tag"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="tag"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="类型" Lang="zhcn" Memo=""/><Set Info="Frame Type" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getTag" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="getdescription"><Tag><Set IsLFEdit="2" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getdescription"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="描述" Lang="zhcn" Memo=""/><Set Info="Description" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getdescription" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="getDatasource"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getDatasource"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="数据源" Lang="zhcn" Memo=""/><Set Info="Datasource" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml><Set IsHtml="0"/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getDatasource" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="getSkin"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getSkin"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="皮肤" Lang="zhcn" Memo=""/><Set Info="Skin" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getskin" DataType="String" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="getAcl"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getAcl"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="权限类" Lang="zhcn" Memo=""/><Set Info="Permission class" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getAcl" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="getLog"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getLog"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="日志" Lang="zhcn" Memo=""/><Set Info="Log" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getLog" DataType="" DisableOnModify="" Format="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="getUpdateDate"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="getUpdateDate"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="更新日期" Lang="zhcn" Memo=""/><Set Info="Update Date" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem><Set DataField="getUpdateDate" DataType="String" DisableOnModify="" Format="DateShortTime" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="buta"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="buta"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="测试" Lang="zhcn" Memo=""/><Set Info="Test" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:30px;"/></ParentStyle><AttributeSet/><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="test('@getName')"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem/><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="butModifyParameters"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butModifyParameters"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="Parameters" Lang="enus" Memo=""/><Set Info="批量调整参数" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="modiParameter()"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><DataItem/><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="admin" CreateDate="2009-01-07 17:01:20" Name="define_tabs" UpdateDate="2021-03-15 10:37:04"><Page><Name><Set Name="define_tabs"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="862024" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="tabls" Lang="zhcn" Memo=""/><Set Info="tabls" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<table width=100% height=100% border=0 cellspacing=0 cellpadding=0>
    <tr>
        <td id='TD1' height=30  valign=bottom>
        </td>
    </tr>
    <tr>
        <td id='TD2'>
        </td>
    </tr>
</table>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[var mm;
function init_define_tabs() {
    document.body.style.overflow = 'hidden';

    mm = new EWA_UI_TabsClass('mm');
    mm.Init($X('TD1'), $X('TD2'));

    //loadOp();
}

function AddTab(url, caption) {
    mm.CreateTab(url, caption);
}

function loadOp() {
    if (!top.op) {
        return;
    }
    var u = './?' + top.op;
    $X('TD2').innerHTML = u;
    u = GetInnerText($X('TD2'));
    $X('TD2').innerHTML = '';
    console.log(u);
    //AddTab(u, 'xx');
    top.op = null;
    var u1 = new EWA_UrlClass();
    u1.SetUrl(u);
    var v = u1.GetParameter('D_XMLNAME') + '*' + u1.GetParameter('D_ITEMNAME');
    window.parent.frames[0].EWA.F.EWA.F.GetFOSOne().ShowNode(v);
}

AddEvent(window,'load', init_define_tabs);]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#EWA_FRAME_MAIN {
    height: 100vh;
}

]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2013-05-22 09:25:25" Name="sql_run_main" UpdateDate="2021-03-15 10:46:33"><Page><Name><Set Name="sql_run_main"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Blue"/></SkinName><DataSource><Set DataSource=""/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="862024" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="SQL" Lang="zhcn" Memo=""/><Set Info="SQL" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="margin" PageAttValue="0px"/></PageAttributeSet><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<table border=0 width=100% height=100%>
    <tr>
        <td height=25><input type=button onclick='run()' value='RUN(CTRL+E)'></td>
    </tr>
    <tr>
        <td><iframe src='./?xmlname=@xmlname&itemname=sql_run&db=@db&tablename=@tablename' name='s' width=100% height=100% frameborder=0></iframe></td>
    </tr>
</table>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[function run(){
  window.frames[0].frames[0].run();
}


document.body.style.margin='0px';
document.body.style.overflow='hidden';
]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[ #EWA_FRAME_MAIN {
    height: 100vh;
} ]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="1" FrameSize="50%,*" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-02-05 11:20:31" Name="tabletree" UpdateDate="2021-11-25 09:33:49"><Page><Name><Set Name="tabletree"/></Name><FrameTag><Set FrameTag="tree"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="数据库" Lang="zhcn" Memo=""/><Set Info="Database" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><GroupSet/><Size/><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<div style='margin: 2px 4px;'><b class='fa fa-search' style='margin-right: 2px;'></b>
    <input type=text placeholder="过滤" id='filter' onblur='do_filter(this)'>
</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[function do_filter(obj) {
    var v = obj.value.trim();
    var old = obj.title;
    if (old == null) {
        old = '';
    }
    if (v == old) {
        return;
    }
    obj.title = v;
    if (v == '') {
        $('table[ewa_t]').show();
    } else {
        var v1 = v.toLowerCase();
        $('table[ewa_t]').each(function() {
            if (this.innerText.toLowerCase().indexOf(v1) >= 0 || this.id.split(';').length < 4) {
                this.style.display = '';
            } else {
                this.style.display = 'none';
            }
        });
    }
}
EWA.F.FOS["@sys_frame_unid"].link = function(id) {
    var linkType = "@linkType";
    var node = EWA.CurUI.GetNodeById(id);
    var ids = id.split(';');
    if (ids.length == 4) {
        if (linkType == 'GROUP') { //导出
            if ("@version" == "2021") {
                let checkbox = $(node.GetObject()).find('input')[0];
                console.log(checkbox);
                checkbox.checked = !checkbox.checked;
                return;
            }
            var os = document.getElementsByTagName('input');
            var s = [];
            for (var i = 0; i < os.length; i++) {
                var o = os[i];
                if (o.type == 'checkbox' && o.checked) {
                    s.push(o.value);
                }
            }
            var s1 = s.join('|');
            var u = "../../EWA_DEFINE/cgi-bin/group/?q=" + s1;
            window.parent.frames[1].location = u;
        } else {
            var url = './?xmlname=ewa/ewa.xml&itemname=fields&cfg=' + ids[1] +
                '&tablename=' + ids[3];
            if (linkType == 'CLASS') { //显示类
                url += "&linkType=CLASS";
                if (window.parent.frames[1].AddTab) {
                    window.parent.frames[1].AddTab(url, ids[3] + '/' + ids[1]);
                } else {
                    window.parent.frames[1].location = url;
                }
            } else {
                url += "&EWA_FRAMESET_NO=1";
                window.parent.frames[1].location = url;
            }

            window.parent.cfg = ids[1];
            window.parent.tablename = ids[3];
        }
    } else {
        node.NodeShow();
    }
};

(function() {
    var linkType = "@linkType";
    if (linkType == 'CLASS') {
        var u = './?xmlname=@xmlname&itemname=define_tabs&a=gdx';
        window.parent.frames[1].location = u;
    }
})();]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize/><ListUI/><MenuShow/><Menu/><Tree><Set AddPara1="" AddPara2="" AddPara3="" Key="key" Level="" LoadByLevel="1" MenuGroup="" Order="" ParentKey="ParentKey" RootId="" Text="name" Title=""/></Tree><HtmlFrame><Set FrameBorder="" FrameSize="200,*" FrameSubUrl="" FrameType="H"/></HtmlFrame><TreeIconSet><Set Close="@SYS_CONTEXTPATH/DEMO/IMAGES/TREE/word.jpg" Filter=".doc\b" Open="@SYS_CONTEXTPATH/DEMO/IMAGES/TREE/word.jpg" Test="Key"/><Set Close="@SYS_CONTEXTPATH/DEMO/IMAGES/TREE/word.jpg" Filter=".doc\b" Open="@SYS_CONTEXTPATH/DEMO/IMAGES/TREE/word.jpg" Test="Key"/></TreeIconSet><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="读取XML文件数据" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnTreeNodeMore"><CallSet><Set CallIsChk="" CallName="获取子节点" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="" MethodName="getCfgsXml" Name="读取XML文件数据" XmlTag="TableViewList/Row"/><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="@key,@linkType" MethodName="getMoreXml1" Name="获取子节点" XmlTag="TableViewList/Row"/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="读取XML文件数据" CallType="ClassSet" Test=""/></CallSet></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2010-04-07 15:02:57" Name="index" UpdateDate="2021-12-14 17:33:01"><Page><Name><Set Name="index"/></Name><FrameTag><Set FrameTag="Menu"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="GdxSoft EWA(v2.0b) IDE" Lang="zhcn" Memo="GdxSoft EWA(v2.0b) IDE"/><Set Info="GdxSoft EWA(v2.0b) IDE" Lang="enus" Memo="GdxSoft EWA(v2.0b) IDE"/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[

<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<div id="header">
    <div class='EWA_MENU1'>
        <div id='EWA_MENU' style='float:left'></div>
        <div style='float:right;cursor:hand' >
            <a id='switch_language' onclick="switchLanguage()"></a>
            <a onclick='relogin()' title='重新登录'>Hi, @EWA_ADMIN_NAME</a>
        </div>
    </div>
</div>
<div id='xmls'></div>
<div id='split'></div>
<div id='tabsmain'></div>
<div id='split_cover'></div>


]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[(function() {
    var lk = document.createElement('link');
    lk.type = 'image/x-icon';
    lk.rel = 'shortcut icon';
    lk.href = '@rv_ewa_style_path/EWA_DEFINE/images/icons/icon-144.png';
    document.getElementsByTagName('head')[0].appendChild(lk);

    var lk1 = document.createElement('link');
    lk1.rel = 'manifest';
    lk1.href = '@rv_ewa_style_path/EWA_DEFINE/manifest.webmanifest.json';
    document.getElementsByTagName('head')[0].appendChild(lk1);
    
    if ('@SYS_REMOTEIP' == '127.0.0.1') {
        window.setInterval(function() {
            var u = window.location.href + "&ewa_ajax=json";
            $J1(u, function() {
                //console.log('ping');
            });
        }, 1000 * 60 * 10); //10分钟
    }

    var u1 = new EWA_UrlClass();
    if (u1.GetParameter("theme") == 'dark') {
        document.body.className = 'dark';
    } else if (u1.GetParameter("theme") == 'light') {
        document.body.className = 'light';
    }
})();

function link(u) {
    window.frames[0].location = './?' + u;
}

function change_theme(theme) {
    EWAC.Theme.change_theme(theme); //defined in EWAC.js;
}

function commonSqls() {
    var u = './?xmlname=|ewa|ewa.xml&itemname=commmon_sqls';
    window.frames[0].frames[1].AddTab(u, '公共数据');
}

function openit() {

}

function relogin() {
    EWA.UI.Dialog.OpenFrame('@SYS_FRAME_UNID', '|ewa|m.xml', 'login', true,
        'DIA_LOGIN=1&version=3', '', '');
}]]></Top><Bottom><![CDATA[document.body.style.overflow = 'hidden';

function newProject() {
    var url = "./?XMLNAME=/ewa/ewa.xml&ITEMNAME=newProject";
    EWA.UI.Dialog.OpenWindow(url, 'newproject', 500, 300);
}  

function showXml() {  
    var w = GetShowWin();
    if (w == null) return;
    w.showXml();
}

function updateView() {
    var w = GetShowWin();
    if (w == null) return;
    w.updateView();
}

function GetShowWin() {
    //var w = window.frames[0].frames[1];
    var w = window;
    return w.mm.CurrentWindow;
}

function saveXml() {
    var w = GetShowWin();
    if (w == null) return;
    w.saveXml();
}

function changeItems(tag) {
    var w = GetShowWin();
    if (w == null) return;
    w.changeItems(tag);
}
var LastView;

function ShowView(id) {
    if (LastView != null) {
        LastView.style.display = 'none';
        LastView = null;
    }
    LastView = document.getElementById(id);
    LastView.style.display = '';
}
//新建Frame
function NewFrame(xml, xmlName, itemName) {
    EWAC.SaveXml(xmlName, itemName, xml, true);
}

function aa() {
    var w = GetShowWin();
    if (w.document.readyState != 'complete') {
        return;
    }
    window.clearInterval(aa1);
    w.loadNew(axml);
}

function copyRes() {
    var w = GetShowWin();
    var a = document.getElementById('cp_res');
    w.copyRes(a);
    alert(a.title);
}

function pasteRes() {
    if (typeof EWA_RES_COPY == 'undefined') {
        alert('请先复制资源');
        return;
    }
    var w = GetShowWin();
    w.pasteRes(EWA_RES_COPY);
}

function switchLanguage() {
    let u = new EWA_UrlClass(EWA.F.FOS["@sys_frame_unid"].Url);
    u.AddParameter("ewa_lang", EWA.LANG == 'enus' ? 'zhcn' : 'enus');
    $('#switch_language').attr('href', u.GetUrl());
}

(function init_index() {

    $('#switch_language').text(EWA.LANG == 'enus' ? '中文' : 'English');

    var u = "@EWA.CPF?xmlname=" + "@xmlname".toURL() + "&itemname=define_tabs"
    $Install(u, 'tabsmain', function() {
        var u = "@EWA.CPF?xmlname=" + "@xmlname".toURL() + "&itemname=cfgtree&EWA_FRAMESET_NO=1";
        $Install(u, 'xmls', function() {});
    });
    mv1 = new EWA.UI.Move();
    mv1.Init(mv1);
    mv1.IsMoveY = false;

    var obj = $X('split');

    mv1.AddMoveObject(obj, obj, function(a) {
        $('#split_cover').hide();
        $('#split').css('z-index', 1);
        $('body').removeClass('unselect');
    }, document.body, function(a, b) {
        var left = $(a).css('left').replace('px', '') * 1;
        $('#xmls').css('width', left);
        $('#tabsmain').css('left', left + 1);
        window.localStorage['ewa_define_left'] = left;
    }, function() {
        $('#split_cover').show();
        $('body').addClass('unselect');
    });


    $('.ewa_menu_m').each(function() {
        var cmd = $(this).attr('EWA_CMD');
        if (cmd.indexOf('window.frames[0].frames[1].') == 0) {
            var cmd1 = cmd.replace('window.frames[0].frames[1].', '');
            $(this).attr('EWA_CMD', cmd1);
        }
    });

    if (window.localStorage['ewa_define_left']) {
        var left = window.localStorage['ewa_define_left'] * 1;
        $('#xmls').css('width', left);
        $('#tabsmain').css('left', left + 1);
        $('#split').css('left', left);
    }

    //防止页面后退
    history.pushState(null, null, document.URL);
    window.addEventListener('popstate', function() {
        history.pushState(null, null, document.URL);
    });
})();]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#xmls #EWA_FRAME_MAIN {
    height: auto;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize/><ListUI/><MenuShow><Set MenuShow="EWA_MENU" MenuType=""/></MenuShow><Menu><Set Cmd="mcmd" Icon="micon" IconType="" Key="mid" ParentKey="pid" RootId="0" Text="mtext"/></Menu><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="no" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="EwaDefineMenu" CallType="ClassSet" Test="'@version' !='old'"/><Set CallIsChk="" CallName="menu1" CallType="XmlSet" Test="'@version'='old'"/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.EwaDefineMenu" ConData="" MethodData="" MethodName="getMenus" Name="EwaDefineMenu" XmlTag=""/></ClassSet><XmlSet><Set Name="menu1" XmlAction="load" XmlData="" XmlFields="" XmlSetData="menu" XmlWhere=""/></XmlSet><XmlSetData><Set Name="menu" XmlFields="mid,mtext,pid,micon,mcmd,mtext_enus" XmlLoadType="attribute" XmlName="@EWA.CONFIG.PATH/EwaDefineConfig.xml" XmlTagPath="Menus/Menu"/></XmlSetData><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="EwaDefineMenu" CallType="ClassSet" Test="'@version' !='old'"/><Set CallIsChk="" CallName="menu1" CallType="XmlSet" Test="'@version'='old'"/></CallSet></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-01-07 17:01:20" Name="define_edit_value" UpdateDate="2022-05-16 15:48:01"><Page><Name><Set Name="define_edit_value"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo><![CDATA[
                    ## 用于EWA的代码编辑

### 1、根据传递的参数（jscript, html, json, sql, md5）来确定加载的编辑器类型
### 2、编辑器调用 EWA_CONFIG/js/CodeMirror/index.html文件，编辑器采用ACE模式。


                ]]></ConfigMemo></Set></ConfigMemo><Cached><Set CachedSeconds="862024" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="内容编辑" Lang="zhcn" Memo=""/><Set Info="Content editor" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="400" HiddenCaption="1" VAlign="top" Width="810"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.css">

<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_CM.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_STYLE/js/EWA_ALL.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_FUNCTIONS.js"></script>

<table border="0" cellspacing="0" cellpadding="0" style="min-width:1000px" width="100%" height="520" id=tbMain>
    <tr style='display:none'></tr>
    <tr id='trEwaFunc'>
        <td height=30><input type=text placeholder="EWA" id=func style='width:100%' /></td>
    </tr>
    <tr>
        <td height="100%" id="tdContent">
            <textarea id=content style="width: 100%; height: 100%"></textarea>
        </td>
    </tr>
    <tr>
        <td height=20 style="padding: 5px; border-top: 1px solid #ccc" align="right">
            <button type=button id=butOk onclick="ok();">确定</button>
            <button type=button>关闭</button>
        </td>
    </tr>
</table>]]></Top><Bottom><![CDATA[
                     
                ]]></Bottom></Set></AddHtml><AddScript><Set><Top><![CDATA[(function() {
    document.body.style.overflow = 'hidden';
    $('body').css('background', 'transparent');

    var u1 = new EWA_UrlClass();
    if (u1.GetParameter("max")) {
        document.writeln("<style>#Test1{width:100%!important;height:100vh!important;}</style>");
    }
})();]]></Top><Bottom><![CDATA[var EWA_FUN;
var parentCmd;
var timerInit;
var cmEditor;
var AAA;


var cm;

function init(a) {
    console.log(a);
    if (a[3] == "jscript") {
        $X('trEwaFunc').style.display = '';
    } else {
        $X('trEwaFunc').style.display = 'none';
        $('#trFuncHtml').show();
    }
    var table = $X('tbMain');
    if (a[3] == "html" || a[3] == "jscript" || a[3] == "sql" ||
        a[3] == "css" || a[3] == "json" || a[3] == "md") {
        //window.clearInterval(timerInit);
        __VAL__ = a[1].getAttribute("EWA_VALUE");
        __TYPE__ = a[3];
        if (a[3] == 'json' && !__VAL__) {
            //__VAL__ = '[{"url":"http://xxx/bb/cc.jsp?a=1", "method": "query/update", "data":{"id": "@' + 'id","name": "@' + 'name"}},{}]';
            __VAL__ = `
[{
    "url": "https://api.gdxsoft.com/products",
    "methodMemo": "GET/POST/PUT/PATCH/DELETE模式之一",
    "method": "GET",
    "headerMemo": "通过header提交的数据",
    "headers": {
        "apiKey": "apikey",
        "accept": "application/json"
    },
    "queries": {
        "search": "@search",
        "offset": "@offset"
    },
    "dataMemo": "通过form提交的数据，和body互斥",
    "data": {},
    "bodyMemo": "通过body提交的数据，和data互斥",
    "body": null,
    "expireMemo": "过期时间，1d, 13h, 300m 1200s",
    "expire": "12h",
    "attacheMemo": "attacheQuery 附件查询参数，attachePost附件提交参数，attacheCookies附加cookie",
    "attacheQuery": false,
    "attachePost": false,
    "attacheCookies": false,
    "connConfigNameMemo": "数据库连接配置",
    "connConfigName": "this_is_dev",
    "debug": true,
    "listTagsMemo":"记录到数据库,asLfData是否作为lf的数据源",
    "listTagsMemo1":"tag：jsonKey,key:数据主键,table:数据库表名称",
    "listTagsMemo2":"connConfigName：数据库连接，默认继承本Frame配置",
    "listTags": [{
        "asLfData": "false",
        "tag": "products",
        "key": "PRODUCTCODE",
        "table": "PRODUCT",
        "connConfigName": "",
        "listTagsMemo2":"当前数据的子数据",
        "listTags": [{
            "tag": "images",
            "key": "id",
            "table": "image"
        }, {
            "tag": "bookingFields",
            "key": "PRODUCTCODE,LABEL, REQUIREDPERBOOKING",
            "table": "bookingField"
        }]
    }]
}
`
        }
        if (window.frames.length == 0) {
            var u = '<iframe src="@ewa.cp/EWA_STYLE/cgi-bin/?XMLNAME=@XMLNAME&itemname=define_code_editor"' +
                ' width=100% height=100% scrolling=no scroll=no frameborder=0></iframe>';
            $X('tdContent').innerHTML = u;


            loadEWAFunction(a);
            cm = new EWA_ColorMark2($X('func'), EWA_FUN);
            cm.Init();
        } else {
            window.frames[0].aa();
        }
        setSize();
    } else {
        $X("content").value = a[1].getAttribute("EWA_VALUE");
    }
}
var h = -10;
var w = -10;
var idx = 0;

function setSize() {
    try {
        if (document.body.offsetHeight != h) {
            h = document.body.offsetHeight;
            idx = 0;
            window.setTimeout(setSize, 150);
        } else {
            idx++;
            if (idx < 5) {
                window.setTimeout(setSize, 50);
                return;
            }
            var h2 = $X('tdContent').offsetHeight;
            var o = window.frames[0].document.getElementById('code').nextSibling;
            o.style.height = h2 + 'px';
            o.childNodes[1].style.height = h2 + 'px';

        }
    } catch (ee) {
        //$X('butOk').value=ee;
    }
}

function loadEWAFunction(a) {
    //console.log(a);
    //move to define_code

    if (EWA_FUN != null) {
        return;
    }
    console.log('loadEWAFunction')
    window.$Tip1 = $Tip; //避免出现“验证码错误提示” at this.ValidCodeError
    $Tip = function(a) {
        console.log(a);
    };
    EWA_FUN = new EWA_Function();
    EWA_FUN.AddTopObject(EWA, "EWA");
    EWA_FUN.LoadFunctions();
    var tagName = a[4]._UserClass.PageTables.Tables.GetItem('FrameTag').GetSingleValue();
    EWA_FUN.LoadResources(a[4]._UserClass.PageInfosTablesSet, tagName);
    var dataTable = a[4]._UserClass.ActionTables.Tables.GetItem("ActionSet");
    loadAction(dataTable);

    $Tip = $Tip1;
    delete $Tip1;
}

function loadAction(dataTable) {
    let t = setInterval(function() {
        if (window.frames[0].$X && window.frames[0].$X('selAction')) {
            window.clearInterval(t);

            var sel = window.frames[0].$X('selAction');
            var typeIndex = dataTable.Columns.GetIndex("Type");
            for (var i = 0; i < dataTable.Rows.length; i += 1) {
                var v = dataTable.Rows[i].Fields[typeIndex];
                sel.options[sel.options.length] = new Option(v, v);
            }
        }
    }, 100)
}

function ok() {
    if (typeof EWA_FUN != "undefined") {
        EWA_FUN.Dispose();
    }
    var cmd = window._EWA_DialogWnd.GetReturnBack();
    var val = "";
    if (window.frames.length == 0) {
        val = $X('content').value;
    } else {
        val = window.frames[0].editor.getValue();
    }
    cmd.CmdArgus[0].value = val;
    cmd.CmdArgus[0].title = val;
    cmd.CmdArgus[0].setAttribute("EWA_VALUE", val);
    cmd.CmdArgus[0].setAttribute("EWA_OLD_VALUE", cmd.CmdArgus[0].value);
    cmd.CmdArgus[0].focus();
    window._EWA_DialogWnd.CloseWindow();
}

function openDialog(url) {
    if (url == null || url.length == 0) return;
    var returnBackCommand = new _EWA_DialogWnd._OpenerWindow.EWA.UI.Dialog.CMD();
    returnBackCommand.CmdArgus[0] = window.frames[0].window;
    _EWA_DialogWnd._OpenerWindow.EWA.UI.Dialog.OpenWindow(url, 'openurl', 624, 400, false, null, returnBackCommand);
}

function init_define_set_value() {
    EWAC_FUNCTIONS.setJs = function(v) {
        window.frames[0].setText('\n' + v);
    };
    if ('@SQL_XMLNAME' != '') {
        console.log('@SQL_XMLNAME');
        var ajax = new EWA_AjaxClass();
        var u = EWA.CP + '/EWA_DEFINE/cgi-bin/xml/?TYPE=SQLS&XMLNAME=@SQL_XMLNAME';
        ajax.Get(u,
            function() {
                if (!ajax.IsRunEnd()) {
                    return;
                }
                var rst = ajax.GetRst();
                var aa = [];
                aa[3] = 'sql';
                aa[1] = document.createElement('div');
                aa[1].setAttribute('EWA_VALUE', rst);
                init(aa);
            });
    }
}
addEvent(window, 'load', init_define_set_value);]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[p {
    margin: 0px;
}
.dark #markdown_html * {
    color: #fff;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2010-04-07 16:11:41" Name="about" UpdateDate="2022-05-18 10:24:16"><Page><Name><Set Name="about"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl=""/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="关于开发者" Lang="zhcn" Memo=""/><Set Info="About us" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="C1" HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="300"/></Size><AddHtml><Set><Top><![CDATA[<div style='margin:10px;width:100%'>
    <p>
        项目发起者：
    </p>
    <p>
        &nbsp;&nbsp;&nbsp; 郭磊
        <img width="100" src='@rv_ewa_style_path/EWA_DEFINE/images/menu/guolei.gif'>
    </p>
    <p>
        项目参与者：
    </p>
    <p>
        &nbsp;&nbsp;&nbsp; 靳朝鹏
    </p>
    <p>
        &nbsp;&nbsp;&nbsp;
    </p>
    <p>
        项目地址：</p>
    <div><a href='https://www.gdxsoft.com' target="_blank">
            www.gdxsoft.com
        </a></div>
    <div>
        <a href='https://github.com/gdx1231' target="_blank">
            github.com/gdx1231
        </a>
    </div>

</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[document.body.style.overflow  = 'hidden';]]></Top><Bottom/></Set></AddScript><AddCss><Set><AddCss><![CDATA[p {
    margin: 0px;
    font-size: 14.8px;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2011-12-03 10:47:31" Name="select_create_sql" UpdateDate="2022-06-23 16:49:09"><Page><Name><Set Name="select_create_sql"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="列表助手" Lang="zhcn" Memo=""/><Set Info="List of assistants" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="700px"/></Size><AddHtml><Set><Top><![CDATA[<script language="javascript" src="@rv_ewa_style_path/EWA_STYLE/js/EWA_COLOR_MARK.js"></script> 
<!--<script language="javascript" src="@rv_ewa_style_path/EWA_STYLE/js/js_jquery/EWA_ALL.js"></script> -->
]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[var enBasTab = true;
var tbs;

function show_tables(key) {
    if (key == '') {
        var obj = $X('Tables');
        obj.options.length = 0;

        return;
    }
    var u = window.location + '&EWA_ACTION=tables&EWA_AJAX=json&key=' + key;
    var ajax = new EWA_AjaxClass();
    ajax.Get(u, function() {
        if (ajax.IsRunEnd()) {
            var rst = ajax.GetRst();
            eval('tbs=' + rst);
            show_tables1();
        }
    });
}
var ffs;
var isZhEn = false;

function show_tables1() {
    var obj = $X('Tables');
    obj.options.length = 0;
    obj.options[0] = new Option('', '');
    for (var i = 2; i < tbs.length; i++) {
        var t = tbs[i];
        obj.options[obj.options.length] = new Option(t.Name, t.Key);
    }
    installQuick('bas_tag','字典');
    installQuick('sys_coin','货币');
    installQuick('city','城市');
}

function installQuick(id, name){
    let coin = $("#Tables option[value$=';" + id.toUpperCase() + "']");
    if (coin.length == 0) {
        coin =$("#Tables option[value$=';" + id.toLowerCase() + "']");
    }
    if (coin.length == 0) {
        return;
    }
    if (coin.length > 0) {
        let a = $("<a style='margin-right:4px' href='javascript:void(0)'>"+name+"</a>");
        $(".ewa-row-Tables .EWA_TD_R").append(a);
        a.click(function() {
            $X("Tables").value = coin.val();
            show_fields($X("Tables").value);
        });

    }
}

function show_fields(key) {
    if (key == '') {
        var objs = [];
        objs.push($X('ValueField'));
        objs.push($X('DisplayField'));
        objs.push($X('TitleField'));
        objs.push($X('sort'));
        for (var i = 0; i < objs.length; i++) {
            objs[i].options.length = 0;
        }
        return;
    }

    var keys = key.split(';');
    var u = './?xmlname=@xmlname&EWA_FRAMESET_NO=1&itemname=fields&cfg=' + keys[1] +
        '&tablename=' + keys[3] + '&ewa_ajax=json';
    $J(u, function(ffs) {
        show_fields1(ffs);
        if (keys[3].toUpperCase() == "BAS_TAG") {
            setParameters('BAS_TAG', 'BAS_TAG_NAME', 'BAS_TAG_NAME_EN', 'BAS_TAG_ORD', "BAS_TAG_GRP = ''");
        } else if (keys[3].toUpperCase() == "SYS_COIN") {
            setParameters('COIN_ID', 'COIN_NAME', 'COIN_KEY', 'COIN_ID', "");
        } else if (keys[3].toUpperCase() == "CITY") {
            setParameters('CITY_ID', 'CITY_NAME', 'CITY_NAME_EN', 'CITY_NAME', "COUNTRY_ID="+"@"+"COUNTRY_ID");
        }
    });
}

function setParameters(value, disp, title, sort, where) {
    $X('ValueField').value = value; //"BAS_TAG";
    $X('DisplayField').value = disp; //"BAS_TAG_NAME";
    $X('TitleField').value = title; //"BAS_TAG_NAME_EN";
    $X('sort').value = sort; // "BAS_TAG_ORD";
    $("#Where").val(where);
    $("#Where")[0].focus();
    $('#ValueField').change();
    
    EWA.OW.Load();
    var refObj = EWA.OW.PWin.$X("@fromId");
    var refTd = refObj.parentNode;
    while (refTd.tagName != 'TD') {
        refTd = refTd.parentNode;
    }

}

function show_fields1(ffs) {
    var objs = [];
    objs.push($X('ValueField'));
    objs.push($X('DisplayField'));
    objs.push($X('TitleField'));
    objs.push($X('sort'));

    for (var i = 0; i < objs.length; i++) {
        objs[i].options.length = 0;
        objs[i].options[0] = new Option('', '');
    }

    for (var i = 0; i < ffs.length; i++) {
        var t = ffs[i];
        for (var k = 0; k < objs.length; k++) {
            objs[k].options[objs[k].options.length] =
                new Option(t.name + '(' + t.description + ')', t.name);
        }
    }

}]]></Top><Bottom><![CDATA[var callType = '@a';

function ok() {
    EWA.OW.Load();

    var obj = EWA.OW.PWin.$X('@fromId');

    var tr = obj.parentNode;
    while (tr.tagName != 'TR') {
        tr = tr.parentNode;
    }
    var m = tr.rowIndex;
    var tb = tr.parentNode;

    var sql = GetInnerText($X('sql1')).trim();
    if (sql == '') {
        alert('请先完成定义');
        return;
    }
    setValue(tb, m + 1, sql);
    if (callType == 1) { //select, radio, checkbox
  
        var v = $X('ValueField').value;
        setValue(tb, m + 2, v);
        var d = $X('DisplayField').value;
        setValue(tb, m + 3, d);

    } else { //ref
        var v = $X('ValueField').value;
        setValue(tb, m + 3, v);
        var d = $X('DisplayField').value;
        setValue(tb, m + 2, d);

        //排序检索方式
        setValueJq(tb, 'ITEMS$OrderSearch$IsOrder', 1);
        setValueJq(tb, 'ITEMS$OrderSearch$SearchType', 'fix');
        setValueJq(tb, 'ITEMS$OrderSearch$SearchSql', sql);
        setValueJq(tb, 'ITEMS$OrderSearch$SearchMulti', 2);
        setValueJq(tb, 'ITEMS$OrderSearch$IsSearchQuick', 1);
        // 增加个空白行
        setValueJq(tb, 'ITEMS$List$ListAddBlank', 1);
    }
    if (callType == '0') {
        var t = $X('TitleField').value;
        setValue(tb, m + 4, t);
    }
    setTimeout(function() {
        _EWA_DialogWnd.CloseWindow();
    }, 101);
    
}

function setValueJq(tb, id, val) {
    var o = $(tb).find('[id="' + id + '"]');
    if (o.length == 0) {
        alert(id + ' not exists');
        return;
    }
    o = o[0];
    o.value = val;
    if (o.tagName == 'SELECT') {
        o.onchange(o);
    } else if (o.onblur != null)
        o.onblur();
}

function setValue(tb, index, value) {
    try {
        var o = tb.rows[index].getElementsByTagName('input')[0];
        o.value = value;
        if (o.onblur != null)
            o.onblur();
    } catch (e) {

    }
}

function aa() {
    if (!$ || !$X('Tables')) {
        // not load complete;
        return;
    }
    if ($X('Tables').selectedIndex == -1) {
        //not select datasource
        return;
    }

    var tb = $X('Tables').options[$X('Tables').selectedIndex].text;
    var v = $X('ValueField').value;
    var d = $X('DisplayField').value;
    var t = $X('TitleField').value;

    var sql = '';
    if (tb == '' || v == '' || d == '') {
        return;
    }
    //fields 
    sql = 'SELECT ' + v + ', ' + d;
    if (t != '') {
        sql += ', ' + t;
    }
    sql += ' FROM ' + tb;

    //where 
    var w = $X('Where').value;
    if (w != '') {
        sql += ' WHERE ' + w;
    }
    //order by
    var s = $X('sort').value;
    if (s != '') {
        sql += ' ORDER BY ' + s;
    }
    if (isZhEn) {
        sql = sql.replace("BAS_TAG_NAME", "BAS_TAG_NAME,BAS_TAG_NAME_EN");
    }
    //isZhEn=false;
    //mark color 
    var s1 = cmclass.MarkSql(sql);
    s1 = s1.replace('<nobr>', '').replace('</nobr>', '');

    $X('sql1').innerHTML = s1;
}
var cmclass;
addEvent(window, 'load', function() {
    if (callType == '1') {
        $X('_ewa_tr$TitleField').style.display = 'none';
    }
    cmclass = new EWA_ColorMark('CLASS');
    if ($X('DataSource').selectedIndex > 0) {
        show_tables($X('DataSource').value);
    }
});]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="datasource"><CallSet><Set CallIsChk="" CallName="datasource" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="tables"><CallSet><Set CallIsChk="" CallName="table" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet><Set Name="OnPageLoad SQL" SqlType="query" TransType="no"><Sql><![CDATA[SELECT * FROM EWA_ADMIN WHERE ADM_ID = @ADM_ID]]></Sql><CSSet/></Set><Set Name="OnPagePost SQL" SqlType="update" TransType="no"><Sql><![CDATA[UPDATE EWA_ADMIN SET 
	ADM_NAME = @ADM_NAME,
	ADM_EMAIL = @ADM_EMAIL,
	ADM_PHONE = @ADM_PHONE,
	ADM_IDCARD = @ADM_IDCARD,
	ADM_ADDR = @ADM_ADDR,
	ADM_MEMO = @ADM_MEMO,
	ADM_DENY = @ADM_DENY,
	ADM_MDATE=@SYS_DATE
WHERE ADM_ID = @ADM_ID]]></Sql><CSSet/></Set></SqlSet><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="" MethodName="getCfgsXml" Name="datasource" XmlTag="TableViewList/Row"/><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="@key,@linkType" MethodName="getMoreXml1" Name="table" XmlTag="TableViewList/Row"/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="datasource" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="DataSource"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="DataSource"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="数据源" Lang="zhcn" Memo="数据库连接池"/><Set Info="The data source" Lang="enus" Memo="Database connection pooling"/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="show_tables(this.value)"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="DataSource" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List><Set DisplayField="name" DisplayList="" GroupField="" ListAddBlank="1" ListFilterField="" ListFilterType="" ListShowType="" ParentField="" Sql="{action:datasource}" TitleField="" TitleList="" ValueField="key" ValueList=""/></List><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="Tables"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="Tables"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="表" Lang="zhcn" Memo=""/><Set Info="Table" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="show_fields(this.value)"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List><Set DisplayField="" DisplayList="" GroupField="" ListAddBlank="" ListFilterField="" ListFilterType="text" ListShowType="" ParentField="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="ValueField"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="ValueField"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="值字段" Lang="zhcn" Memo=""/><Set Info="Value field" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="aa()"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="ValueField" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List><Set DisplayField="" DisplayList="" GroupField="" ListAddBlank="" ListFilterField="" ListFilterType="" ListShowType="" ParentField="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="DisplayField"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="DisplayField"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="显示字段" Lang="zhcn" Memo=""/><Set Info="Display field" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="aa()"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="DisplayField" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List><Set DisplayField="" DisplayList="" GroupField="" ListAddBlank="" ListFilterField="" ListFilterType="" ListShowType="" ParentField="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="TitleField"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="TitleField"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="提示字段" Lang="zhcn" Memo=""/><Set Info="Hint field" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="aa();"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="TitleField" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List><Set DisplayField="" DisplayList="" GroupField="" ListAddBlank="" ListFilterField="" ListFilterType="" ListShowType="" ParentField="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="sort"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="sort"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="排序" Lang="zhcn" Memo=""/><Set Info="Sorting" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="aa()"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="Where"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="Where"/></Name><GroupIndex/><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="查询条件" Lang="zhcn" Memo=""/><Set Info="Query criteria" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="onblur" EventType="Javascript" EventValue="aa();"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength><Set MaxLength="500" MinLength=""/></MaxMinLength><MaxMinValue><Set MaxValue="" MinValue=""/></MaxMinValue><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="Where" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx><Set VXAction="" VXFail="" VXJs="" VXMode="" VXOk=""/></VaildEx><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="SQL"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="user"/></Tag><Name><Set Name="SQL"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="SQL" Lang="zhcn" Memo=""/><Set Info="SQL" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="SQL" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet><Set Lang="zhcn" User="&lt;div style='height:100px;font-size:13px;' id='sql1'&gt; &lt;/div&gt;"/></UserSet><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="butOk"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butOk"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="确定" Lang="zhcn" Memo=""/><Set Info="Ok" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="ok();"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem/><DispEnc/><DataRef/><List/><UserSet/><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set AttatchParas="" CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="butClose"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butClose"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="关闭" Lang="zhcn" Memo=""/><Set Info="Cancel" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle="width:40px; text-align: center"/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem/><DispEnc/><DataRef/><List/><UserSet/><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set AttatchParas="" CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-01-07 17:01:20" Name="define_res" UpdateDate="2022-07-05 10:40:19"><Page><Name><Set Name="define_res"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="编辑资源" Lang="zhcn" Memo=""/><Set Info="Editing a resource" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<!--<script type="text/javascript" src="@rv_ewa_style_path/EWA_STYLE/js/UTILS/EWA_UT_TRANS.js"></script>-->
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[var trans;

function aa(fromObj) {
    var id = fromObj.id;
    if (id.indexOf('zhcn') < 0) {
        return;
    }
    var id1 = id.replace('zhcn', 'enus');
    var obj1 = $X(id1);
    if (obj1 == null) {
        return;
    }
    if (obj1.value != '') {
        return;
    }
    if (trans == null) {
        trans = new EWA_UT_TRANS();
    }
    trans.TransToEn(fromObj.value, obj1);
}

function bb() {
    if (idx < ipts.length - 1) {
        aa(ipts[idx]);
        idx++;
        setTimeout(bb, 123);
    }
}
var ipts;
var idx;

function tall() {
    ipts = document.body.getElementsByTagName('input');
    idx = 0;
    bb();
}]]></Top><Bottom><![CDATA[(function() {
    let t = setInterval(() => {
        let tb = $('#resTable');
        if (tb.length == 0) {
            return;
        }
        window.clearInterval(t);
        let s = $("<div><a class='copy'>复制</a></div><div><a class='paste'>粘贴</a></div>");
        s.find('a.copy').on('click', () => {
            let data = {};
            tb.find('input').each(function() {
                let id = this.id;
                let val = this.value;
                if (val) {
                    data[id] = val;
                }
            });
            top.copyedResData = data;
            $Tip('已复制，请切换到其它配置粘贴')
        });
        s.find('a.paste').on('click', () => {
            if (!top.copyedResData) {
                $Tip('请切换到其它配置先复制');
                return;
            }
            let inputs = [];
            tb.find('input').each(function() {
                let id = this.id;
                if (top.copyedResData[id]) {
                    this.value = top.copyedResData[id];
                    inputs.push(this);
                }
            });
            if (inputs.length == 0) {
                $Tip('没有可粘贴的资源');
            }
            for (let i = 0; i < inputs.length; i++) {
                $(inputs[i]).trigger('blur');
            }
        });
        tb.find('.EWA_TD_H:eq(0)').append(s);
    }, 100);
})();]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-01-08 11:03:23" Name="cfgtree" UpdateDate="2022-07-14 10:30:02"><Page><Name><Set Name="cfgtree"/></Name><FrameTag><Set FrameTag="tree"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="配置文件" Lang="zhcn" Memo=""/><Set Info="Config Files" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><GroupSet/><Size/><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<div class='search-form' style="position: relative; padding-bottom: 4px">
    <input placeholder="Search xml" oninput="doSearch(this)" type="search"
        style="width:100%;padding-left: 20px;box-sizing: border-box;line-height: 1.6;border-radius: 4px;">
    <i class="fa fa-search" style="
    font-family: fontawesome;
    position: absolute;
    left: 5px;
    top: 4px;
    color: #08c;
"></i>
</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[var showtype = '@showtype';

function link(key, pKey, text, addPara1, addPara2, addPara3) {
    var p = addPara1 * 1;
    if (p == 0 || (showtype == 'selectitem' && p < 3)) {
        if (EWA.CurUI != null) {
            var node = EWA.CurUI.GetNodeById(key);
            node.NodeOpen();
        }
        return;
    }
    var s1 = key.split("*");
    if (showtype == 'selectitem') {
        window.parent.loadInfo(s1[0], s1[1]);
    } else {
        if (p == 1) {
            var url = './?XMLNAME='+'@xmlname'.toURL()+'&ITEMNAME=frames&VIEW_XMLNAME=' +
                encodeURIComponent(s1[0]);
            if ('@linktype' == 'group') {
                window.parent.frames[1].location = url + '&linktype=group';
            } else {
                AddTab(url, s1[0]);
            }
        } else {
            var url = './?XMLNAME='+'@xmlname'.toURL()+'&ITEMNAME=define_right&D_XMLNAME=' +
                encodeURIComponent(s1[0]) + '&D_ITEMNAME=' +
                encodeURIComponent(s1[1]);
            AddTab(url, s1[1]);
        }
    }
}]]></Top><Bottom><![CDATA[function doSearch(obj) {
    let v = obj.value.toLowerCase();
    if (v) {
        $('#EWA_TREE_ROOT table').each(function() {
            if (this.id.indexOf("*") > 0) {
                return;
            }
            if ($(this).text().toLowerCase().indexOf(v) >= 0) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });
    } else {
        $('#EWA_TREE_ROOT table').show();
    }
}

function reloadCfgTree() {
    var ewa = EWA.F.FOS['@SYS_FRAME_UNID'];
    var nodeCur = ewa.GetNode(ewa._LastFocus);
    var u1 = new EWA_UrlClass(ewa.Url);
    u1.AddParameter("EWA_AJAX", 'INSTALL');
    var u = u1.GetUrl();
    var key = nodeCur.Key;
    $Install(u, 'xmls', function() {
        var node = ewa.GetNodeById(key);

        node.NodeShow();
        node.BookShow();
        node.Mark(true);
    });
}

function batchChangeParam() {
    var nodeCur = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    console.log(nodeCur);
    var key = nodeCur.Key;
    if (key == "EWA_TREE_ROOT") {
        return;
    }
    var x = '@xmlname';
    var i = 'frame_update';
    var p = "view_xmlname=" + key.toURL() + "&itemNames=__batchChangeParam__";
    EWA.UI.Dialog.OpenReloadClose('frame_update1', x, i, false, p);
    EWA.F.FOS["frame_update1"] = {
        Reload: function() {

        }
    }
}

function ImportXmlFile() {
    var nodeCur = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    console.log(nodeCur);
    if (nodeCur.Key.indexOf('*') > 0) {
        return;
    }

    var x = '@xmlname';
    var i = 'import_xml';
    var p = "path=" + nodeCur.Key.toURL();
    EWA.UI.Dialog.OpenReloadClose('ImportXmlFile1', x, i, false, p);
    EWA.F.FOS["ImportXmlFile1"] = {
        Reload: function() {

        }
    }
}

function ExportXml() {
    var nodeCur = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    console.log(nodeCur);
    if (nodeCur.Key.indexOf('*') > 0) {
        return;
    }

    var url = EWA.CP + '/EWA_DEFINE/cgi-bin/xml/?TYPE=GET_DOC_XML&xmlname=' + nodeCur.Key.toURL();
    window.open(url);

}

function NewPath() {
    var nodeCur = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    if (nodeCur.Key.indexOf('*') > 0) {
        return;
    }
    EWA.CurUI.NewNode('newpath');
}

function DeleteBaks() {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    if (node.Key.indexOf('*') > 0) {
        return;
    }
    var res = EWA.F.FOS['@SYS_FRAME_UNID'].Resources;
    var sConfirm = res['DEL_BAK_CONFIRM'].GetInfo();

    if (!confirm(sConfirm.replace('[A]', node.Text))) {
        return;
    }
    var url = EWA.CP + '/EWA_DEFINE/cgi-bin/xml/?TYPE=DELETE_BAKS';
    ajax = new EWA.C.Ajax();
    ajax.AddParameter("xmlname", node.Key);
    ajax.PostNew(url, function() {
        if (!ajax.IsRunEnd()) {
            return;
        }
        var s = ajax.GetRst();
        if (ajax.IsError()) {
            alert("ERROR:\r\n" + s);
        } else {
            var msg = res['DEL_BAK_MSG'].GetInfo();
            alert(msg.replace('[A]', s.trim()));
        }
        ajax = null;
    });
}

function DelXml() {
    EWA.F.FOS["@SYS_FRAME_UNID"].Delete(false);
}
var copyedXmlNode;

function CopyXml() {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    copyedXmlNode = node;
}

function PasteXml() {
    if (copyedXmlNode == null) {
        alert('请先复制XML文件');
        return;
    }
    var actionCmd = new EWA.F.Cmd();
    actionCmd.EWA_ACTION = "复制XML文件";
    actionCmd.COPY_FROM_XML = copyedXmlNode.Key;
    EWA.F.FOS["@SYS_FRAME_UNID"].NewNode(copyedXmlNode.Text, actionCmd);
}

function NewXml() {
    EWA.CurUI.NewNode('newfile.xml');
}

function Rename() {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    console.log(node);
    EWA.F.FOS["@SYS_FRAME_UNID"]._old_name = node.Text;
    var actionCmd = new EWA.F.Cmd();
    actionCmd.EWA_AFTER_EVENT = 'RenameAfter()';
    EWA.CurUI.Rename(null, actionCmd);
}

function RenameAfter(exp) {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    if (exp && exp.indexOf("@") === -1) {
        node.SetText(EWA.F.FOS["@SYS_FRAME_UNID"]._old_name);
        $Tip(exp);
    }
    var nodeParent = EWA.CurUI.GetNode(node.GetObject().parentNode);
    RenameChildren(node, nodeParent);
}

function RenameChildren(node, parentNode) {
    var keyParent = parentNode.Key == 'EWA_TREE_ROOT' ? '' : parentNode.Key;
    var text = node.Text;
    var objs = node.GetObject().getElementsByTagName('table');
    if (node.AddParas[0] == '3') {
        node.SetKey(keyParent + '*' + text);
    } else {
        node.SetKey(keyParent + '|' + text);
        for (var i = 0; i < node.Children.length; i++) {
            RenameChildren(node.Children[i], node);
        }
    }
}

function NewFrameFromTree(tag) {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    var url = './?XMLNAME=@xmlname&ITEMNAME=sql_create&F_XMLNAME=' +
        encodeURIComponent(node.Key) + '&FrameTag=' + tag;
    EWA.UI.Dialog.OpenWindow(url, 'createframe', 900, 520, false);
}

function NewFrame1() {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    var url = './?XMLNAME=@xmlname&ITEMNAME=ext_from_html&F_XMLNAME=' +
        encodeURIComponent(node.Key) + "&EWA_REDRAW=1";
    EWA.UI.Dialog.OpenWindow(url, 'createframe1', 400, 320, false);
}

function NewFrameToTree(key, name) {
    var nodeParent = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    var keys = key.split('*');
    var node = new EWA.F.T.Node();
    node.Key = key;
    node.ParentKey = keys[0];
    node.Text = name;
    node.Parent = nodeParent;
    node.AddParas[0] = 3;
    node.MenuGroup = 3;
    EWA.CurUI.Create(node);
}

function DeleteFrame() {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    if (node.Key.indexOf('*') == -1) {
        return;
    }
    if (confirm('你确定要删除' + node.Key + '么？')) {
        var url = EWA.CP + '/EWA_DEFINE/cgi-bin/xml/?TYPE=DELETE';
        Delete(node, url);
    }
}
var ajax;

function Delete(node, url) { //EWA UI TreeChange
    var keys = node.Key.split('*');
    ajax = new EWA.C.Ajax();
    ajax.AddParameter("XMLNAME", keys[0]);
    ajax.AddParameter("ITEMNAME", keys[1]);
    ajax.PostNew(url, DeleteChangeCallback);
    EWA.CurUI.IsPostChange = true;
}

function DeleteChangeCallback() {
    if (ajax._Http.readyState != 4) {
        return;
    }
    ajax.HiddenWaitting();
    EWA.CurUI.IsPostChange = false;
    if (ajax._Http.status == 200) {
        EWA.CurUI.DeleteAfter();
    } else {
        alert("ERROR:\r\n" + ajax._Http.statusText);
    }
    ajax = null;
}
var copyedFrame;
var pastedFrame;
var pastedNode;

function CopyFrame() {
    var node = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    if (node.AddParas[0] * 1 < 2) {
        alert('请复制配置项目');
        copyedFrame = null;
        return;
    }
    copyedFrame = node.Key;
}

function PasteFrame() {
    if (copyedFrame == null) {
        alert('请先复制配置项目');
        return;
    }
    pastedFrame = EWA.CurUI.GetNode(EWA.CurUI._LastFocus);
    if (pastedFrame.AddParas[0] * 1 != 1) {
        alert('请选择配置文件进行粘贴');
        return;
    }
    var copyName = copyedFrame.split('*')[1];
    var s1 = pastedFrame.Key + '*' + copyName;
    var m = 0;
    while (document.getElementById(s1)) {
        m++;
        s1 = pastedFrame.Key + '*' + copyName + m;
    }
    var toName = s1.split('*')[1];

    pastedNode = new EWA.F.T.Node();
    pastedNode.Key = pastedFrame.Key + "*" + toName;
    pastedNode.Text = toName;
    pastedNode.AddParas[0] = 3; //config item
    pastedNode.MenuGroup = 3; //menu group
    pastedFrame.AddChild(pastedNode);

    ajax = new EWA.C.Ajax();
    ajax.AddParameter("FROM", copyedFrame);
    ajax.AddParameter("TO", pastedFrame.Key);
    ajax.AddParameter("TONAME", toName);
    ajax.AddParameter("TYPE", "PASTE");
    var url = EWA.CP + '/EWA_DEFINE//cgi-bin/xml/';
    ajax.PostNew(url, PasteFrameCallback);

    EWA.CurUI.IsPostChange = true;
}

function PasteFrameCallback() {
    if (ajax._Http.readyState != 4) {
        return;
    }
    ajax.HiddenWaitting();
    EWA.CurUI.IsPostChange = false;
    if (ajax._Http.status == 200) {
        EWA.F.FOS['@SYS_FRAME_UNID'].Create(pastedNode);
    } else {
        alert("ERROR:\r\n" + ajax._Http.statusText);
    }
    ajax = null;
}

function loadOp() {
    if (!top.op) {
        return;
    }
    var u = './?' + top.op;
    var div = document.createElement('div');
    div.innerHTML = u;
    u = GetInnerText(div);

    console.log(u);

    top.op = null;
    var u1 = new EWA_UrlClass();
    u1.SetUrl(u);
    var v = u1.GetParameter('D_XMLNAME') + '*' + u1.GetParameter('D_ITEMNAME');
    if (v.substring(0, 1) != '|') {
        v = '|' + v;
    }
    EWA.F.FOS["@SYS_FRAME_UNID"].ShowNode(v);
    //EWA.F.GetFOSOne().ShowNode(v);
}
(function() {
    loadOp()
})();]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml/><PageSize/><ListUI/><MenuShow/><Menu/><Tree><Set AddPara1="Type" AddPara2="" AddPara3="" Key="key" Level="" LoadByLevel="1" MenuGroup="Type" Order="" ParentKey="ParentKey" RootId="" Text="name" Title="des"/></Tree><HtmlFrame><Set FrameBorder="1" FrameSize="230,*" FrameSubUrl="" FrameType="H"/></HtmlFrame><TreeIconSet><Set Close="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHdSURBVDjLjZNPaxNBGIdrLwURLznWgkcvIrQhRw9FGgy01IY0TVsQ0q6GFkT0kwjJId9AP4AHP4Q9FO2hJ7El2+yf7OzMbja7Sf0578QdNybFLjwszLu/Z2femZkDMEfI54FkRVL4Dw8l8zqXEawMBgM2HA6vR6MRZiHraDabH7KSrKBA4SAIEIahxvd9eJ6HbrerJKZpotVqaUkavkMC+iCKIsRxrN6EEAKMMViWpQT9fh/0k3a7PZZkBUPmqXAKCSjAOYdt21NLUj1JBYW7C6vi6BC8vKWKQXUXQcNA5Nh6KY7jqJl0Op1JwY/Hi7mLp/lT/uoA/OX2WLC3C9FoQBwfILKulIRmQv1wXfevwHmyuMPXS5Fv1MHrFSTmhSomnUvw/Spo3C+vg3/+pJZDPSGRFvilNV+8PUZvoziKvn+d3LZvJ/BelMDevIZXK2EQCiUhtMDM53bY5rOIGXtwjU3EVz/HM5Az8eplqPFKEfzLR91cOg8TPTgr3MudFx+d9owK7KMNVfQOtyQ1OO9qiHsWkiRRUHhKQLuwfH9+1XpfhVVfU0V3//k4zFwdzjIlSA/Sv8jTOZObBL9uugczuNaCP5K8bFBIhduE5bdC3d6MYIkkt7jOKXT1l34DkIu9e0agZjoAAAAASUVORK5CYII=" Filter="1" Open="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHdSURBVDjLjZNPaxNBGIdrLwURLznWgkcvIrQhRw9FGgy01IY0TVsQ0q6GFkT0kwjJId9AP4AHP4Q9FO2hJ7El2+yf7OzMbja7Sf0578QdNybFLjwszLu/Z2femZkDMEfI54FkRVL4Dw8l8zqXEawMBgM2HA6vR6MRZiHraDabH7KSrKBA4SAIEIahxvd9eJ6HbrerJKZpotVqaUkavkMC+iCKIsRxrN6EEAKMMViWpQT9fh/0k3a7PZZkBUPmqXAKCSjAOYdt21NLUj1JBYW7C6vi6BC8vKWKQXUXQcNA5Nh6KY7jqJl0Op1JwY/Hi7mLp/lT/uoA/OX2WLC3C9FoQBwfILKulIRmQv1wXfevwHmyuMPXS5Fv1MHrFSTmhSomnUvw/Spo3C+vg3/+pJZDPSGRFvilNV+8PUZvoziKvn+d3LZvJ/BelMDevIZXK2EQCiUhtMDM53bY5rOIGXtwjU3EVz/HM5Az8eplqPFKEfzLR91cOg8TPTgr3MudFx+d9owK7KMNVfQOtyQ1OO9qiHsWkiRRUHhKQLuwfH9+1XpfhVVfU0V3//k4zFwdzjIlSA/Sv8jTOZObBL9uugczuNaCP5K8bFBIhduE5bdC3d6MYIkkt7jOKXT1l34DkIu9e0agZjoAAAAASUVORK5CYII=" Test="P0"/><Set Close="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHtSURBVDjLjZM9T9tQFIYpQ5eOMBKlW6eWIQipa8RfQKQghEAKqZgKFQgmFn5AWyVDCipVQZC2EqBWlEqdO2RCpAssQBRsx1+1ndix8wFvfW6wcUhQsfTI0j33PD7n+N4uAF2E+/S5RFwG/8Njl24/LyCIOI6j1+v1y0ajgU64cSSTybdBSVAwSMmmacKyLB/DMKBpGkRRZBJBEJBKpXyJl/yABLTBtm1Uq1X2JsrlMnRdhyRJTFCpVEAfSafTTUlQoFs1luxBAkoolUqQZbmtJTYTT/AoHInOfpcwtVtkwcSBgrkDGYph+60oisIq4Xm+VfB0+U/P0Lvj3NwPGfHPTcHMvoyFXwpe7UmQtAqTUCU0D1VVbwTPVk5jY19Fe3ZfQny7CE51WJDXqpjeEUHr45ki9rIqa4dmQiJfMLItGEs/FcQ2ucbRmdnSYy5vYWyLx/w3EaMfLmBaDpMQvuDJ65PY8Dpnz3wpYmLtApzcrIAqmfrEgdZH1grY/a36w6Xz0DKD8ES25/niYS6+wWE8mWfByY8cXmYEJFYLkHUHtVqNQcltAvoLD3v7o/FUHsNvzlnwxfsCEukC/ho3yUHaBN5Buo17Ojtyl+DqrnvQgUtfcC0ZcAdkUeA+ye7eMru9AUGIJPe4zh509UP/AAfNypi8oj/mAAAAAElFTkSuQmCC" Filter="3" Open="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAHtSURBVDjLjZM9T9tQFIYpQ5eOMBKlW6eWIQipa8RfQKQghEAKqZgKFQgmFn5AWyVDCipVQZC2EqBWlEqdO2RCpAssQBRsx1+1ndix8wFvfW6wcUhQsfTI0j33PD7n+N4uAF2E+/S5RFwG/8Njl24/LyCIOI6j1+v1y0ajgU64cSSTybdBSVAwSMmmacKyLB/DMKBpGkRRZBJBEJBKpXyJl/yABLTBtm1Uq1X2JsrlMnRdhyRJTFCpVEAfSafTTUlQoFs1luxBAkoolUqQZbmtJTYTT/AoHInOfpcwtVtkwcSBgrkDGYph+60oisIq4Xm+VfB0+U/P0Lvj3NwPGfHPTcHMvoyFXwpe7UmQtAqTUCU0D1VVbwTPVk5jY19Fe3ZfQny7CE51WJDXqpjeEUHr45ki9rIqa4dmQiJfMLItGEs/FcQ2ucbRmdnSYy5vYWyLx/w3EaMfLmBaDpMQvuDJ65PY8Dpnz3wpYmLtApzcrIAqmfrEgdZH1grY/a36w6Xz0DKD8ES25/niYS6+wWE8mWfByY8cXmYEJFYLkHUHtVqNQcltAvoLD3v7o/FUHsNvzlnwxfsCEukC/ho3yUHaBN5Buo17Ojtyl+DqrnvQgUtfcC0ZcAdkUeA+ye7eMru9AUGIJPe4zh509UP/AAfNypi8oj/mAAAAAElFTkSuQmCC" Test="P0"/></TreeIconSet><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="no" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="读取XML文件数据" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="OnTreeNodeNew"><CallSet><Set CallIsChk="" CallName="生成XML文件" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="OnTreeNodeDelete"><CallSet><Set CallIsChk="" CallName="删除" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="复制XML文件"><CallSet><Set CallIsChk="" CallName="复制XML文件" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="OnTreeNodeRename"><CallSet><Set CallIsChk="" CallName="修改文件名称" CallType="ClassSet" Test=""/><Set CallIsChk="" CallName="RenameAfter" CallType="ScriptSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="OnTreeNodeMore"><CallSet><Set CallIsChk="" CallName="调用配置文件配置项" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.UserDirXmls" ConData="@linktype" MethodData="" MethodName="getxml" Name="读取XML文件数据" XmlTag="FrameData/Row"/><Set ClassName="com.gdxsoft.easyweb.define.ConfigUtils" ConData="" MethodData="@name,@ParentKey" MethodName="createNewXml" Name="生成XML文件" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.define.ConfigUtils" ConData="" MethodData="@key" MethodName="deleteFile" Name="删除" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.define.ConfigUtils" ConData="" MethodData="@COPY_FROM_XML,@EWA_TREE_PARENT_KEY,@EWA_TREE_TEXT" MethodName="copyXmlFile" Name="复制XML文件" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.define.ConfigUtils" ConData="" MethodData="@key, @name" MethodName="rename" Name="修改文件名称" XmlTag=""/><Set ClassName="com.gdxsoft.easyweb.define.UserDirXmls" ConData="" MethodData="@EWA_TREE_KEY" MethodName="loadXmlItems" Name="调用配置文件配置项" XmlTag="FrameData/Row"/></ClassSet><XmlSet/><XmlSetData/><ScriptSet><Set Name="RenameAfter" ScriptType="javascript"><Script><![CDATA[RenameAfter("@EWA_CLASS_CALL_EXCEPTION")]]></Script><CSSet/></Set></ScriptSet><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="读取XML文件数据" CallType="ClassSet" Test=""/></CallSet></Action><XItems/><Menus><Menu Name="renameXml"><Name><Set Name="renameXml"/></Name><DescriptionSet><Set Info="重命名" Lang="zhcn"/><Set Info="Rename" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd="Rename()"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="ItemPaste"><Name><Set Name="ItemPaste"/></Name><DescriptionSet><Set Info="粘贴配置项目" Lang="zhcn"/><Set Info="Paste" Lang="enus"/></DescriptionSet><Icon><Set Icon=""/></Icon><Cmd><Set Cmd="PasteFrame();"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="Item4"><Name><Set Name="Item4"/></Name><DescriptionSet><Set Info="&lt;hr&gt;" Lang="zhcn"/><Set Info="&lt;hr&gt;" Lang="enus"/></DescriptionSet><Icon><Set Icon=""/></Icon><Cmd><Set Cmd=""/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="newFrame"><Name><Set Name="newFrame"/></Name><DescriptionSet><Set Info="新建表单" Lang="zhcn"/><Set Info="New Frame" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/item.gif"/></Icon><Cmd><Set Cmd="NewFrameFromTree('Frame');"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="newListFrame"><Name><Set Name="newListFrame"/></Name><DescriptionSet><Set Info="新建列表" Lang="zhcn"/><Set Info="New ListFrame" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/item.gif"/></Icon><Cmd><Set Cmd="NewFrameFromTree('ListFrame');"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="newTree"><Name><Set Name="newTree"/></Name><DescriptionSet><Set Info="新建树" Lang="zhcn"/><Set Info="New Tree" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/item.gif"/></Icon><Cmd><Set Cmd="NewFrameFromTree('Tree');"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="newMenu"><Name><Set Name="newMenu"/></Name><DescriptionSet><Set Info="新建菜单" Lang="zhcn"/><Set Info="New Menu" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/item.gif"/></Icon><Cmd><Set Cmd="NewFrameFromTree('Menu');"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="newMultiGrid"><Name><Set Name="newMultiGrid"/></Name><DescriptionSet><Set Info="新建多维表格" Lang="zhcn"/><Set Info="New Multi Grid" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/item.gif"/></Icon><Cmd><Set Cmd="NewFrameFromTree('MultiGrid');"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="newFrame1"><Name><Set Name="newFrame1"/></Name><DescriptionSet><Set Info="从HTML新建表单" Lang="zhcn"/><Set Info="New Frame from HTML" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd="NewFrame1();"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="itemhr1_1"><Name><Set Name="itemhr1_1"/></Name><DescriptionSet><Set Info="&lt;hr&gt;" Lang="zhcn"/><Set Info="&lt;hr&gt;" Lang="enus"/></DescriptionSet><Icon><Set Icon=""/></Icon><Cmd><Set Cmd=""/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="copyXml"><Name><Set Name="copyXml"/></Name><DescriptionSet><Set Info="复制配置文件" Lang="zhcn"/><Set Info="Copy Xml File" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/copy.gif"/></Icon><Cmd><Set Cmd="CopyXml()"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="export_xml"><Name><Set Name="export_xml"/></Name><DescriptionSet><Set Info="导出XML文件" Lang="zhcn"/><Set Info="Export XML file" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd="ExportXml()"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="itemhr1_2"><Name><Set Name="itemhr1_2"/></Name><DescriptionSet><Set Info="&lt;hr&gt;" Lang="zhcn"/><Set Info="&lt;hr&gt;" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd=""/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="deleteXml"><Name><Set Name="deleteXml"/></Name><DescriptionSet><Set Info="删除配置文件" Lang="zhcn"/><Set Info="Delete Config File" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_STYLE/images/defined/del.gif"/></Icon><Cmd><Set Cmd="DelXml()"/></Cmd><Group><Set Group="1"/></Group></Menu><Menu Name="renameitem"><Name><Set Name="renameitem"/></Name><DescriptionSet><Set Info="重命名" Lang="zhcn"/><Set Info="Rename" Lang="enus"/></DescriptionSet><Icon><Set Icon=""/></Icon><Cmd><Set Cmd="Rename()"/></Cmd><Group><Set Group="3"/></Group></Menu><Menu Name="ItemCopy"><Name><Set Name="ItemCopy"/></Name><DescriptionSet><Set Info="复制" Lang="zhcn"/><Set Info="Copy" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/copy.gif"/></Icon><Cmd><Set Cmd="CopyFrame();"/></Cmd><Group><Set Group="3"/></Group></Menu><Menu Name="Item41"><Name><Set Name="Item41"/></Name><DescriptionSet><Set Info="&lt;hr&gt;" Lang="zhcn"/><Set Info="&lt;hr&gt;" Lang="enus"/></DescriptionSet><Icon><Set Icon=""/></Icon><Cmd><Set Cmd=""/></Cmd><Group><Set Group="3"/></Group></Menu><Menu Name="Item5"><Name><Set Name="Item5"/></Name><DescriptionSet><Set Info="删除" Lang="zhcn"/><Set Info="Delete Item" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_STYLE/images/defined/del.gif"/></Icon><Cmd><Set Cmd="DeleteFrame();"/></Cmd><Group><Set Group="3"/></Group></Menu><Menu Name="renamePath"><Name><Set Name="renamePath"/></Name><DescriptionSet><Set Info="重命名" Lang="zhcn"/><Set Info="Rename" Lang="enus"/></DescriptionSet><Icon><Set Icon=""/></Icon><Cmd><Set Cmd="Rename()"/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="batChangeParam"><Name><Set Name="batChangeParam"/></Name><DescriptionSet><Set Info="批量修改参数" Lang="zhcn"/><Set Info="Modify the parameters in bulk" Lang="enus"/></DescriptionSet><Icon><Set Icon=" "/></Icon><Cmd><Set Cmd="batchChangeParam()"/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="hr0"><Name><Set Name="hr0"/></Name><DescriptionSet><Set Info="&lt;hr&gt;" Lang="zhcn"/><Set Info="&lt;hr&gt;" Lang="enus"/></DescriptionSet><Icon><Set Icon=""/></Icon><Cmd><Set Cmd=""/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="newXml"><Name><Set Name="newXml"/></Name><DescriptionSet><Set Info="" Lang=""/><Set Info="新建配置文件" Lang="zhcn"/><Set Info="New Config File" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/cl.gif"/></Icon><Cmd><Set Cmd="NewXml()"/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="newPath"><Name><Set Name="newPath"/></Name><DescriptionSet><Set Info="新建目录" Lang="zhcn"/><Set Info="New Dir" Lang="enus"/></DescriptionSet><Icon><Set Icon="@rv_ewa_style_path/EWA_DEFINE/images/xml/clo.gif"/></Icon><Cmd><Set Cmd="NewPath()"/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="pasteXml"><Name><Set Name="pasteXml"/></Name><DescriptionSet><Set Info="粘贴配置文件" Lang="zhcn"/><Set Info="Paste XML File" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd="PasteXml()"/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="hhhrrr"><Name><Set Name="hhhrrr"/></Name><DescriptionSet><Set Info="&lt;hr&gt;" Lang="zhcn"/><Set Info="&lt;hr&gt;" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd=""/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="deletebaks"><Name><Set Name="deletebaks"/></Name><DescriptionSet><Set Info="清除Bak文件" Lang="zhcn"/><Set Info="Clear backups" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd="DeleteBaks()"/></Cmd><Group><Set Group="0"/></Group></Menu><Menu Name="import_xml"><Name><Set Name="import_xml"/></Name><DescriptionSet><Set Info="导入XML配置文件" Lang="zhcn"/><Set Info="Import the XML profile" Lang="enus"/></DescriptionSet><Icon/><Cmd><Set Cmd="ImportXmlFile()"/></Cmd><Group><Set Group="0"/></Group></Menu></Menus><Charts/><PageInfos><PageInfo Name="DEL_CFG_FILE"><Name><Set Name="DEL_CFG_FILE"/></Name><DescriptionSet><Set Info="你确定要删除改文件么" Lang="zhcn" Memo=""/><Set Info="Are you realy?" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="DEL_ITEM"><Name><Set Name="DEL_ITEM"/></Name><DescriptionSet><Set Info="你确定要删除么？" Lang="zhcn" Memo=""/><Set Info="Are you realy?" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="DEL_DIR"><Name><Set Name="DEL_DIR"/></Name><DescriptionSet><Set Info="你确定要删除改目录么？" Lang="zhcn" Memo=""/><Set Info="Are you realy?" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="DEL_BAK_CONFIRM"><Name><Set Name="DEL_BAK_CONFIRM"/></Name><DescriptionSet><Set Info="你确定要清除[A]的备份文件么？" Lang="zhcn" Memo=""/><Set Info="Are you sure remove [A] all backups?" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="DEL_BAK_MSG"><Name><Set Name="DEL_BAK_MSG"/></Name><DescriptionSet><Set Info="清除完毕,共[A]个文件" Lang="zhcn" Memo=""/><Set Info="Remove End,Total [A] files" Lang="enus" Memo=""/></DescriptionSet></PageInfo></PageInfos><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2014-12-16 13:46:58" Name="define_left_menu" UpdateDate="2022-07-26 17:18:36"><Page><Name><Set Name="define_left_menu"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo/><Cached><Set CachedSeconds="862024" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="tabls" Lang="zhcn" Memo=""/><Set Info="tabls" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<table border=0 class='EWA_TABLE' cellpadding=1 cellspaing=1 onmousedown='md(this,event)'
    style='width:500px;position:absolute;left:0px;top:0px;height:100%;'>
    <tr>
        <td class='EWA_TD_M' height=22 width=100>连接地址</td>
        <td class='EWA_TD_M'><input onblur='create_json()' type=text class='EWA_INPUT p' id='u'/></td>
    </tr>
     <tr>
        <td class='EWA_TD_M' height=22 width=100>默认页面</td>
        <td class='EWA_TD_M'><input onblur='create_json()' type=text class='EWA_INPUT p' id='default'/></td>
    </tr>  
    <tr>
        <td  class='EWA_TD_M' height=22 width=100>连接参数</td>
        <td  class='EWA_TD_M'><input type=text class='EWA_INPUT p' id='key'/></td>
    </tr>
    <tr>
        <td class='EWA_TD_M' height=22 width=100>标题</td>
        <td class='EWA_TD_M'><input type=text class='EWA_INPUT p' id='title'/></td>
    </tr>
   <tr>
        <td class='EWA_TD_M' height=22 width=100>描述字段</td>
        <td class='EWA_TD_M'><input type=text class='EWA_INPUT p' id='des'/></td>
    </tr>    
     <tr>
        <td class='EWA_TD_M' height=22 width=100>排序字段</td>
        <td class='EWA_TD_M'><input type=text class='EWA_INPUT p' id='order'/></td>
    </tr>  
     <tr>
        <td class='EWA_TD_M' height=22 width=100>主检索字段</td>
        <td class='EWA_TD_M'><input type=text class='EWA_INPUT p' id='search'/></td>
    </tr>     
    
    <tr>
        <td colspan=2 valign=top><textarea id='json' style='height:100%;width:100%'></textarea></td>
    </tr>  
</table>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[function set_para(obj) {
  var objref = $(last_md_obj).find('.p');
  var id = objref.attr('id');
  if (id == 'des' || id == 'order') {
    var ids = [];
    $('#pp input').each(function() {
      if (this.checked) {
        ids.push(this.value);
      }
    });
    objref.val(ids.join(','));
  } else {
    var thischk = obj.checked;
    $('#pp input').attr('checked', false);
    obj.checked = thischk;
    var v = '';
    if (id == 'key') {
      v = obj.value + '=@' + obj.value;
    } else if (id == 'title') {
      v = '@' + obj.value;
    } else if (id == 'search') {
      v = obj.value;
    }
    objref.val(v);
  }
  create_json();
}
function create_json() {
  var obj = {};
  $('.p').each(function() {
    var id = this.id;
    var v = this.value;
    obj[id] = v;
  });
  var fcode = JSON.stringify(obj);
  $('#json').val(fcode);

  if (window.parent.$X('PAGE$LeftJson$LeftJson')) {
    window.parent.$X('EWAC_SELECT_TYPE').value = 'Page';
    window.parent._EWAC_UI.ChangeType('Page');

    var ipt = window.parent.$X('PAGE$LeftJson$LeftJson');
    // 避免回车符被删除
    ipt.title = fcode;
    ipt.value = fcode;
    ipt.setAttribute("EWA_OLD_VALUE", ipt.value);
    ipt.setAttribute("EWA_VALUE", fcode);
    ipt.onblur();
  }
}
function add_paras() {
  if ($X('pp')) {
    return;
  }
  var ss = ["<table id='pp'  cellpadding=1 cellspaing=1 class='EWA_TABLE'"];
  ss.push(" style='display:none;position:absolute;left:510px;top:0px;width:300px'>");
  $(parent.frames[0].document.body).find('.EWA_TD_H').each(function() {
    var txt = $(this).find('div').text();
    var id = $(this).find('span').text();

    var s = "<tr><td class='EWA_TD_L'><input onclick='set_para(this)' type=checkbox value='" + id + "' id='ref_" + id + "'><label for='ref_" + id + "'>" + txt + "</label></td></tr>";
    ss.push(s);
  });
  ss.push("<table>");
  $('body').append(ss.join(''));
  if (window.parent.$X('PAGE$LeftJson$LeftJson')) {
    var ipt = window.parent.$X('PAGE$LeftJson$LeftJson');
    if (ipt.value == '') {
      return;
    }
    var json;
    try {
      eval('json=' + ipt.value);
      $('#json').val(ipt.value);
      for (var n in json) {
        $('#' + n).val(json[n]);
      }
    } catch(e) {
      $('#json').val(e);
    }

  }

}]]></Top><Bottom><![CDATA[var last_md_obj;
function md(obj, evt) {
  evt = evt || event;
  var t = evt.target || evt.srcElement;
  var o1 = t;
  while (o1.tagName != 'TR') {
    o1 = o1.parentNode;
  }
  if (last_md_obj == o1) {
    return;
  }
  $(last_md_obj).find('td').css('background-color', '#fff').css('color', '#000');
  $(o1).find('td').css('background-color', '#08c').css('color', '#fff');
  last_md_obj = o1;

  var id = $(o1).find('.p').attr('id');
  var val = $(o1).find('.p').val();
  if(id==null){
      return;
  }
  if (id == 'u' || id=='default') {
    $('#pp').hide();
  } else {
    $('#pp').show();
    $('#pp').find('input').attr('checked', false);
    var txt = val.split(',');
    for (var i = 0; i < txt.length; i++) {
      var ref_id = txt[i].trim();
      if ($X('ref_' + ref_id)) {
        $X('ref_' + ref_id).checked = true;
      }
    }
  }
}]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#fas i {
	width: 20px;
	height: 20px;
	margin: 5px;
	line-height: 20px;
	text-align: center;
	font-size: 15px;
	border: 1px solid #ccc;
}

#fas {
	color: #08c;
	width: 600px;
	height: 240px;
	overflow: auto;
	display: none;
	position: fixed;
	z-index: 1000000;
	background-color: #fff;
	padding: 4px;
	border: 1px solie #08c;
	border-radius: 5px;
}

#fas i:hover {
	color: red;
	border: 1px solid red;
	cursor: pointer;
}

.choose {
	color: #fff;
	cursor: pointer;
	background-color: #08c;
}

#box {
	
}

.cPSkin {
	z-index: 1231
}

#ide {
	width: 800px;
	height: 440px;
	display: none;
	position: fixed;
	background-color: #fff;
	border: 1px solid #ccc;
	padding: 4px;
	z-index: 100;
}

#ide .fa {
	width: 20px;
	height: 20px;
	line-height: 20px;
	text-align: center;
	position: absolute;
	left: -6px;
	top: -6px;
	color: #08c;
	background-color: #fff;
	border-radius: 10px;
	cursor: pointer;
}
#ide .fa:hover{
	color:red;
}
#ide iframe {
	width: 100%;
	height: 410px;
}

#ide_cover {
	position: fixed;
	left: 0px;
	top: 0px;
	bottom: 0px;
	right: 0px;
	background-color: rgba(0, 0, 0, 0.6);
	z-index: 99;
	display: none;
}

.color {
	height: 16px;
	width: 60px;
	border: 1px solid #ccc;
	float: right;
}

.two {
	width: 210px;
}

.paras:hover {
	color: red;
}

.split-para {
	position: absolute;
	top: 0px;
	left: 0px;
	width: 400px;
	bottom: 0px;
	overflow: auto;
	padding: 4px;
}

.split-box {
	position: absolute;
	top: 0px;
	left: 410px;
	width: 400px;
	bottom: 0px;
	overflow: auto;
}

.split-code {
	position: absolute;
	top: 0px;
	left: 820px;
	bottom: 0px;
	right: 0px;
}

#paras {
	background-color: #ccc;
}

#paras textarea {
	height: 15px;
}

#paras td {
	background-color: #fff;
	height: 22px;
	padding-left: 4px;
}

body {
	overflow: hidde;
	margin: 0px;
	background-color: #333
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-01-07 17:01:20" Name="define_main" UpdateDate="2022-07-26 17:18:44"><Page><Name><Set Name="define_tabs"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo/><Cached><Set CachedSeconds="862024" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="tabls" Lang="zhcn" Memo=""/><Set Info="tabls" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[
            
<script src="../js/EMP_TABS.js">
</script>
<table width="100%" height="100%" border="0" cellspacing="0" cellpadding="0" >
<tr>
						<td id='TD1' height="30"  bgcolor="#CDCDCD" valign="bottom">
</td>
</tr>
<tr>
						<td id='TD2'>
</td>
</tr>
</table>
					
          ]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[
            
document.body.style.overflow='hidden';
					
          ]]></Top><Bottom><![CDATA[
            var mm = new __EMP_TABS( $X('TD1'), $X('TD2'));
function AddTab(url,caption){
						mm.CreateTab(url,caption);
}
function __EMP_TAB_ONCLICK(id){
						mm.ShowTab(id );
						var obj=document.getElementById(mm._IdTabTag+id);
						//window.parent.frames[0].tmpGotoID(obj.innerHTML);
}
function __EMP_TAB_ONDBLCLICK(id) {
						mm.RemoveTab(id,true);
}
					
          ]]></Bottom></Set></AddScript><AddCss><Set><AddCss/></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2014-07-22 09:50:41" Name="define_redraw" UpdateDate="2022-07-26 17:19:02"><Page><Name><Set Name="define_redraw"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo/><Cached><Set CachedSeconds="862024" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="tabls" Lang="zhcn" Memo=""/><Set Info="tabls" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<table width=100% id='grp_info'>
    <tr>
        <td bgcolor=white>
            原始
        </td>
        <td bgcolor=white>
            新结构
            <input id='n_rows' size=3 maxlength=2 type=text value=10>
            行 x
            <input id='n_cols' type=text size=3 maxlength=2 value=4>
            列
            <input type=button onclick='createFrame()' value=生成>
            <input type=button onclick='create_json()' value=生成表达式>
            <!--<input type=button onclick='from_json()' value=从表达式生成>-->
        </td>
    </tr>
    <tr>
        <td width=300 valign=top id='frame'>
        </td>
        <td valign=top>
            <table id=new_tb cellspacing=1 cellpadding=1 class='EWA_TABLE'>
            </table>
            <textarea style='width: 100%; height: 80px' id=rst>
            </textarea>
        </td>
    </tr>
</table>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[function load_frame(x, i, json) {
	var json1 = null;
	if (json && json.length > 0) {
		try {
			eval('json1=' + json);
			$('#rst').val(json);
		} catch(e) {
			alert('Json表达式错误' + json);
			console.log(json);
		}
	}
	//EWA.F.Install('frame', x, i, '');
	var s = window.parent.frames[0].document.getElementsByTagName('form')[0].innerHTML;
	s = s.replace(/onmouseover/ig, 'a');
	var s1 = /<[\s]*?script[^>]*?>[\s\S]*?<[\s]*?\/[\s]*?script[\s]*?>/ig;
	s = s.replace(s1, '');
	//alert(s);
	$('#frame').html(s);

	show_frame(json1);
}
function show_frame(json1) {
	var tb = $('#frame .EWA_TABLE').last();
	var butrow = tb.find('.EWA_TD_B input');
	for (var i = 0; i < butrow.length; i++) {
		var tr = tb[0].insertRow( - 1);
		var td0 = tr.insertCell(0);
		td0.className = 'EWA_TD_L';
		td0.innerHTML = butrow[i].value;

		tr.id = butrow[i].id;
		var td1 = tr.insertCell( - 1);
		td1.appendChild(butrow[i]);
	}

	var objs = $(tb).find('.EWA_TD_L');
	objs.each(function() {
		this.innerHTML = '<input type=radio name="sfsdfkkdllksd" onclick="set_ref(this)">' + this.innerHTML;
	});
	$(tb).find('.ewa_td_r').hide();
	tb.css('width', 300);
	$('#frame table[id=Test1]').css('width', 300);

	if (json1) {
		from_json();
	} else {
		createFrame(10, 4);
	}
}
function createFrame(rows, cols) {
	if (rows == null) {
		rows = $('#n_rows').val();
		cols = $('#n_cols').val();
	}
	if ($('#new_tb tr').length > 0) {
		if (window.confirm("你确定要重新生成么？")) {
			$('#new_tb tr').remove();
		} else {
			return false;
		}
	}
	tb = $X('new_tb');
	for (var i = 0; i < rows; i++) {
		var tr = tb.insertRow( - 1);
		for (var m = 0; m < cols; m++) {
			var td0 = tr.insertCell( - 1);
			var td1 = tr.insertCell( - 1);
			td0.className = 'k0';
			td0.setAttribute('row', i);
			td0.setAttribute('col', m);
			td1.className = 'k1';
			td0.innerHTML = '<input type=checkbox onclick="copy_ref(this)">';
		}
	}
	return true;
}
function init() {

}
var ref_tr;
function set_ref(obj) {
	ref_tr = obj.parentNode.parentNode;
}
function remove_ref(obj, id) {
	var tr = $X(id);
	tr.style.display = '';
	var thisTd = obj.parentNode;
	thisTd.innerHTML = '<input type=checkbox onclick="copy_ref(this)">';
	var td1 = thisTd.nextElementSibling ? thisTd.nextElementSibling: thisTd.nextSibling;
	td1.innerHTML = "";
}
function copy_ref(obj) {
	if (!ref_tr) {
		alert('选择参考');
		obj.checked = false;
		return;
	}
	try {
		var thisTd = obj.parentNode;
		thisTd.innerHTML = '<input value="' + ref_tr.id.replace("_ewa_tr$", "") + '" type=checkbox checked onclick="remove_ref(this,&quot;' + ref_tr.id + '&quot;)">' + ref_tr.cells[0].innerText;
		var td1 = thisTd.nextElementSibling ? thisTd.nextElementSibling: thisTd.nextSibling;
		td1.innerHTML = ref_tr.cells[1].innerHTML;
		ref_tr.getElementsByTagName('input')[0].checked = false;
		ref_tr.style.display = 'none';
		ref_tr = null;
	} catch(e) {
		console.log(e);
		console.log(obj);
	}
}
function create_json() {
	tb = $X('new_tb');
	var o = {};
	o.rows = $('#n_rows').val();
	o.cols = $('#n_cols').val();
	o.map = [];
	$(tb).find('.k0').each(function() {
		var chk = this.getElementsByTagName('input')[0];
		if (chk.checked) {
			var o1 = {};
			o1.id = chk.value;
			o1.row = this.getAttribute('row');
			o1.col = this.getAttribute('col');
			o.map.push(o1);
		}
	});
	var r = JSON.stringify(o);
	$('#rst').val(r);
	window.parent.$X('PAGE$RedrawJson$RedrawJson').value = r;
	window.parent.$X('EWAC_SELECT_TYPE').value = 'Page';
	window.parent._EWAC_UI.ChangeType('Page');
	window.parent.$X('PAGE$RedrawJson$RedrawJson').focus();
	window.parent.$X('PAGE$RedrawJson$RedrawJson').blur();

}
function from_json() {
	var txt = $('#rst').val();
	if (txt == "") {
		alert('数据不存在');
		return;
	}
	var map1;
	eval('map1=' + txt);
	var rows = map1.rows;
	var cols = map1.cols;

	$('#n_rows').val(rows);
	$('#n_cols').val(cols);
	if (!createFrame(rows, cols)) {
		//user cancel
		return;
	}
	for (var i = 0; i < map1.map.length; i++) {
		var d = map1.map[i];
		var o = $X(d.id);
		if (!o) {
			alert(d.id + ' not exists!');
			continue;
		}
		ref_tr = o;
		var thisobj = $('td[row=' + d.row + '][col=' + d.col + '] input');
		if (thisobj.length > 0) {
			copy_ref(thisobj[0]);
		} else {
			console.log('td[row=' + d.row + '][col=' + d.col + ']  not exists!');
			continue;
		}
	}

}]]></Top><Bottom><![CDATA[addEvent(window,'load',init);]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[.k1 {
	width: 170px;
	background-color: #fff;
	line-height: 22px;
}

.k0 {
	width: 90px;
	background-color: #fff;
	line-height: 22px;
	padding-left: 4px;
    white-space:nowrap;
    overflow:hidden;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-02-05 11:35:41" Name="fields" UpdateDate="2022-09-28 18:51:50"><Page><Name><Set Name="fields"/></Name><FrameTag><Set FrameTag="ListFrame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="字段列表" Lang="zhcn" Memo=""/><Set Info="Fields" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="" Height="" HiddenCaption="" VAlign="" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<script type="text/javascript" src="@SYS_CONTEXTPATH/EWA_DEFINE/cgi-bin/xml/?TYPE=CFG_XML&XMLNAME=EwaDefine.xml&mode=JS&mode_name=_CFG_DEFINE"></script>
<script type="text/javascript" src='@SYS_CONTEXTPATH/EWA_DEFINE/cgi-bin/xml/?XMLNAME=@XMLNAME&ITEMNAME=fields&MODE=JS&MODE_NAME=_CFG_ITEM&TYPE=ALL'></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_CONFIG.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_DEFINE.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_SQL.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_STYLE/js/EWA_COLOR_MARK.js"></script>
<div id='divButton' style='display:none'>
    <input type='button' onclick="classCreate();" value='Class'>
    <input type='button' onclick="classDaoCreate();" value='ClassDao'>
    <input type='button' id='btnOpenSwaggerAnnotation' onclick="openSwaggerAnnotation(this);" value='SwaggerAnnotation'>
    |
    <input type='button' onclick="sqlInsertCreate();" value='INSERT'>
    <input type='button' onclick="sqlSelectCreate();" value='SELECT'>
    <input type='button' onclick="sqlSelectCreate1();" value='SELECT1'>
    <input type='button' onclick="sqlUpdateCreate();" value='UPDATE'>
    <input type='button' onclick="sqlDeleteCreate();" value='DELETE'>
    |
    <input type='button' onclick="opensql();" value='SQL'>

    <hr />
</div>
<script src="/emp-script-static/src/main/resources/EmpScriptV2/EWA_DEFINE/js/EWAC_SQL.js"></script>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[function opensql(){
  var u='./?xmlname='+'@xmlname'.toURL() +'&itemname=sql_run_main&db=@cfg&tablename=@tablename';
  window.parent.parent.AddTab(u,'SQL/@cfg');
}]]></Top><Bottom><![CDATA[var define;
var sql;
var cfg = "@cfg";
var tablename = "@tablename";
var userName = "@SYS_ADMIN_NAME";
var cmclass = new EWA_ColorMark('CLASS');

function sqlSelectCreate() {
    var s1 = sql.CreateSqlSelect();
    showSql(s1);
}

function sqlSelectCreate1() {
    var s1 = sql.CreateSqlSelect1();
    showSql(s1);
}

function sqlInsertCreate() {
    var s1 = sql.CreateSqlInsert();
    showSql(s1);
}

function sqlUpdateCreate() {
    var s1 = sql.CreateSqlUpdate();
    showSql(s1);
}

function sqlDeleteCreate() {
    var s1 = sql.CreateSqlDelete();
    showSql(s1);
}

function showSql(sql) {
    let pw = window.parent.frames[1];
    let p = $(pw.document.body);

    pw.ewa.setCode(sql, 'sql');
}

function classCreate() {
    var s1 = sql.CreateClass();
    showJava(s1, sql._ClassName);
}

function classDaoCreate() {
    var s1 = sql.CreateClassDao();
    showJava(s1, sql._ClassName + "Dao");
}

function showJava(code, className) {
    let pw = window.parent.frames[1];
    let p = $(pw.document.body);
    p.find('input[name=name]').val(className);

    pw.ewa.setCode(code, 'java');
}

function getSetting(tag) {
    if (window.localStorage && window.localStorage[tag]) {
        return window.localStorage[tag];
    }
}

function setSetting(tag, value) {
    if (window.localStorage) {
        window.localStorage[tag] = value;
    }
}

function openSwaggerAnnotation() {
    let but = $('[_ewa_event_id="btnOpenSwaggerAnnotation"]');
    if (sql.isCreateSwaggerAnnotations) { //已经打开
        sql.isCreateSwaggerAnnotations = false;
        $Tip('Swagger annotations closed');
        but.removeClass('opened');
    } else {
        sql.isCreateSwaggerAnnotations = true;
        $Tip('Swagger annotations opened');
        but.addClass('opened')
    }
    setSetting('isCreateSwaggerAnnotations', sql.isCreateSwaggerAnnotations);
}

function onload1() {
    console.log('onload1')
    EWA.CP = "@SYS_CONTEXTPATH";
    var t1 = tablename;
    define = new EWA_DefineClass('');
    var tbs = document.getElementsByTagName('table');
    var tb;
    for (var i = 0; i < tbs.length; i++) {
        if (tbs[i].id.indexOf('EWA_LF_') == 0) {
            tb = tbs[i];
            break;
        }
    }
    define._CreateFields(tb);
    sql = new EWAC_SqlCreator();
    sql.Init(t1, define.Fields.Fields);
    let isCreateSwaggerAnnotations = getSetting('isCreateSwaggerAnnotations') === 'true';
    if (isCreateSwaggerAnnotations) {
        sql.isCreateSwaggerAnnotations = true;
        $('[_ewa_event_id="btnOpenSwaggerAnnotation"]').addClass('opened');
    }


}


(function() {
    var linkType = '@linkType';
    if (linkType == 'CLASS') {
        $X('divButton').style.display = 'block';
        // 加载显示代码页面
        let u = new EWA_UrlClass(EWA.F.FOS["@sys_frame_unid"].Url);
        u.AddParameter("itemname", "classCode");
        parent.frames[1].location = u.GetUrl();
    }
    let t = setInterval(function() {
        if (window._CFG_DEFINE) {
            window.clearInterval(t);
            onload1();
        }
    }, 50);
})();]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#col_true {
    width: 16px;
    background-image: url('@rv_ewa_style_path/EWA_DEFINE/images/sql/key_p.gif');
    display: block;
    float: left;
    height: 16px;
}

#col_false {
    width: 16px;
    background-image: url('@rv_ewa_style_path/EWA_DEFINE/images/sql/column.gif');
    display: block;
    float: left;
    height: 16px;
}

#fk_false {
    display: none;
}

#columnname {
    height: 16px;
    line-height: 16px;
}
.opened::after {
    content: " \f00c";
    font-family: fontawesome;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize><Set AllowExport="" ColSize="" IsSplitPage="" KeyField="name" PageSize="" Recycle="" StatusField=""/></PageSize><ListUI><Set luAddPreRowFunc="" luButtons="1" luDblClick="" luDblClickIdx="" luSearch="" luSelect="S"/></ListUI><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="300,*" FrameSubUrl="" FrameType="V"/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set IsPostMsg="no" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Set><Set IsPostMsg="no" LogMsg="" Type="OnListFrameUpdateCell"><CallSet><Set CallIsChk="" CallName="修改字段描述" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet><Set Name="OnListFrameUpdateCell" SqlType="update" TransType="no"><Sql><![CDATA[EXEC PR_DES @tablename,@EWA_FIELD_ID,@description]]></Sql><CSSet/></Set></SqlSet><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="@cfg,@tablename" MethodName="getFieldsXml" Name="LoadFields" XmlTag="table/fields/field"/><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="@cfg, @tablename, @EWA_ACTION_KEY, @EWA_FIELD_val" MethodName="modifyColumnDescription" Name="修改字段描述" XmlTag=""/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="LoadFields" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="cccc"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="checkbox"/></Tag><Name><Set Name="cccc"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="选择" Lang="zhcn" Memo="a"/><Set Info="Select" Lang="enus" Memo="a"/></DescriptionSet><XStyle/><Style/><ParentStyle><Set ParentStyle="width:20px"/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="name" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="columnname"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="user"/></Tag><Name><Set Name="columnname"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="字段名" Lang="zhcn" Memo=""/><Set Info="Filed Name" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="name" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet><Set Lang="zhcn" User="&lt;span id='col_@pk'&gt;&amp;nbsp;&lt;/span&gt; &lt;span&gt;@name&lt;/span&gt;"/></UserSet><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="description"><Tag><Set IsLFEdit="1" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="description"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="描述" Lang="zhcn" Memo=""/><Set Info="Description" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="description" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="DataType"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="DataType"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="类型" Lang="zhcn" Memo=""/><Set Info="DataType" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml><Set IsHtml="0"/></IsHtml><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="databasetype" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="ColumnLength"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="ColumnLength"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="长度" Lang="zhcn" Memo=""/><Set Info="Length" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="columnsize" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="IsNull"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="IsNull"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="空值" Lang="zhcn" Memo=""/><Set Info="Null values" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="null" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="identity"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="span"/></Tag><Name><Set Name="identity"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="自增" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="identity" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="fk1"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="user"/></Tag><Name><Set Name="fk1"/></Name><GroupIndex/><InitValue/><DescriptionSet><Set Info="外键" Lang="zhcn" Memo=""/><Set Info="Foreign keys" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="0" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet><Set Lang="zhcn" User="&lt;span id='FK_fk'&gt; @fktablename.@fkcolumnname &lt;/span&gt;"/></UserSet><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2014-07-11 10:26:26" Name="ewa_utils" UpdateDate="2022-11-25 15:53:53"><Page><Name><Set Name="ewa_utils"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="工具" Lang="zhcn" Memo=""/><Set Info="Tools" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="1" VAlign="top" Width="800"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[function selectSql2DTTable() {
    var s = $('#src').val();
    var name = $('#para').val();
    if (name == '') {
        name = 'tmp';
        $('#para').val(name);
    }
    let configName = $('#configName').val();
    let u = "@EWA.CP/EWA_DEFINE/cgi-bin/xml/index.jsp?type=selectSql2DTTable";
    let data = {
        SQL: s,
        CONFIG_NAME: configName,
        PREFIX: name
    };
    $JP(u, data, (r) => {
        if (!r.RST) {
            alert(r.ERR);
            return;
        }
        $('#rst').val(r.JAVA);
        $X('rst').select();
        document.execCommand('copy');
        $Tip('Copied');
    });
}

function js_sb() {
    var s = $('#src').val();
    var name = $('#para').val();
    if (name == '') {
        name = 'ss';
        $('#para').val(name);
    }
    var ss = [];
    ss.push('var ' + name + ' = [];');
    var lines = s.split('\n');
    for (var i = 0; i < lines.length; i++) {
        var line = lines[i];
        line = line.trim();
        if (line.length == 0) {
            continue;
        }
        ss.push(name + '.push("' + line.replace(/\\/ig, "\\\\").replace(/\"/ig, '\\"') + '");');
    }
    $('#rst').val(ss.join('\n'));
    $X('rst').select();
    document.execCommand('copy');
    $Tip('Copied');
}

function java_sb() {
    var s = $('#src').val();
    var name = $('#para').val();
    if (name == '') {
        name = 'sb';
        $('#para').val(name);
    }
    var ss = [];
    ss.push('StringBuilder ' + name + '=new StringBuilder();');
    var lines = s.split('\n');
    for (var i = 0; i < lines.length; i++) {
        var line = lines[i];
        ss.push(name + '.append("' + line.replace(/\\/ig, "\\\\").replace(/\"/ig, '\\"') + '\\n");');
    }
    $('#rst').val(ss.join('\n'));
    $X('rst').select();
    document.execCommand('copy');
    $Tip('Copied');
}

function java_htmlcontrol() {
    var s = $('#src').val();
    var name = $('#para').val();
    if (name == '') {
        name = 'ht';
        $('#para').val(name);
    }
    var u1 = new EWA_UrlClass();
    u1.SetUrl(s);
    var x = u1.GetParameter("xmlname");
    var i = u1.GetParameter("itemname");
    var ss = [];
    ss.push('String xmlName = "' + x + '";');
    ss.push('String itemName = "' + i + '";');
    u1.RemoveParameter("xmlname");
    u1.RemoveParameter("itemname");

    ss.push('String paras = "' + u1.GetParas() + '";');
    ss.push('HtmlControl ' + name + ' = new HtmlControl();');
    ss.push(name + '.init(xmlName, itemName, paras, request, session, response);');
    ss.push('if (g_rv.s("EWA_AJAX") != null) {');
    ss.push('\tout.println(' + name + '.getHtml());');
    ss.push("\treturn;");
    ss.push("}");
    ss.push("// String html_" + name + " = " + name + ".getHtml();");

    $('#rst').val(ss.join('\n'));
    $X('rst').select();
    document.execCommand('copy');
    $Tip('Copied');
}

function js_url() {
    var s = $('#src').val();
    var name = $('#para').val();
    if (name == '') {
        name = 'u1';
        $('#para').val(name);
    }
    var u1 = new EWA_UrlClass();
    u1.SetUrl(s);
    var x = u1.GetParameter("xmlname");
    var i = u1.GetParameter("itemname");
    var ss = [];
    ss.push('var X = "' + x + '";');
    ss.push('var I = "' + i + '";');
    u1.RemoveParameter("xmlname");
    u1.RemoveParameter("itemname");

    var p1 = u1.GetUrl().split('?');
    var p = p1[p1.length - 1];
    ss.push('var P = "' + p + '";');
    ss.push('var ' + name + ' = $U2(X, I, P, true);');

    $('#rst').val(ss.join('\n'));
    $X('rst').select();
    document.execCommand('copy');
    $Tip('Copied');
}

function js_toUpper() {
    $('#rst').val($('#src').val().toUpperCase());
    $X('rst').select();
    document.execCommand('copy');
    $Tip('Copied');
}

function js_field_pr() {
    var a = $('#src').val();
    a = a.replace(/ /ig, '');
    a = a.replace(/\r/ig, '');
    a = a.replace(/\n/ig, '');
    a = a.replace(/,/ig, ", " + $('#para').val() + ".");
    a = $('#para').val() + "." + a;
    $('#rst').val(a);
    $X('rst').select();
    document.execCommand('copy');
    $Tip('Copied');
}]]></Top><Bottom/></Set></AddScript><AddCss><Set><AddCss><![CDATA[.EWA_TD{
    padding:0;
}
textarea{
    resize: none;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml><![CDATA[<table width=100% cellpadding=1 cellspacing=1>
    <tr>
        <td class='EWA_TD' style='padding-top:4px'>
            <textarea id=src style="width:100%;height:150px;" placeholder="请粘贴原始代码"></textarea>
        </td>
    </tr>
    <tr>
        <td class='EWA_TD'>
            <input id='para' type=text placeholder='变量名称'>
            <input id='configName' type=text placeholder='数据库连接'>
        </td>
    </tr>
    <tr>
        <td class='EWA_TD'>
            <input type='button' value='Java StringBuilder' onclick='java_sb()'>
            <input type='button' value='SelectSql2DTTable' onclick='selectSql2DTTable()'>
            <input type='button' value='Java HtmlControl' onclick='java_htmlcontrol()'>
            <input type='button' value='Js EWA Url' onclick='js_url()'>
            <input type='button' value='Js String' onclick='js_sb()'>
            <input type='button' value='toUpper' onclick='js_toUpper()'>
            <input type='button' value='字段加表名' onclick="js_field_pr()">
        </td>
    </tr>
    <tr>
        <td class='EWA_TD'>
            <textarea id=rst style="width:100%;height:180px;" placeholder="转换结果" readonly></textarea>
        </td>
    </tr>
</table>]]></FrameHtml></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-01-07 17:01:20" Name="define_right" UpdateDate="2022-12-02 12:05:35"><Page><Name><Set Name="define_right"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="设计XML" Lang="zhcn" Memo=""/><Set Info="Design XML" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_CONFIG.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_SKIN.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_DDL.js"></script>
<script type="text/javascript" src="@EWA.CP/EWA_DEFINE/cgi-bin/xml/?TYPE=EWAC_DDL_READ"></script>
<script>
    document.write("<scr" + "ipt src='@EWA.CP/EWA_DEFINE/cgi-bin/xml/?XMLNAME=" +
        "@D_XMlNAME".toURL() +
        "&ITEMNAME=@D_ITEMNAME&MODE=JS&MODE_NAME=_CFG_ITEM&TYPE=ALL'></sc" + "ript>")
</script>

<script src="@rv_ewa_style_path/EWA_STYLE/js/fas.js"></script>

<table width="100%" style="height:100vh" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td>
            <table width=100% height=100% cellpadding=0 cellspacing=0>
                 <tr>
                    <td height=25 id='TABS' onselectstart="return false;" valign=top>
                        <span id="S_PAGE" class=but1 onclick="switch_page(this)">
                            视图
                        </span>
                        <span id="S_CODE" class=but0 onclick="switch_page(this)">
                            代码
                        </span>
                        <span id="S_RES" class=but0 onclick="switch_page(this)">
                            资源
                        </span>
                        <span id="S_DRAW" class=but0 onclick="switch_page(this)">
                            重绘
                        </span>
                        <span id="S_BOX" class=but0 onclick="switch_page(this)">
                            BOX
                        </span>
                        <span id="S_LMENU" class=but0 onclick="switch_page(this)">
                            左引导
                        </span>
                        <span id="S_GEN" class=but0 onclick="openTest()">
                            打开测试
                        </span>
                        <span id="S_XML" class=but0 onclick="switch_page(this)">
                            XML
                        </span>
                    </td>
                </tr>
                <tr>
                    <td height="100%" id="I_PAGE">
                        <iframe id='F_PAGE' frameborder="0" width="100%" src='./?XMLNAME=@xmlname&ITEMNAME=define' height="100%">
                        </iframe>
                    </td>
                    <td height="100%" id="I_XML" style="display: none">
                        <iframe id='F_XML' name="XML" src1='@rv_ewa_style_path/EWA_DEFINE/js/CodeMirror/index.html' frameborder="0" width="100%" height="100%"></iframe>
                    </td>
                    <td height="100%" id="I_RES" style="display: none">
                        <iframe id='F_RES' frameborder="0" width="100%" height="100%" src1="./?XMLNAME=@xmlname&ITEMNAME=define_res"></iframe>
                    </td>
                    <td height="100%" id="I_CODE" style="display: none">
                        <iframe id='F_CODE' frameborder="0" width="100%" height="100%" src='./?XMLNAME=@xmlname&ITEMNAME=define_code'>
                        </iframe>
                    </td>
                    <td height="100%" id="I_DRAW" style="display: none">
                        <iframe frameborder="0" width="100%" height="100%" src1='./?XMLNAME=@xmlname&ITEMNAME=define_redraw'>
                        </iframe>
                    </td>
                    <td height="100%" id="I_BOX" style="display: none">
                        <iframe frameborder="0" width="100%" height="100%" src1='./?XMLNAME=@xmlname&ITEMNAME=define_box&@EWA_QUERY'>
                        </iframe>
                    </td>
                    <td height="100%" id="I_LMENU" style="display: none">
                        <iframe frameborder="0" width="100%" height="100%" src1='./?XMLNAME=@xmlname&ITEMNAME=define_left_menu&@EWA_QUERY'>
                        </iframe>
                    </td>
                </tr>
               
            </table>
        </td>
        <td width=260 id='props'>
            <table width=100% height=100% cellpadding=0 cellspacing=0 border=0>
                <tr>
                    <td height=20 width=100% style="padding: 3px;">
                        <select>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan=2 id=bb style="position:relative">
                        <div style="position:absolute;top:0;left:0;right:0;bottom:0;overflow-y: scroll" id=aa>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<div style='display: none'>
    <form action="@SYS_CONTEXTPATH/EWA_DEFINE/cgi-bin/xml/" method=post target=XML>
        <input name="TYPE" value="VIEW">
        <textarea name="XML">
        </textarea>
    </form>
</div>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[document.body.style.overflow = 'hidden';
var ajax;
var xmlName = "@D_XMLNAME";
var itemName = "@D_ITEMNAME";
var ewa_res_root = "@RV_EWA_STYLE_PATH";

function saveXml(a) { //保存xml
    var t1 = (new Date()).getTime();
    if (window.timer_save) {
        //避免点击多次保存按钮
        var span = t1 - window.timer_save;
        if (span < 1000) {
            console.log(span);
            window.timer_save = t1;
            return;
        }
    }

    window.timer_save = t1;
    var xml = createXml();
    EWAC.SaveXml(xmlName.toURL(), itemName.toURL(), xml);
}

//---------------------------------------
function showXml() {
    var s1 = createXml();
    window.__TYPE__ = 'xml';

    var u = '../../EWA_DEFINE/cgi-bin/xml/?TYPE=VIEW';
    $.post(u, {
            XML: s1
        },
        function(result) {
            window.__VAL__ = result;
            if (!window.frames[1].editor) {
                window.frames[1].aa()
            } else {
                window.frames[1].editor.setValue(result);
            }
        });

}
//-----------------------------------
function updateView() {
    var w = window.frames[0];
    //"<style>" + _EWAC_UISkin.CreateStyle() + "</style>" +
    var s = _EWAC_UISkin.CreateHtml();
    // 	w.location = "about:blank";
    // 	w.document.open();
    // 	w.document.write(s);
    // 	w.document.close();
    w.document.body.innerHTML = s;
}

function createXml() {
    return _EWAC_User.CreateXml();
}

function changeItems(tag) {
    _EWAC_UI.ChangeItems(tag);
}
var curId = 'S_PAGE';

function addXmlEditable(win) {
    win._xml_edit = false;
    // console.log(win.location.href)
    let s = `<div style="position:fixed;
        left:0;
        top:0;
        height: 30px;
        line-height: 30px;
        background-color: lightyellow;
        z-index: 10;
        right: 0;
        font-size: 14px;
        padding-left: 60px;
"><a href="javascript:void(0)" style="padding-right: 20px">编辑</a><a href="javascript:void(0)">保存</a></div>`;
    let o = win.$(s);
    o.find('a:eq(0)').on("click", function() {
        console.log(win.location.href)
        if (win._xml_edit) {
            win.editor.setOption('readOnly', true);
            $(this).text($(this).text().replace("...", ""));
            win._xml_edit = false;
            return;
        }
        if (!confirm("您确定要进行编辑么？此操作危险性较大，需要对XML结构有充分了解")) {
            return;
        }
        win._xml_edit = true;
        $(this).text($(this).text() + " ... ");
        win.editor.setOption('readOnly', false);
    });
    o.find("a:eq(1)").on("click", function() {
        if (!win._xml_edit) {
            $Tip("只读模式，不能保存");
            return;
        }
        let xml = new win.EWA_XmlClass();
        xml.LoadXml(win.editor.getValue());
        let err = xml.XmlDoc.firstChild.getElementsByTagName('parsererror');
        if (err.length > 0) {
            console.log(err);
            alert(err[0].innerText);
            return;
        }
        let url = EWA.CP + "/EWA_DEFINE/cgi-bin/xml/?TYPE=SAVE";
        let data = {
            XMLNAME: xmlName,
            ITEMNAME: itemName,
            XML: win.editor.getValue()
        }
        $JP2(url, data, function(rst) {
            if (rst != null && rst.indexOf("alert('ok')") >= 0) {
                $Tip('Saved，你需要重新加载此页面更新显示', 2000);
                return;
            }
            alert(rst);
        });

    });
    win.$(win.document.body).append(o);
    let t = setInterval(() => {
        window.clearInterval(t);
        win.$('#code').css('top', 30);
    }, 10);
}

function switch_page(obj) {
    var id = obj.id;
    if (id == curId) {
        return;
    }
    $X('props').style.display = '';

    document.getElementById(curId).className = 'but0';
    obj.className = 'but1';
    var pageOld = get_frame(curId);
    pageOld.style.display = 'none';
    var pageNew = get_frame(id);
    pageNew.style.display = '';
    curId = id;
    $('#props').show();
    if (id == 'S_GEN' || id == 'S_GEN.NET') {
        if (IsNew == 1) {
            if (window.confirm('需要保存文件，执行么？')) {
                saveXml();
            }
        } else {
            var url;
            if (id == 'S_GEN') {
                url = './?XMLNAME=@D_XMLNAME&ITEMNAME=@D_ITEMNAME';
                window.frames[2].location = url;
            } else {
                url = "./?XMLNAME=@D_XMLNAME&ITEMNAME=@D_ITEMNAME";
                window.frames[3].location = url;
            }
        }
    }
    if (id == 'S_XML') {
        var if_res = getIframeFromWindow(window.frames[1]);
        if ($(if_res).attr('src1')) {
            var src1 = $(if_res).attr('src1').replace(/\|/ig, '%7c');
            $(if_res).attr('src', src1).attr('src1', null);
            ifameLoaded(if_res, function(iframe, w1) {
                w1.parent.showXml();
                addXmlEditable(w1);
            });
        } else {
            window.showXml();
        }
        $('#props').hide();
    } else if (id == 'S_RES') {
        var s1 = _EWAC_UI.CreateResList();
        var if_res = getIframeFromWindow(window.frames[2]);
        if ($(if_res).attr('src1')) {
            var src1 = $(if_res).attr('src1');
            $(if_res).attr('src', src1).attr('src1', null);
            ifameLoaded(if_res, function(iframe, w1) {
                w1.document.forms[0].innerHTML = s1;
            });
        } else {
            window.frames[2].document.forms[0].innerHTML = s1;
        }
        $('#props').hide();
    } else if (id == 'S_CODE') {
        var if_res = getIframeFromWindow(window.frames[3]);
        if ($(if_res).attr('src1')) {
            var src1 = $(if_res).attr('src1').replace(/\|/ig, '%7c');
            $(if_res).attr('src', src1).attr('src1', null);
            ifameLoaded(if_res, function(iframe, w1) {
                w1.aa();
            });
        } else {
            window.frames[3].aa();
        }

        $('#props').show();
    } else if (id == 'S_DRAW') {
        var if_res = getIframeFromWindow(window.frames[4]);
        if ($(if_res).attr('src1')) {
            var src1 = $(if_res).attr('src1');
            $(if_res).attr('src', src1).attr('src1', null);
            ifameLoaded(if_res, function(iframe, w1) {
                w1.load_frame(xmlName, itemName, $X('PAGE$RedrawJson$RedrawJson').value);
            });
        } else {
            window.frames[4].load_frame(xmlName, itemName, $X('PAGE$RedrawJson$RedrawJson').value);
        }

        $('#props').hide();
    } else if (id == 'S_BOX') {
        var if_res = getIframeFromWindow(window.frames[5]);
        if ($(if_res).attr('src1')) {
            var src1 = $(if_res).attr('src1').replace(/\|/ig, '%7c');
            $(if_res).attr('src', src1).attr('src1', null);
            ifameLoaded(if_res, function(iframe, w1) {

            });
        }
        //window.frames[4].load_frame(xmlName,itemName, $X('PAGE$RedrawJson$RedrawJson').value); 
        $('#props').hide();
    } else if (id == 'S_LMENU') {
        var if_res = getIframeFromWindow(window.frames[6]);
        if ($(if_res).attr('src1')) {
            var src1 = $(if_res).attr('src1').replace(/\|/ig, '%7c');
            $(if_res).attr('src', src1).attr('src1', null);
            ifameLoaded(if_res, function(iframe, w1) {
                w1.add_paras();
            });
        } else {
            window.frames[6].add_paras();
        }

        $('#props').hide();
    }
    pageOld = pageNew = null;
}

function ifameLoaded(chkIframe, func) {
    if (chkIframe.contentWindow.location != "about:blank" &&
        chkIframe.contentWindow.document &&
        chkIframe.contentWindow.document.readyState == 'complete'
    ) {
        func(chkIframe, chkIframe.contentWindow);
    } else {
        setTimeout(function() {
            ifameLoaded(chkIframe, func);
        }, 300);
    }
}

function getIframeFromWindow(w) {
    var w1 = null;
    $('iframe').each(function() {
        if (this.contentWindow == w) {
            w1 = this;
        }
    });
    return w1;
}

function openTest() {
    //saveXml();
    if (window.localStorage && localStorage["ewa_define_test_path"]) {
        let url = localStorage["ewa_define_test_path"] + "?XMLNAME=" +
            xmlName.replace(/\|/g, '/') + "&ITEMNAME=" + itemName.toURL();
        window.open(url);
    } else {
        $Tip('可以设置localStorage["ewa_define_test_path"]来定义打开测试的路径');
        console.log('可以设置localStorage["ewa_define_test_path"]来定义打开测试的路径');
        setTimeout(function() {
            window.open("./?XMLNAME=" + xmlName.replace(/\|/g, '/') + "&ITEMNAME=" + itemName.toURL());
        }, 1000);
    }
}

function get_frame(id) {
    var id1 = "I_" + id.split('_')[1];
    return document.getElementById(id1);
}

function copyRes(obj) {
    var win = window.frames[3];
    var s1 = _EWAC_UI.CreateResList();
    var doc = win.document;
    doc.body.innerHTML = s1;
    var inputs = doc.getElementsByTagName('input');
    var topWin = window.parent.parent.parent; //define_main.jsp
    topWin.EWA_RES_COPY = new Object();
    var o = topWin.EWA_RES_COPY;
    for (var i = 0; i < inputs.length; i++) {
        var o1 = inputs[i];
        o[o1.id] = o1.value;
    }
    obj.title = '复制了' + inputs.length + '信息';
}

function pasteRes(res) {
    var win = window.frames[3];
    var s1 = _EWAC_UI.CreateResList();
    var doc = win.document;
    doc.body.innerHTML = s1;
    var inputs = doc.getElementsByTagName('input');
    for (var i = 0; i < inputs.length; i++) {
        var o1 = inputs[i];
        if (res[o1.id] != null) {
            o1.value = res[o1.id];
            o1.onblur();
        }
    }
}]]></Top><Bottom><![CDATA[var IsNew = "@NEW";
var _EWAC_User, _EWAC_UI, _EWAC_UISkin;
var viewChangeTimer;

function onload1() {
    if (IsNew == "1") {
        return;
    }
    _EWAC_User = new EWAC_UserClass();
    _EWAC_User = new EWAC_UserClass();
    _EWAC_User.Load();

    _EWAC_UI = new EWAC_UIClass(document.getElementById('aa'), _EWAC_User);
    _EWAC_UI.ShowPageParameters();
    _EWAC_UISkin = new EWAC_UISkinClass(_EWAC_User);

    var s1 = _EWAC_UISkin.CreateHtml();
    var s2 = _EWAC_UISkin.CreateStyle();
    var doc = window.frames[0].document;
    //   doc.open();
    //   doc.write('<html><head><style>'+s2+'</style></head>');
    //   doc.write('<body>'+s1+'</body></html>');
    //   doc.close();
    //console.log(s1)
    doc.body.innerHTML = s1;
    viewChangeTimer = window.setInterval(viewChangeMointer, 212);

    var frameTag = $X('PAGE$FrameTag$FrameTag').value.toLowerCase();

    $('#S_DRAW').hide();
    $('#S_BOX').hide();
    $('#S_LMENU').hide();

    if (frameTag == 'listframe') {
        $('#S_BOX').show();
        $('#S_LMENU').show();
    } else if (frameTag == 'frame') {
        $('#S_DRAW').show();
    }
}

function setSize() {
    //var size=EWA.UI.Utils.GetDocSize(window);
    //$X('aa').style.height=size.H-30+'px';
}

function viewChangeMointer() {
    if (_EWAC_UI.IsChanged) {
        window.clearInterval(viewChangeTimer);
        _EWAC_UI.IsChanged = false;
        updateView();
        viewChangeTimer = window.setInterval(viewChangeMointer, 212);
    }
}

function loadNew(xmlItem, itemCfg) {
    _EWAC_User = new EWAC_UserClass();
    _EWAC_User.Load(xmlItem, itemCfg);

    _EWAC_UI = new EWAC_UIClass($X('aa'), _EWAC_User);
    _EWAC_UI.ShowPageParameters();
    _EWAC_UISkin = new EWAC_UISkinClass(_EWAC_User);

    var s1 = _EWAC_UISkin.CreateHtml();
    var s2 = _EWAC_UISkin.CreateStyle();
    var doc = window.frames[0].document;
    doc.open();
    doc.write('<html><head><style>' + s2 + '</style></head>');
    doc.write('<body>' + s1 + '</body></html>');
    doc.close();
    viewChangeTimer = window.setInterval(viewChangeMointer, 212);

    var frameTag = $X('PAGE$FrameTag$FrameTag').value.toLowerCase();
    $('#S_DRAW').hide();
    $('#S_BOX').hide();

    if (frameTag == 'listframe') {
        $('#S_BOX').show();
    } else if (frameTag == 'frame') {
        $('#S_DRAW').show();
    }
}


AddEvent(window, 'load', function() {
    EWAC_DDL.init();
    setSize();
    if (IsNew == "1") {
        return;
    }
    var names = EWA.F.FOS["@SYS_FRAME_UNID"].Resources.names.GetInfo().split(',');
    var spans = $X('TABS').getElementsByTagName('span');
    for (var i = 0; i < names.length; i++) {
        spans[i].innerHTML = names[i];
    }
    onload1();
    fas.loadFaIcons();
});










]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[table#Test1{
    table-layout: fixed;
}
#props .fa {
    font-family: FontAwesome !important;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos><PageInfo Name="names"><Name><Set Name="names"/></Name><DescriptionSet><Set Info="视图,代码,资源,重绘,BOX,左引导,打开测试,XML" Lang="zhcn" Memo=""/><Set Info="View, Code, Resources, Redraw, BOX, left , Test, XML" Lang="enus" Memo=""/></DescriptionSet></PageInfo></PageInfos><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2022-07-26 09:44:27" Name="classCode" UpdateDate="2023-02-10 14:59:17"><Page><Name><Set Name="classCode"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="0" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType=""/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="Class code" Lang="zhcn" Memo=""/><Set Info="System cache" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="" PageAttValue=""/></PageAttributeSet><RowAttributeSet/><GroupSet><Set GroupInfo="" GroupShow="" Lang=""/></GroupSet><Size><Set FrameCols="C1" HAlign="center" Height="100%" HiddenCaption="1" TextareaAuto="" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">

<script src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js" type="text/javascript"></script>

<script src="@rv_ewa_style_path/third-party/ace/v1.4.12/src-min/ace.js" type="text/javascript"></script>
<script src="@rv_ewa_style_path/third-party/ace/v1.4.12/src-min/ext-language_tools.js" type="text/javascript"></script>
<script src="@rv_ewa_style_path/third-party/js-beautify/v1.13.0/lib/beautify.js"></script>
]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[(function() {
    let ewa = EWA.F.FOS["@sys_frame_unid"];
    var editor, mode;

    function saveJava() {
        let o = $('#f_@sys_frame_unid');
        var name = o.find("input[name=name]").val();
        var packagename = o.find("input[name=package]").val();
        var path = o.find("input[name=path]").val();

        if (!path) {
            alert('Save path must set');
            return;
        }

        var java = o.find("input[name=java]").val();

        var u = EWA.CP + "/EWA_DEFINE/cgi-bin/xml/";
        var data = {
            name: name,
            packagename: packagename,
            path: path,
            java: java,
            TYPE: "SAVE_JAVA"
        }
        $JP(u, data, function(rst) {
            if (!rst.RST) {
                alert(rst.ERR);
            } else {
                $Tip("Ok");
            }
        });
        return false;
    }

    function beautify_code() {
        var p = editor.getCursorPosition();
        var s;
        if (mode == 'ace/mode/javascript') {
            s = js_beautify(getText());
        } else if (mode == 'ace/mode/html' || mode == 'ace/mode/xml') {
            s = html_beautify(getText());
        } else if (mode == 'ace/mode/css') {
            s = css_beautify(getText());
        } else if (mode == 'ace/mode/sql') {
            beautify_code_sql();
            return;
        } else {
            $Tip('不支持类型格式化');
            return;
        }
        editor.setValue(s, 1);
        editor.moveCursorToPosition(p);
        editor.selection.clearSelection();
    }

    function getText() {
        return editor.getValue();
    }

    function setCode(code, type) {
        $('#div_@sys_frame_unid').attr('lang', type)
        if (type == 'sql') {
            mode = 'ace/mode/sql';
        } else {
            mode = 'ace/mode/java';
            code = js_beautify(code);
        }
        editor.session.setMode(mode);

        editor.setValue(code, 1);
        $('#f_@sys_frame_unid [name=java]').val(code);
        if (type == 'sql') {
            beautify_code_sql();
        }
    }

    function change_code_theme(obj) {
        editor.setTheme(obj.value);
        window.localStorage["EWA_CODE_THENE"] = obj.value;
    }

    function change_font_size(obj) {
        editor.setFontSize(obj.value);
        window.localStorage["EWA_CODE_FONTSIZE"] = obj.value;
    }

    function getSetting(tag) {
        if (window.localStorage && window.localStorage[tag]) {
            return window.localStorage[tag];
        }
    }

    function setSetting(tag, value) {
        if (window.localStorage) {
            window.localStorage[tag] = value;
        }
    }

    function beautify_code_sql() {
        let txt = getText();
        let u = '@EWA.CP/EWA_DEFINE/cgi-bin/xml/?type=format&mode=sql';
        let data = {
            code: txt
        };
        $JP(u, data, function(rst) {
            let code = rst['text'];
            editor.setValue(code, 1);
            $('#f_@sys_frame_unid [name=java]').val(code);
        });
    }

    (function() {
        ace.require("ace/ext/language_tools");
        editor = ace.edit("code");
        var theme_code = "ace/theme/cobalt";
        if (window.localStorage && window.localStorage["EWA_CODE_THENE"]) {
            let v = window.localStorage["EWA_CODE_THENE"];
            let obj = document.getElementById('theme');
            for (let i = 0; i < theme.options.length; i++) {
                let v1 = obj.options[i].value;
                if (v1 == v) {
                    theme_code = v1;
                    obj.value = v1;
                    break;
                }
            }
        }
        editor.setTheme(theme_code);

        // 设置字体大小
        if (window.localStorage && window.localStorage["EWA_CODE_FONTSIZE"]) {
            let v = window.localStorage["EWA_CODE_FONTSIZE"];
            let selectFontsize = document.getElementById('editor_font_size');
            if (v) {
                selectFontsize.value = v;
                editor.setFontSize(v);
            }
        }
        editor.getSession().setUseWrapMode(true);
        editor.setOptions({
            enableBasicAutocompletion: true,
            enableSnippets: true,
            enableLiveAutocompletion: true
        });

        editor.setOption('readOnly', true);
        editor.$blockScrolling = Infinity;

        let p = $('#f_@sys_frame_unid');
        var v = getSetting('EWA_DEFINE_JAVA_SAVED_PATH');
        p.find('input[name=path]').on('blur', function(e) {
            setSetting('EWA_DEFINE_JAVA_SAVED_PATH', this.value);
        }).val(v);
        var v1 = getSetting('EWA_DEFINE_JAVA_PACKAGE');
        p.find('input[name=package]').on('blur', function(e) {
            setSetting('EWA_DEFINE_JAVA_PACKAGE', this.value);
        }).val(v1);
        p.find("#Save").on("click", function(e) {
            return saveJava();
        });
    })();

    ewa.setSetting = setSetting;
    ewa.getSetting = getSetting;

    ewa.editor = editor;
    ewa.getText = getText;
    ewa.setCode = setCode;
    ewa.change_code_theme = change_code_theme;
    ewa.change_font_size = change_font_size;

    window.ewa = ewa;
})();]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[body{
    overflow: hidden;
    margin: 0;
}
#f_@SYS_FRAME_UNID .EWA_TD_M {
    width: 33%;
}

#f_@SYS_FRAME_UNID input {
    font-size: 20px;
    height:36px;
}

#f_@SYS_FRAME_UNID {
    display: none;
}

[lang=java] #f_@SYS_FRAME_UNID {
    display: block;
    height: 40px;
}

#code {
    height: calc(100vh - 20px);
}

[lang=java] #code {
    height: calc(100vh - 20px - 40px);
}

#status {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 20px;
    line-height: 20px;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson><Set><RedrawJson/></Set></RedrawJson><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml><![CDATA[<div id="div_@SYS_FRAME_UNID" style="height:100vh;width:100vw">
    <form autocomplete="off" id="f_@SYS_FRAME_UNID" method="post">
        <table id="EWA_FRAME_@SYS_FRAME_UNID" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td class="EWA_TD_B">
                    {Save#ITEM}
                </td>
                <td class="EWA_TD_M">{package#ITEM}</td>
                <td class="EWA_TD_M">{name#ITEM}</td>
                <td class="EWA_TD_M">{path#ITEM}</td>
            </tr>
        </table>
        <input type="hidden" name="java">
    </form>
    
    <div id='code'></div>

    <div id='status'>
        <span><a>Font:</a> <select id='editor_font_size' 
            onchange="EWA.F.FOS['@SYS_FRAME_UNID'].change_font_size(this)">
                <option value='9px'>9px</option>
                <option value='10px'>10px</option>
                <option value='11px'>11px</option>
                <option value='12px' selected>12px</option>
                <option value='13px'>13px</option>
                <option value='14px'>14px</option>
                <option value='15px'>15px</option>
                <option value='16px'>16px</option>
                <option value='16px'>17px</option>
                <option value='16px'>18px</option>
            </select>
        </span>
        <span> <a>Theme:</a>
            <select id="theme" size="1" onchange="EWA.F.FOS['@SYS_FRAME_UNID'].change_code_theme(this)">
                <optgroup label="Bright">
                    <option value="ace/theme/chrome">Chrome</option>
                    <option value="ace/theme/clouds">Clouds</option>
                    <option value="ace/theme/crimson_editor">Crimson Editor</option>
                    <option value="ace/theme/dawn">Dawn</option>
                    <option value="ace/theme/dreamweaver">Dreamweaver</option>
                    <option value="ace/theme/eclipse">Eclipse</option>
                    <option value="ace/theme/github">GitHub</option>
                    <option value="ace/theme/iplastic">IPlastic</option>
                    <option value="ace/theme/solarized_light">Solarized Light</option>
                    <option value="ace/theme/textmate">TextMate</option>
                    <option value="ace/theme/tomorrow">Tomorrow</option>
                    <option value="ace/theme/xcode">XCode</option>
                    <option value="ace/theme/kuroir">Kuroir</option>
                    <option value="ace/theme/katzenmilch">KatzenMilch</option>
                    <option value="ace/theme/sqlserver">SQL Server</option>
                </optgroup>
                <optgroup label="Dark">
                    <option value="ace/theme/ambiance">Ambiance</option>
                    <option value="ace/theme/chaos">Chaos</option>
                    <option value="ace/theme/clouds_midnight">Clouds Midnight</option>
                    <option value="ace/theme/cobalt" selected>Cobalt</option>
                    <option value="ace/theme/gruvbox">Gruvbox</option>
                    <option value="ace/theme/idle_fingers">idle Fingers</option>
                    <option value="ace/theme/kr_theme">krTheme</option>
                    <option value="ace/theme/merbivore">Merbivore</option>
                    <option value="ace/theme/merbivore_soft">Merbivore Soft</option>
                    <option value="ace/theme/mono_industrial">Mono Industrial</option>
                    <option value="ace/theme/monokai">Monokai</option>
                    <option value="ace/theme/pastel_on_dark">Pastel on dark</option>
                    <option value="ace/theme/solarized_dark">Solarized Dark</option>
                    <option value="ace/theme/terminal">Terminal</option>
                    <option value="ace/theme/tomorrow_night">Tomorrow Night</option>
                    <option value="ace/theme/tomorrow_night_blue">Tomorrow Night Blue</option>
                    <option value="ace/theme/tomorrow_night_bright">Tomorrow Night Bright</option>
                    <option value="ace/theme/tomorrow_night_eighties">Tomorrow Night 80s</option>
                    <option value="ace/theme/twilight">Twilight</option>
                    <option value="ace/theme/vibrant_ink">Vibrant Ink</option>
                </optgroup>
            </select></span>
    </div>
</div>]]></FrameHtml></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame><Set FrameBorder="" FrameSize="" FrameSubUrl="" FrameType=""/></HtmlFrame><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow><Set HiddenFields="" Name="" ParaExp=""/></LogicShow></Page><Action><ActionSet><Set IsPostMsg="" LogMsg="" Type="OnPageLoad"><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M' or '@EWA_MTYPE'='C'"/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="OnPagePost"><CallSet><Set CallIsChk="" CallName="OnNew SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='N' or '@EWA_MTYPE'='C'"/><Set CallIsChk="" CallName="OnModify SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M'"/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct0"><CallSet><Set CallIsChk="" CallName="UAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="UAct1"><CallSet><Set CallIsChk="" CallName="UAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct0"><CallSet><Set CallIsChk="" CallName="SAct0 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="SAct1"><CallSet><Set CallIsChk="" CallName="SAct1 SQL" CallType="SqlSet" Test=""/></CallSet></Set><Set IsPostMsg="" LogMsg="" Type="CheckError"><CallSet><Set CallIsChk="" CallName="CheckError SQL" CallType="SqlSet" Test=""/></CallSet></Set></ActionSet><SqlSet><Set Name="OnPageLoad SQL" SqlType="query" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="OnNew SQL" SqlType="update" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="OnModify SQL" SqlType="update" TransType="no"><Sql><![CDATA[ ]]></Sql><CSSet/></Set><Set Name="UAct0 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- write your sql]]></Sql><CSSet/></Set><Set Name="UAct1 SQL" SqlType="update" TransType="no"><Sql><![CDATA[-- write your sql]]></Sql><CSSet/></Set><Set Name="SAct0 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- SELECT ...]]></Sql><CSSet/></Set><Set Name="SAct1 SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- SELECT ...]]></Sql><CSSet/></Set><Set Name="CheckError SQL" SqlType="query" TransType="no"><Sql><![CDATA[-- select 不能执行 as EWA_ERR_OUT FROM xxx where 1=2]]></Sql><CSSet/></Set></SqlSet><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="OnPageLoad SQL" CallType="SqlSet" Test="'@EWA_MTYPE'='M' or '@EWA_MTYPE'='C'"/></CallSet></Action><XItems><XItem Name="package"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="package"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="包名" Lang="zhcn" Memo=""/><Set Info="Package name" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="package" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="path"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="path"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue><Set InitValue=""/></InitValue><DescriptionSet><Set Info="保存路径" Lang="zhcn" Memo=""/><Set Info="Save path" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch><Set GroupTestLength="" IsGroup="" IsGroupDefault="" IsOrder="" IsSearchQuick="" OrderExp="" SearchExp="" SearchMulti="" SearchSql="" SearchType=""/></OrderSearch><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="path" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="name"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="name"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="类名" Lang="zhcn" Memo=""/><Set Info="name" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="name" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="java"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="hidden"/></Tag><Name><Set Name="java"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="java" Lang="zhcn" Memo=""/><Set Info="java" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch/><MaxMinLength><Set MaxLength="16777216" MinLength=""/></MaxMinLength><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="java" DataType="String" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="Save"><Tag><Set IsLFEdit="0" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="Save"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="保存代码" Lang="zhcn" Memo=""/><Set Info="Save" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet><Set AttLogic="" AttName="" AttValue=""/></AttributeSet><EventSet><Set EventLogic="" EventName="" EventType="" EventValue=""/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="Save" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction><Set Action="" AfterTip="" ConfirmInfo=""/></CallAction><OpenFrame><Set AttatchParas="" CallItemName="" CallMethod="" CallParas="" CallXmlName=""/></OpenFrame><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem></XItems><Menus/><Charts/><PageInfos><PageInfo Name="msg0"><Name><Set Name="msg0"/></Name><DescriptionSet><Set Info="消息0" Lang="zhcn" Memo=""/><Set Info="Msg0" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg1"><Name><Set Name="msg1"/></Name><DescriptionSet><Set Info="消息1" Lang="zhcn" Memo=""/><Set Info="Msg1" Lang="enus" Memo=""/></DescriptionSet></PageInfo><PageInfo Name="msg2"><Name><Set Name="msg2"/></Name><DescriptionSet><Set Info="消息2" Lang="zhcn" Memo=""/><Set Info="Msg2" Lang="enus" Memo=""/></DescriptionSet></PageInfo></PageInfos><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2010-05-06 17:48:10" Name="define_code" UpdateDate="2023-03-03 16:18:04"><Page><Name><Set Name="define_code"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="code editor!" Lang="zhcn" Memo=""/><Set Info="code editor!" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" TextareaAuto="" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_FUNCTIONS.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_CM.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_STYLE/js/EWA_ALL.js"></script>

<table border=0 width=100% style="height:100vh">
    <tr>
        <td class='btns-code' height=20 style='border-bottom:1px solid black'>
            <select id=code onchange="bb(this)"></select>
            <input class='js' type=button id='butJs' onclick='formatCode()' value='格式化JS' />

            <button class='js' onclick='EWAC_FUNCTIONS.showFunctions();'>代码片段</button>
            <span class="js">Action:
                <select id=selAction onchange="EWAC_FUNCTIONS.setAction(this.value)">
                    <option></option>
                </select>
            </span>
            <input class='sql' type=button id='butSql' onclick='formatCodeSQL()' value='格式化SQL' />
            <input class='sql' type=button id='butChkSql' onclick='checkSQL()' value='检查SQL语法' />
            <input class='html' type=button id='butHtml' onclick='formatCodeHtml()' value='格式化Html' />
            <button class='html' onclick='ConvertHtml();'>转换自定义框架</button>
            <button class='html' onclick='AddDownHead();'>下载数据头</button>
            字体： <select id='editor_font_size' onchange="change_editor_font_size()">
                <option value='9px'>9px</option>
                <option value='10px'>10px</option>
                <option value='11px'>11px</option>
                <option value='12px' selected>12px</option>
                <option value='13px'>13px</option>
                <option value='14px'>14px</option>
                <option value='15px'>15px</option>
                <option value='16px'>16px</option>
                <option value='16px'>17px</option>
                <option value='16px'>18px</option>
            </select>

            | <span id=msg></span>
        </td>
    </tr>
    <tr>
        <td  height="100%">
            <iframe frameborder=0 width=100% height=100% src='./?xmlname=@xmlname&ITEMNAME=define_edit_value&max=1'></iframe>
        </td>
    </tr>
</table>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[$('body').css('background', 'transparent').css('margin', 0);
document.body.style.overflow = 'hidden';

var inputs = [];

function aa() {
    var w = window.frames[0];
    var tb = w.$X('Test1');
    inputs = [];
    selectedIndex = null;

    tb.style.width = '100%';
    tb.style.height = '100%';

    var tb1 = tb.getElementsByTagName('table')[0];
    tb1.style.width = '100%';
    tb1.style.height = '100%';
    tb1.rows[3].style.display = 'none';

    var s = $X('code');
    s.innerHTML = "";

    //js
    aa0(window.parent.$X('PAGE$AddScript$Bottom'));
    aa0(window.parent.$X('PAGE$AddScript$Top'));

    // sql
    aa1();

    //html
    aa0(window.parent.$X('PAGE$AddHtml$Top'));
    aa0(window.parent.$X('PAGE$AddHtml$Bottom'));
    // 自定义框架
    aa0(window.parent.$X('PAGE$FrameHtml$FrameHtml'));
    //css
    aa0(window.parent.$X('PAGE$AddCss$AddCss'));

    initJsonCall();

    //this config memo
    aa0(window.parent.$X('PAGE$ConfigMemo$ConfigMemo'));

    bb(s);
}
var lastOptionType = "";

function aa0(obj) {
    if (!obj) {
        return;
    }
    //PAGE$AddHtml$Top
    var id = obj.id;
    var o = obj;
    var t = o.tagName.toUpperCase() == 'INPUT' ? o.getAttribute('EWA_COLOR_TYPE') : o['EWA_COLOR_TYPE'];
    var txt = o.tagName.toUpperCase() == 'INPUT' ? o.getAttribute('EWA_VALUE') : o['EWA_VALUE'];

    var s = document.getElementById('code');

    if (t != lastOptionType) {
        $(s).append('<optgroup label="--------- ' + t + ' ---------"></optgroup>');
        lastOptionType = t;
    }

    s.options[s.options.length] = new Option(id + ' (' + t + ')', '');
    var oo = s.options[s.options.length - 1];
    if (t == 'jscript') {
        //oo.style.color = 'darkblue';
    } else if (t == 'html') {
        //oo.style.color = 'red';
        //oo.fontWeight = 'bold';
    }
    if (s.options.length == 1) {
        oo.selected = true;
    }
    inputs.push(o);
}

function aa1() {
    var t = window.parent._EWAC_UI._UserClass.ActionTables.Tables.GetItem('SQLSET');
    let sqlIndex = t.Columns.GetIndex("SQL");
    for (var i = 0; i < t.Rows.length; i++) {
        var row = t.Rows[i];
        var o = {};
        o.getAttribute = function(name) {
            return this[name];
        }
        o.setAttribute = function(name, val) {
            this[name] = val;
        }
        o.id = 'SQL$' + row.Fields[0];
        o.EWA_VALUE = row.Fields[sqlIndex];
        o.EWA_COLOR_TYPE = 'sql';
        o.tagName = 'SQL';
        o.row = row;
        o.sqlIndex = sqlIndex;
        aa0(o);
    }
}
function initJsonCall() {
    var t = window.parent._EWAC_UI._UserClass.ActionTables.Tables.GetItem('JSONSET');
    for (var i = 0; i < t.Rows.length; i++) {
        var row = t.Rows[i];
        var o = {};
        o.getAttribute = function(name) {
            //console.log(name, this);
            return this[name];
        }
        o.setAttribute = function(name, val) {
            console.log(name, val,this);
            this[name] = val;
            if(name == "EWA_VALUE"){
                this.row.Fields[1] = val;
            }
        }
        o.id = 'JSON$' + row.Fields[0];
        o.EWA_VALUE = row.Fields[1];
        o.EWA_COLOR_TYPE = 'json';
        o.tagName = 'JSON';
        o.row = row;
        aa0(o);
    }
}
var selectedIndex;

function loadEWAFunction(a) {
    if (window.EWA_FUN != null) {
        return;
    }

    EWAC_FUNCTIONS.setJs = function(v) {
        window.frames[0].frames[0].setText('\n' + v);
        formatCode();
    };

    window.$Tip1 = $Tip; //避免出现“验证码错误提示” at this.ValidCodeError
    $Tip = function(a) {
        console.log(a);
    };

    window.EWA_FUN = new EWA_Function();
    EWA_FUN.AddTopObject(EWA, "EWA");
    EWA_FUN.LoadFunctions();
    var tagName = a[4]._UserClass.PageTables.Tables.GetItem('FrameTag').GetSingleValue();
    EWA_FUN.LoadResources(a[4]._UserClass.PageInfosTablesSet, tagName);
    var dataTable = a[4]._UserClass.ActionTables.Tables.GetItem("ActionSet");

    function loadAction(dataTable) {
        var sel = $X('selAction');
        var typeIndex = dataTable.Columns.GetIndex("Type");
        for (var i = 0; i < dataTable.Rows.length; i += 1) {
            var v = dataTable.Rows[i].Fields[typeIndex];
            sel.options[sel.options.length] = new Option(v, v);
        }
    }
    loadAction(dataTable);

    $Tip = $Tip1;
}

function bb(selectObj) {
    if (selectedIndex != null) {
        var txt = window.frames[0].frames[0].getText();
        inputs[selectedIndex].setAttribute('EWA_VALUE', txt);
    }
    selectedIndex = selectObj.selectedIndex;
    var obj = inputs[selectedIndex];

    var a = [];
    a[0] = obj;
    a[1] = obj;
    a[3] = obj.getAttribute('EWA_COLOR_TYPE');



    $('.btns-code').removeClass('js').removeClass('sql').removeClass('html');
    if (a[3] == 'jscript') {
        $('.btns-code').addClass('js');
    } else if (a[3] == 'sql') {
        $('.btns-code').addClass('sql');
    } else if (a[3] == 'html') {
        $('.btns-code').addClass('html');
    } else {
        $('#butJs').hide();
        $('#butSql').hide();
        $('#butHtml').hide(); 
        $('#butChkSql').hide();
    }
    a[4] = window.parent._EWAC_UI;
    window.frames[0].init(a);

    try {
        loadEWAFunction(a);
    } catch (e) {
        console.error(e);
    }
}
var pp = [];

function showCode(opt) {
    pp[3] = t;
    pp[1] = opt;
}

function save() {
    try {
        window.parent.$X('EWAC_SELECT_TYPE').value = 'Page';
        window.parent._EWAC_UI.ChangeType('Page');
    } catch (e) {}
    var txt = window.frames[0].frames[0].getText();
    inputs[selectedIndex].setAttribute('EWA_VALUE', txt);

    var s = document.getElementById('code');
    for (var i = 0; i < inputs.length; i++) {
        var ipt = inputs[i];
        if (!saveToXml(ipt)) {
            $X('msg').innerHTML = '<font color=red>请切换到Page页面,然后保存</font>';
            return;
        }
    }
    $X('msg').innerHTML = '保存完毕！'
}

function saveToXml(ipt) {
    var txt = ipt.getAttribute('EWA_VALUE');
    if (ipt.tagName == 'INPUT') {
        if (ipt.parentNode.parentNode.parentNode.parentNode.style.display == 'none') {
            alert('请切换到Page页面,然后再保存');
            return false;
        }
        ipt.title = txt;
        ipt.value = txt;
        ipt.setAttribute("EWA_OLD_VALUE", ipt.value);
        ipt.onblur();
    } else {
        // sql
        ipt.row.Fields[ipt.sqlIndex] = txt;
    }
    return true;
}]]></Top><Bottom><![CDATA[function formatCode() {
    window.frames[0].frames[0].beautify_code(); //defined in EWA_DEFINE/js/CodeMirror/index.html
}

function formatCodeSQL() {
    window.frames[0].frames[0].beautify_code();
}

function formatCodeHtml() {
    window.frames[0].frames[0].beautify_code();

}

function checkSQL() {
    window.frames[0].frames[0].checkSQL();
}

function AddDownHead() {
    let ss = [];
    ss.push("<input type=\"button\" onclick=\"EWA.F.FOS['@sys_frame_unid'].DownlodData('XLS')\" value=\"导出XLS文件\">");
    ss.push("<input type=\"button\" onclick=\"EWA.F.FOS['@sys_frame_unid'].DownlodData('DBF')\" value=\"导出DBF文件\">");
    ss.push("<input type=\"button\" onclick=\"EWA.F.FOS['@sys_frame_unid'].DownlodData('TXT')\" value=\"导出TXT文件\">");
    window.frames[0].frames[0].setText(ss.join('\n'));
    formatCodeHtml();
}

function ConvertHtml() {
    var win = window._EWA_DialogWnd ? _EWA_DialogWnd._OpenerWindow : window.parent;
    console.log(win.location.href);
    var s1 = win._EWAC_UISkin.CreateFrameHtml();
    window.frames[0].frames[0].setText(s1);
    formatCodeHtml();
}
//更改编辑器文字的大小
function change_editor_font_size() {
    var fontsize = $('#editor_font_size').val();
    window.frames[0].frames[0].editor.setOption('fontSize', fontsize);
    window.localStorage.EWA_CODE_FONTSIZE = fontsize;
}


//更改编辑器文字的大小
(function() {
    document.body.style.overflow = 'hidden';
    if (window.localStorage.EWA_CODE_FONTSIZE) {
        $('#editor_font_size').val(window.localStorage.EWA_CODE_FONTSIZE);
    }
})();]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[.btns-code .js,
.btns-code .html,
.btns-code .sql {
    display: none;
}

.btns-code.js .js {
    display: inline-block;
}

.btns-code.html .html {
    display: inline-block;
}

.btns-code.sql .sql {
    display: inline-block;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="jzp" CreateDate="2009-01-07 17:01:20" Name="define_edit_set" UpdateDate="2023-04-01 23:29:47"><Page><Name><Set Name="define_edit_set"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="编辑集合信息" Lang="zhcn" Memo=""/><Set Info="Modify set information" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="430" HiddenCaption="1" TextareaAuto="" VAlign="top" Width="960"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.min.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_PARAMETERS.js"></script>
<table border="0" cellspacing="0" cellpadding="0" width="100%" height="500" id="EWA_FRAME_MAIN">
    <tr>
        <td>
            <div id='divTbMain' style="width: 960px; height: 510px; overflow:auto">
                <table border="0" cellpadding="1" cellspacing="1" width="955px" id="tbMain" bgcolor='#aaaaaa' align=center>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td id='define_edit_set_buts' style="padding: 5px; border-top: 1px dotted #bbb" align="right">
            <button onclick="toggleSelect();">
                反选
            </button>
            <button onclick="createHorField();">
                垂直表字段
            </button>
            <button onclick="tbRepeat.RowUpDown(-10);">
                头部
            </button>
            <button onclick="tbRepeat.RowUpDown(-1);">
                上移
            </button>
            <button onclick="tbRepeat.RowUpDown(1);">
                下移
            </button>
            <button onclick="tbRepeat.RowUpDown(10);">
                底部
            </button>
            |
            <button onclick="if(window.confirm('您确定要删除么?')){tbRepeat.DeleteRows();}">
                删除
            </button>
            <button onclick="ok();">
                确定
            </button>
            <button>
                关闭
            </button>
        </td>
    </tr>
</table>]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[document.body.style.overflow = 'hidden';]]></Top><Bottom><![CDATA[document.body.onunload = "window.clearInterval(timer)";

function createHorField(){
	let fs=[];
	let idx=1;
	$("#tbMain>tbody>tr input:checked").each(function(){
		let tr=$(this).closest("tr");
		let fId=tr.find("[id='PAGE$DataItem$DataField']").val();
		let fDesc=tr.find("[id='PAGE$DescriptionSet$Info']").val().replace(/\'/ig,"''");
		if(fDesc.length>200){
		    fDesc=fDesc.substring(0,200);
		}
		let fTag=tr.find("[id='PAGE$Tag$Tag']").val();
		let fType=tr.find("[id='PAGE$DataItem$DataType']").val();
		let field={
			"id":fId,
			"desc":fDesc,
			"ord":idx++
		}
		let dataType="";
		if(fType=="String"){
			if(fTag=="textarea" || fTag.indexOf("Html")>=0){
				dataType="TXT";
			}else{
				dataType="STR";
			}
		}else if(fType=="Int"){
			dataType="INT";
		}else if(fType=="Number"){
			dataType="NUM";
		}else if(fType=="Date"){
			dataType="DATE";
		}
		field["dt"]=dataType;
        fs.push(field);
	});

	let sqls=[];
	let sql="INSERT INTO [_EWA_HOR_FIELD] (EWA_H_ID, EWA_F_ID, EWA_F_NAME, EWA_F_DES, EWA_F_TYPE, EWA_F_LENGTH, EWA_F_ORD, EWA_C_ID)"
	+" VALUES('[EWA_H_ID]',newid(), '[id]', '[desc]', '[dt]', NULL, [ord], '[EWA_C_ID]')";
	for(let i=0;i<fs.length;i++){
        let f=fs[i];
		let r=sql.replace("[id]",f.id).replace("[desc]",f.desc).replace("[dt]",f.dt).replace("[ord]",f.ord);
		sqls.push(r);
	}
	let div="<textarea style='width:1200px;height:500px;margin:10px;overflow:auto;'>"
	    +sqls.join(";\n")
	    +"</textarea>";
	top.$DialogHtml(div,"",1230,530);
}


function toggleSelect(){
	$("#tbMain>tbody>tr:gt(1)").each(function(){
		let ck=$(this).find("input[type=checkbox]:eq(0)");
		ck.prop("checked",!ck.prop("checked"));
	})
}]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[input[type=button] {
    background-color: #ccc;
    color: #000;
    background: linear-gradient(#ccc 50%, #cdcdcd);
    -webkit-box-shadow: #ccc 0px 2px 1px -1px inset;
    cursor: pointer;
    padding-left: 2px;
    padding-right: 2px;
    padding-top: 2px;
    padding-bottom: 2px;
    font-weight: normal;
    font-size: 12px;
    border: 1px;
    border-radius: 5px;
}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2014-12-25 12:48:02" Name="ext_from_html" UpdateDate="2023-07-25 16:07:32"><Page><Name><Set Name="ext_from_html"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo/><Cached><Set CachedSeconds="" CachedType="all"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="从HTML生成表单" Lang="zhcn" Memo=""/><Set Info="From HTML" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="" HiddenCaption="1" TextareaAuto="" VAlign="top" Width="1100"/></Size><AddHtml><Set><Top><![CDATA[<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/htmlformat.js"></script>
<script type='text/javascript' src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_FROM_TEMPLATE.js?r=@sys_unid"></script>]]></Top><Bottom><![CDATA[ 
<div align='right'>
    <input type=button id='butCreate' onclick='EWAC_F.create(this);' value='分析' />
    <input type=button id='butSql' style='display:none' onclick='open_sql_box()' value='创建表'
    />
    <input type=button id='butXml'  style='display:none' onclick='EWAC_F.create_xml(this);' value='创建配置文件' />
    <input type=button id='butClose'   value='关闭' />
</div>
<iframe id='create_xml' style='display:none'>
</iframe>]]></Bottom></Set></AddHtml><AddScript><Set><Top><![CDATA[F_XMLNAME='@F_XMLNAME';]]></Top><Bottom><![CDATA[function open_sql_box(){
    if (EWAC_F.create_sql()) {
        $('#sql').parent().show().css({
                top: 10,
                left: ($('body').width() - 700 - 10) / 2,
                padding: 5
        });
    }
}
function init_ext_from_a() {
  var obj = $('#sql').parent();
  obj.parent().parent().hide();
  $('body').append(obj);
  var h1 = "<div align='right' style='margin-top:5px'><input type=button value='执行' onclick='EWAC_F.run_sql(this)'>" 
    + "&nbsp;<input type=button onclick='$(this).parent().parent().hide()' value='闭'></div>";

  obj.append(h1);
  obj.css({
    position: 'fixed',
    height: 235,
    width: 700,

    'background-color': '#ccc',
    'border-radius': 6,
    display: 'none'
  });
  obj.find('iframe').css({
    height: 205
  });
    $('select').attr('disabled','diabled');
}
init_ext_from_a();]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[.ewa_sql_editor{height:100px}
.EWA_DHTML{height:300px}]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson><Set><RedrawJson><![CDATA[{"rows":"4","cols":"3","map":[{"id":"name","row":"0","col":"0"},{"id":"datasource","row":"0","col":"1"},{"id":"tables","row":"0","col":"2"},{"id":"item1","row":"1","col":"0"},{"id":"sql","row":"2","col":"0"}]}]]></RedrawJson></Set></RedrawJson><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet><Set LogMsg="" Transcation="" Type="datasource"><CallSet><Set CallIsChk="" CallName="datasource" CallType="ClassSet" Test=""/></CallSet></Set><Set LogMsg="" Transcation="" Type="tables"><CallSet><Set CallIsChk="" CallName="tables" CallType="ClassSet" Test=""/></CallSet></Set></ActionSet><SqlSet/><JSONSet/><ClassSet><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="" MethodName="getCfgsXml" Name="datasource" XmlTag="TableViewList/Row"/><Set ClassName="com.gdxsoft.easyweb.define.UserTableViewXmls" ConData="" MethodData="@key,@linkType" MethodName="getMoreXml1" Name="tables" XmlTag="TableViewList/Row"/></ClassSet><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet><Set CallIsChk="" CallName="datasource" CallType="ClassSet" Test=""/></CallSet></Action><XItems><XItem Name="item1"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="dHtmlNoImages"/></Tag><Name><Set Name="item1"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="粘帖框" Lang="zhcn" Memo="将HTML内容粘帖到下面"/><Set Info="Paste boxes" Lang="enus" Memo="Paste the HTML content to the following"/></DescriptionSet><XStyle/><Style><Set Style=""/></Style><ParentStyle><Set ParentStyle=""/></ParentStyle><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem/><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="name"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="name"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="名称" Lang="zhcn" Memo=""/><Set Info="The name" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="datasource"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="datasource"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="数据源" Lang="zhcn" Memo=""/><Set Info="The data source" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="EWAC_F.show_tables(this.value)"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List><Set DisplayField="name" DisplayList="" GroupField="" ListAddBlank="1" ListFilterField="" ListFilterType="" ListShowType="" ParentField="" Sql="{action:datasource}" TitleField="" TitleList="" ValueField="key" ValueList=""/></List><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="tables"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="select"/></Tag><Name><Set Name="tables"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="表" Lang="zhcn" Memo=""/><Set Info="Table" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onchange" EventType="Javascript" EventValue="EWAC_F.show_fields(this.value)"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="0"/></IsMustInput><Switch/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List><Set DisplayField="" DisplayList="" GroupField="" ListAddBlank="" ListFilterField="" ListFilterType="text" ListShowType="" ParentField="" Sql="" TitleField="" TitleList="" ValueField="" ValueList=""/></List><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="sql"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="SqlEditor"/></Tag><Name><Set Name="sql"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="SQL" Lang="zhcn" Memo=""/><Set Info="" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem><Set DataField="" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2009-01-07 17:01:20" Name="sql_create" UpdateDate="2023-07-25 16:17:23"><Page><Name><Set Name="sql_create"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached/><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log/><DescriptionSet><Set Info="生成配置文件" Lang="zhcn" Memo=""/><Set Info="Build configuration files" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="450" HiddenCaption="1" TextareaAuto="" VAlign="top" Width="820"/></Size><AddHtml><Set><Top><![CDATA[<link rel="stylesheet" href="@rv_ewa_style_path/EWA_DEFINE/css/define.css">
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_CONFIG.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_DEFINE.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC_DEFAULT.js"></script>
<script type="text/javascript" src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js"></script>
<script type="text/javascript" src="@EWA.CP/EWA_DEFINE/cgi-bin/xml/?TYPE=CFG_XML&XMLNAME=EwaDefine.xml&MODE=JS&MODE_NAME=_CFG_DEFINE"></script>
<script type="text/javascript" src="@EWA.CP/EWA_DEFINE/cgi-bin/xml/?TYPE=CFG_XML&XMLNAME=EwaConfig.xml&MODE=JS&MODE_NAME=_CFG_MAIN"></script>

<table border=0 width=100% height=450 cellspacing=0 cellpadding=0>
<tr>
  <td height="430" valign="top">
      <table border=0 width=100% height=100% cellspacing=0 cellpadding=0 id=STEP0>
        <tr>
          <td width=213 height="100%" id=tbSQL>
            <iframe frameborder="0" width="100%" height="100%" 
            src="./?xmlname=/ewa/ewa.xml&itemname=tabletree&EWA_FRAMESET_NO=1" ></iframe>
          </td>
          <td  height="100%">
            <iframe frameborder="0" width="100%" height="100%" name="xml" src="about:blank"></iframe>
          </td>
        </tr>
      </table>
      <div id=STEP1 class=STEP style='display: none'></div>
      <div id=STEP2 class=STEP style='display: none'></div>
      <div id=STEP3 class=STEP style='display: none'></div>
      <div id=STEP4 class=STEP style='display: none'></div>
      <div id=STEP5 class=STEP style='display: none'></div>
  </td>
</tr>
<tr>
<td align=right height=30 style='border-top: 1px solid #ccc'>
						<button id="butprev" disabled
							onclick="define.Next(this,$X('butnext'),-1);">上一步</button>
						<button id="butnext"
							 onclick="define.Next($X('butprev'),this,1);">下一步</button>
						|&nbsp;
						<button onclick="define.CreateNewFrame();">确定</button>
						<button type=button>关闭</button>
						&nbsp;
</td>
</tr>
</table>
					
          ]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[document.body.style.overflow = 'hidden';]]></Top><Bottom><![CDATA[var xmlName = '@F_XMLNAME';
var frameTag = '@FrameTag';
var lang = "zhcn";
var define;
var timer1;
var is_auto = "@auto";

function load0() {
    EWA.CP = "@SYS_ContextPath";
    define = new EWA_DefineClass(frameTag);

    if (is_auto) {
        cfg = "@cfg";
        tablename = "@tablename".split(';')[3];
        var u = $U2("ewa/ewa.xml", 'fields', 'cfg=' + cfg + '&tablename=' + tablename + '&EWA_FRAMESET_NO=1');
        window.frames[1].location = u;
        timer1 = window.setInterval(load_auto, 100);
    } else {
        var doc = window.frames[1].document;
        doc.open();
        doc.close();
        doc.body.innerHTML = "<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div align=center>请选择表</div>";

        doc.body.innerHTML = define.GetMainInfo();
        timer1 = window.setInterval(load1, 100);
    }

}

function load1() {
    if (typeof _EWA_DialogWnd == 'undefined') {
        return;
    }
    window.clearInterval(timer1);
    define.SetTitle();
}

function load_auto() {
    var w = window.frames[1];
    if (w.$X && w.document.readyState == 'complete') {
        window.clearInterval(timer1);
        define.SetTitle();
        $X("butnext").click();
        $('input[n1=M]').click();
        $X("butnext").click();
        $X("butnext").click();
        $X("butnext").click();

        define.CreateNewFrame();

        $X("butnext").click();
        $X("butnext").click();
        $X("butnext").click();

        define.CreateNewFrame();
        if (parent.xml_create_ok) {
            parent.xml_create_ok(XMLS);
        }
    }
}
addEvent(window, 'load', load0);]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[
            .STEP{
	width:100%;
	height:430px;
	overflow-y:auto;
	
}
          ]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2018-06-22 11:33:33" Name="import_xml" UpdateDate="2023-08-10 11:20:20"><Page><Name><Set Name="import_xml"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="导入配置文件" Lang="zhcn" Memo=""/><Set Info="Import configuration file" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet/><RowAttributeSet/><GroupSet/><Size><Set FrameCols="C2" HAlign="center" Height="" HiddenCaption="1" TextareaAuto="" VAlign="top" Width="600"/></Size><AddHtml><Set><Top/><Bottom/></Set></AddHtml><AddScript><Set><Top><![CDATA[ ]]></Top><Bottom><![CDATA[function do_upload() {
    var obj = $('#EWA_FRAME_@sys_frame_unid #butOk');
    if (obj.attr('doupload')) {
        return;
    }
    var ewa = EWA.F.FOS['@sys_frame_unid'];
    if (!ewa.CheckValidAll($X('f_@sys_frame_unid'))) {
        return;
    }

    obj.attr('doupload', 1);

    var up1 = window['h5u_@sys_frame_unid$up'];
    up1.createWaitBox();
    up1.submitUploads();

}

function init_imoort_xml() {
    var up1 = window['h5u_@sys_frame_unid$up'];
    //console.log(up1);
    up1.showPreviewAfter = function(obj, file){
        //console.log(obj,file);
        $('#EWA_FRAME_@sys_frame_unid #target_xmlname').val(file.name);
    };
    up1.uploadsCompleted = function(o) {
        up1.removeWaitBox();

        var o1 = JSON.parse(o[0])[0];
        console.log(o1);

        var path = $('#EWA_FRAME_@sys_frame_unid #path').val();
        var target_xmlname = $('#EWA_FRAME_@sys_frame_unid #target_xmlname').val();

        var xml_file_path = o1.UP_URL.replace(o1.CT, '');

        var url = EWA.CP + '/EWA_DEFINE/cgi-bin/xml/?TYPE=IMPORT_XML&xmlname=' + target_xmlname.toURL() +
            "&path=" + path.toURL() + "&up_name=" + xml_file_path;

        $J(url, function(rst) {
            EWA.OW.Load();
            if (!rst.RST) {
                alert(rst.ERR);
            } else {
                EWA.OW.PWin.reloadCfgTree();
            }
            EWA.OW.Close();
        });
    }
}
addEvent(window, 'load', init_imoort_xml);]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[ ]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml><![CDATA[ ]]></FrameHtml></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems><XItem Name="path"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="path"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="导入配置路径" Lang="zhcn" Memo=""/><Set Info="Path" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="1"/></IsMustInput><Switch/><DataItem><Set DataField="path" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="target_xmlname"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="text"/></Tag><Name><Set Name="target_xmlname"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="导入文件名称" Lang="zhcn" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="1"/></IsMustInput><Switch/><DataItem><Set DataField="target_xmlname" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="up"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="h5upload"/></Tag><Name><Set Name="up"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="配置文件" Lang="zhcn" Memo=""/><Set Info="Configuration file" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet/><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput><Set IsMustInput="1"/></IsMustInput><Switch/><DataItem><Set DataField="up" DataType="" DisableOnModify="" Format="" FrameOneCell="" Icon="" IconLoction="" IsEncrypt="" NumberScale="" SumBottom="" TransTarget="" Translation="" Trim="" Valid=""/></DataItem><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload><Set NewSizesIn="" RunUpSQLResized="" UpDelete="yes" UpExts="xml" UpJsonEncyrpt="no" UpLimit="" UpMulti="" UpNewSizes="" UpPath="imports" UpSQL="" UpSaveMethod="" UpUnZip=""/></Upload><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem><XItem Name="butOk"><Tag><Set IsLFEdit="" SpanShowAs="" Tag="button"/></Tag><Name><Set Name="butOk"/></Name><GroupIndex><Set GroupIndex=""/></GroupIndex><InitValue/><DescriptionSet><Set Info="确定" Lang="zhcn" Memo=""/><Set Info="Ok" Lang="enus" Memo=""/></DescriptionSet><XStyle/><Style/><ParentStyle/><AttributeSet/><EventSet><Set EventLogic="" EventName="onclick" EventType="Javascript" EventValue="do_upload()"/></EventSet><IsHtml/><OrderSearch/><MaxMinLength/><MaxMinValue/><IsMustInput/><Switch/><DataItem/><DispEnc/><DataRef/><List/><UserSet/><CallAction/><OpenFrame/><Frame/><UserControl/><DefineFrame/><PopFrame/><signature/><Upload/><VaildEx/><MGAddField/><AnchorParas/><LinkButtonParas/><DopListShow/><ReportCfg/><CombineFrame/><AddrMapRels/><ImageDefault/></XItem></XItems><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate><EasyWebTemplate Author="gl" CreateDate="2021-03-05 12:41:08" Name="define_code_editor" UpdateDate="2024-01-18 14:27:13"><Page><Name><Set Name="define_code_editor"/></Name><FrameTag><Set FrameTag="Frame"/></FrameTag><SkinName><Set IsXhtml="" SkinName="Test1"/></SkinName><DataSource><Set DataSource=""/></DataSource><AllowJsonExport/><ConfigMemo><Set><ConfigMemo/></Set></ConfigMemo><Cached><Set CachedSeconds="" CachedType="none"/></Cached><Acl><Set Acl="com.gdxsoft.easyweb.define.DefineAcl"/></Acl><Log><Set Log=""/></Log><DescriptionSet><Set Info="code editor!" Lang="zhcn" Memo=""/><Set Info="code editor!" Lang="enus" Memo=""/></DescriptionSet><PageAttributeSet><Set PageAttName="class" PageAttValue="dark"/></PageAttributeSet><RowAttributeSet/><GroupSet/><Size><Set FrameCols="" HAlign="center" Height="100%" HiddenCaption="1" TextareaAuto="" VAlign="top" Width="100%"/></Size><AddHtml><Set><Top><![CDATA[<script src="@rv_ewa_style_path/EWA_DEFINE/js/EWAC.js" type="text/javascript"></script>
<script src="@rv_ewa_style_path/third-party/ace/v1.4.12/src-min/ace.js" type="text/javascript"></script>
<script src="@rv_ewa_style_path/third-party/ace/v1.4.12/src-min/ext-language_tools.js" type="text/javascript"></script>
<script src="@rv_ewa_style_path/third-party/js-beautify/v1.14.11/lib/beautify.min.js"></script>
<script src="@rv_ewa_style_path/third-party/js-beautify/v1.14.11/lib/beautify-css.min.js"></script>
<script src="@rv_ewa_style_path/third-party/js-beautify/v1.14.11/lib/beautify-html.min.js"></script>

<script src="@rv_ewa_style_path/third-party/sql-formatter/dist/sql-formatter.min.js"></script>

<script src="@rv_ewa_style_path/third-party/jquery/jquery-3.6.0.min.js"></script>
<script src="@rv_ewa_style_path/third-party/raphael-master/raphael.min.js"></script>
<script src="@rv_ewa_style_path/third-party/flowchart.js-master/release/flowchart.min.js"></script>
<script src="@rv_ewa_style_path/third-party/markdown-editor-master/markdown-it.js" type="text/javascript"></script>
<script src="@rv_ewa_style_path/third-party/markdown-editor-master/highlight.pack.js" type="text/javascript"></script>
<script src="@rv_ewa_style_path/third-party/markdown-editor-master/markdown-it-footnote.js" type="text/javascript"></script>
<pre id="code"></pre>
<div id='status'>
    <a href="javascript:beautify_code()" title="(Cmd+Shift+F)">格式化代码</a> <a id='check_sql' href="javascript: checkSQL()">检查SQL语法</a>
    <span style='float: right'> <a>Theme:</a> <select id="theme" size="1" onchange="change_code_theme(this)">
				<optgroup label="Bright">
					<option value="ace/theme/chrome">Chrome</option>
					<option value="ace/theme/clouds">Clouds</option>
					<option value="ace/theme/crimson_editor">Crimson Editor</option>
					<option value="ace/theme/dawn">Dawn</option>
					<option value="ace/theme/dreamweaver">Dreamweaver</option>
					<option value="ace/theme/eclipse">Eclipse</option>
					<option value="ace/theme/github">GitHub</option>
					<option value="ace/theme/iplastic">IPlastic</option>
					<option value="ace/theme/solarized_light">Solarized Light</option>
					<option value="ace/theme/textmate">TextMate</option>
					<option value="ace/theme/tomorrow">Tomorrow</option>
					<option value="ace/theme/xcode">XCode</option>
					<option value="ace/theme/kuroir">Kuroir</option>
					<option value="ace/theme/katzenmilch">KatzenMilch</option>
					<option value="ace/theme/sqlserver">SQL Server</option>
				</optgroup>
				<optgroup label="Dark">
					<option value="ace/theme/ambiance">Ambiance</option>
					<option value="ace/theme/chaos">Chaos</option>
					<option value="ace/theme/clouds_midnight">Clouds Midnight</option>
					<option value="ace/theme/cobalt" selected>Cobalt</option>
					<option value="ace/theme/gruvbox">Gruvbox</option>
					<option value="ace/theme/idle_fingers">idle Fingers</option>
					<option value="ace/theme/kr_theme">krTheme</option>
					<option value="ace/theme/merbivore">Merbivore</option>
					<option value="ace/theme/merbivore_soft">Merbivore Soft</option>
					<option value="ace/theme/mono_industrial">Mono Industrial</option>
					<option value="ace/theme/monokai">Monokai</option>
					<option value="ace/theme/pastel_on_dark">Pastel on dark</option>
					<option value="ace/theme/solarized_dark">Solarized Dark</option>
					<option value="ace/theme/terminal">Terminal</option>
					<option value="ace/theme/tomorrow_night">Tomorrow Night</option>
					<option value="ace/theme/tomorrow_night_blue">Tomorrow Night Blue</option>
					<option value="ace/theme/tomorrow_night_bright">Tomorrow Night Bright</option>
					<option value="ace/theme/tomorrow_night_eighties">Tomorrow Night 80s</option>
					<option value="ace/theme/twilight">Twilight</option>
					<option value="ace/theme/vibrant_ink">Vibrant Ink</option>
				</optgroup>
		</select></span>
</div>

 ]]></Top><Bottom/></Set></AddHtml><AddScript><Set><Top/><Bottom><![CDATA[var editor, aceBeautify, markType;

function aa() {
    if (!window.parent.__TYPE__) {
        return;
    }
    editor = null;
    markType = window.parent.__TYPE__;

    var val = window.parent.__VAL__;
    if (val == null) {
        val = "";
    }
    //console.log(markType,val);
    mode = 'ace/mode/html';
    document.getElementById('check_sql').style.display = 'none';
    if (markType == 'sql') {
        mode = 'ace/mode/sql';
        document.getElementById('check_sql').style.display = '';
    } else if (markType == 'jscript' || markType == 'js') {
        mode = 'ace/mode/javascript';
    } else if (markType == 'xml') {
        mode = 'ace/mode/xml';
    } else if (markType == 'css') {
        mode = 'ace/mode/css';
    } else if (markType == 'json') {
        mode = 'ace/mode/json';
    } else if (markType == 'md') {
        mode = 'ace/mode/markdown';
    }
    if (document.getElementById('code')) {
        $('#code').remove();
        var pre = document.createElement('pre');
        pre.id = 'code';
        document.body.appendChild(pre);
    }

    ace.require("ace/ext/language_tools");

    editor = ace.edit("code");

    var theme_code = "ace/theme/cobalt";
    if (window.localStorage && window.localStorage["EWA_CODE_THENE"]) {
        var v = window.localStorage["EWA_CODE_THENE"];
        var obj = document.getElementById('theme');
        for (var i = 0; i < theme.options.length; i++) {
            var v1 = obj.options[i].value;
            if (v1 == v) {
                theme_code = v1;
                obj.value = v1;
                break;
            }
        }
    }

    editor.setTheme(theme_code);
    editor.session.setMode(mode);
    editor.getSession().setUseWrapMode(true);

    editor.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true
    });
    if (window.localStorage && window.localStorage.EWA_CODE_FONTSIZE) {
        editor.setOption('fontSize', window.localStorage.EWA_CODE_FONTSIZE);
    }
    editor.commands.addCommand({
        name: 'myCommand',
        bindKey: {
            win: 'Ctrl-Shift-F',
            mac: 'Command-Shift-F'
        },
        exec: function(editor) {
            beautify_code();
        },
        readOnly: true
    });
    editor.commands.addCommand({
        name: 'myCommandSave',
        bindKey: {
            win: 'Ctrl-S',
            mac: 'Command-S'
        },
        exec: function(editor) {
            try {
                parent.parent.save();
                top.saveXml();
            } catch (e) {
                console.log(e);
            }
        },
        readOnly: true
    });
    editor.$blockScrolling = Infinity;

    editor.setValue(val, 1);
    editor.selection.clearSelection();
    if (markType == 'xml') {
        editor.setOption('readOnly', true);
    }
    if (markType == 'json') {
        beautify_code();
    }

    var iframes = window.parent.document.getElementsByTagName('iframe');
    for (var i = 0; i < iframes.length; i++) {
        var o = iframes[i];
        if (o.contentWindow == window) {
            if (markType == 'md') {
                o.style.cssText = 'left:0;width:50%;top:0;bottom:0;position:absolute;';
                var s = '<div id="markdown_html" class="ewa-mark-down" style="white-space:normal;overflow:auto;left:50%;right:0;top:0;bottom:0;position:absolute;padding:10px;box-sizing:border-box;"></div>';
                window.parent.$(o.parentNode).append(s);
                init_editor_markdown();
                updateMarkDown();
            } else {
                o.style.cssText = 'width:100%';
                window.parent.$("#markdown_html").remove();
            }
            break;
        }
    }
}

function init_editor_markdown() {
    var languageOverrides = {
        js: 'javascript',
        html: 'xml'
    };
    var flow_opt = {
        'x': 0,
        'y': 0,
        'line-width': 2,
        'line-length': 50,
        'text-margin': 10,
        'font-size': 14,
        'font-color': 'black',
        'line-color': 'black',
        'element-color': 'black',
        'fill': 'white',
        'yes-text': 'yes',
        'no-text': 'no',
        'arrow-end': 'block',
        'scale': 1,
        // style symbol types
        'symbols': {
            'start': {
                'font-color': 'red',
                'element-color': 'green',
                'fill': 'yellow'
            },
            'end': {
                'class': 'end-element'
            }
        },
        // even flowstate support ;-)
        'flowstate': {
            // 'past' : { 'fill' : '#CCCCCC', 'font-size' : 12},
            // 'current' : {'fill' : 'yellow', 'font-color' : 'red', 'font-weight' : 'bold'},
            // 'future' : { 'fill' : '#FFFF99'},
            'request': {
                'fill': 'blue'
            }
            //,
            // 'invalid': {'fill' : '#444444'},
            // 'approved' : { 'fill' : '#58C4A3', 'font-size' : 12, 'yes-text' : 'APPROVED', 'no-text' : 'n/a' },
            // 'rejected' : { 'fill' : '#C45879', 'font-size' : 12, 'yes-text' : 'n/a', 'no-text' : 'REJECTED' }
        }
    };
    md = markdownit({
        html: true,
        highlight: function(code, lang) {
            if (languageOverrides[lang])
                lang = languageOverrides[lang];
            if (lang && hljs.getLanguage(lang)) {
                try {
                    return hljs.highlight(lang, code).value;
                } catch (e) {}
            }
            if (lang && lang == 'flow') {
                try {
                    if (map_svg[code]) {
                        return map_svg[code];
                    }
                    var diagram = flowchart.parse(code, flow_opt);
                    var id = 'flow-' + Math.random();
                    obj.id = id;
                    var h = "<div id='" + id + "'></div>";
                    setTimeout(function() {
                        diagram.drawSVG(document.getElementById(id));

                        if (parent_textarea_html) {
                            parent_textarea_html.value = document.getElementById('out').innerHTML;
                        }
                        map_svg[code] = document.getElementById(id).outerHTML;

                    }, 1);
                    return h;
                } catch (e) {
                    return e;
                }
            }
            return '';
        }
    }).use(markdownitFootnote);
    editor.getSession().on('change', function(e) {
        updateMarkDown();
    });
}

function updateMarkDown() {
    if (markType == 'md') {
        var mdCnt = getText();
        var html = md.render(mdCnt);
        window.parent.$("#markdown_html").html(html);
    }
}

function beautify_code() {
    /* 效果不好 
    if(!aceBeautify){
    	aceBeautify= ace.require("ace/ext/beautify");
    }
    aceBeautify.beautify(editor.session); */
    var p = editor.getCursorPosition();
    var s;
    if (mode == 'ace/mode/javascript' || mode == 'ace/mode/json') {
        s = js_beautify(getText());
    } else if (mode == 'ace/mode/html' || mode == 'ace/mode/xml') {
        s = html_beautify(getText());
    } else if (mode == 'ace/mode/css') {
        s = css_beautify(getText());
    } else if (mode == 'ace/mode/sql') {
        beautify_code_sql();
        return;
    } else {
        $Tip('不支持类型格式化');
        return;
    }
    editor.setValue(s, 1);
    editor.moveCursorToPosition(p);
    editor.selection.clearSelection();
}

function beautify_code_sql() {
    let config = {
        "language": "tsql",
        "tabWidth": "4",
        "useTabs": false,
        "keywordCase": "upper",
        "dataTypeCase": "preserve",
        "functionCase": "preserve",
        "identifierCase": "preserve",
        "indentStyle": "standard",
        "logicalOperatorNewline": "before",
        "expressionWidth": "82",
        "lineBetweenQueries": "1",
        "denseOperators": false,
        "newlineBeforeSemicolon": false
    };
    var p = editor.getCursorPosition();
    var txt = getText();
    try {
        let formated = sqlFormatter.format(txt, config);
        editor.setValue(formated, 1);
        editor.moveCursorToPosition(p);
        editor.selection.clearSelection();
    } catch (e) {
        alert(e);
    }
}

function beautify_code_sql_old() {
    var p = editor.getCursorPosition();
    var txt = getText();
    var u = '@EWA.CP/EWA_DEFINE/cgi-bin/xml/?type=format&mode=sql';
    var ajax = new top.EWA_AjaxClass();
    ajax.AddParameter('code', txt);
    ajax.PostNew(u, function() {
        if (ajax.IsRunEnd()) {
            var rst;
            eval('rst=' + ajax.GetRst());
            var txt = rst['text'];
            editor.setValue(txt, 1);
            editor.moveCursorToPosition(p);
            editor.selection.clearSelection();
        }
    });
}

function checkSQL() {
    var sql = getText();
    var u = '@EWA.CP/EWA_DEFINE/cgi-bin/xml/?type=CHECK_SQL';
    let win = null;
    if (parent._EWA_DialogWnd) { // 在对话框内
        win = parent._EWA_DialogWnd._OpenerWindow;
    } else {
        win = parent.parent.parent;
    }
    let data = {
        sql: sql,
        db: win.$X('PAGE$DataSource$DataSource').value
    };
    $JP(u, data, function(rst) {
        var ok = rst['RST'];
        if (ok) {
            $Tip('ok');
        } else {
            $Tip(rst['ERR']);
        }
    });
}

function getText() {
    return editor.getValue();
}

function setText(t) {
    editor.setValue(editor.getValue() + t, 1);
}

function change_code_theme(obj) {
    editor.setTheme(obj.value);
    window.localStorage["EWA_CODE_THENE"] = obj.value;
}
aa();]]></Bottom></Set></AddScript><AddCss><Set><AddCss><![CDATA[#code {
	margin: 0;
	position: absolute;
	top: 0px;
	bottom: 20px;
	left: 0;
	right: 0;
}
body {
    background: transparent;
}
.ace_replace_form {
	display: block !important;
}

#status {
	position: absolute;
	bottom: 0;
	height: 20px;
	left: 0;
	width: 100%;
	font-size: 12px;
	font-family: "Microsoft YaHei", "微软雅黑", tahoma, Verdana, Arial, sans-serif, arial, STHeiti, 宋体;
	line-height: 20px;
	overflow: hidden;
}

.light #status a {
	color: #333;
}

.light #status a:hover {
	color: #08c;
}

#status a {
	color: #f1f1f1;
	text-decoration: none;
	margin-left: 10px;
}

#status a:hover {
	color: red;
}

body {
	overflow: hidden;
}

::-webkit-scrollbar {
	width: 6px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background-color: #000000;
} /* 滚动条的滑轨背景颜色 */
::-webkit-scrollbar-thumb {
	background-color: rgba(155, 155, 155, 0.4);
} /* 滑块颜色 */
::-webkit-scrollbar-button {
	background-color: red;
} /* 滑轨两头的监听按钮颜色 */
::-webkit-scrollbar-corner {
	background-color: rgba(77, 77, 77, 0.4);
} /* 横向滚动条和纵向滚动条相交处尖角的颜色 */]]></AddCss></Set></AddCss><ChartsShow/><RedrawJson/><BoxJson/><LeftJson/><FrameHtml><Set><FrameHtml/></Set></FrameHtml><PageSize/><ListUI/><MenuShow/><Menu/><Tree/><HtmlFrame/><TreeIconSet/><MGAxisX/><MGAxisY/><MGCell/><LogicShow/></Page><Action><ActionSet/><SqlSet/><JSONSet/><ClassSet/><XmlSet/><XmlSetData/><ScriptSet/><UrlSet/><CSSet/><CallSet/></Action><XItems/><Menus/><Charts/><PageInfos/><Workflows/></EasyWebTemplate></EasyWebTemplates>